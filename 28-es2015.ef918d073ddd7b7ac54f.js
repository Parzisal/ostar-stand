(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{TwVa:function(t,e,a){"use strict";a.d(e,"a",function(){return n}),a.d(e,"g",function(){return i}),a.d(e,"b",function(){return o}),a.d(e,"f",function(){return r}),a.d(e,"c",function(){return c}),a.d(e,"e",function(){return l}),a.d(e,"d",function(){return d}),a.d(e,"h",function(){return u});class n{constructor(){}get label(){return this.device_id}}class i{constructor(){}get label(){return`${this.first_name} ${this.middle_name||""} ${this.last_name} - ${this.patient_id}`}}class o extends class{}{get label(){return`${this.first_name} ${this.last_name} - ${this.npi}`}}var s=a("2Vo4");class r{constructor(t,e=null){this.totalCount=0,this.items$=new s.a(new Array),this.searchChange$=new s.a(null),this.getRequestFuncName=t,this.type=e}}class c{constructor(){}}class l{get label(){return this.name}}class d{constructor(t){Object.assign(this,t)}}class u{get label(){return this.name}}},aS3c:function(t,e,a){"use strict";a.r(e),a.d(e,"MeasurementListModule",function(){return X});var n=a("PCNd"),i=a("tyNb"),o=a("fXoL"),s=a("TwVa");const r={data:{labels:new Array(200).fill(0).map((t,e)=>e++),datasets:[{data:[],borderColor:"#1c455f",backgroundColor:"#1c455f",fill:!1,showLine:!1,radius:3,pointHoverRadius:3}]},options:{tooltips:{displayColors:!1,callbacks:{title:()=>null,beforeLabel:t=>"Systolic: "+t.xLabel,label:t=>"Diastolic: "+t.yLabel},enabled:!1,custom:function(t){let e=document.querySelector(".chartjs-tooltip");function a(){return document.createElement("div")}if(e||(e=a(),e.className="chartjs-tooltip",document.body.appendChild(e)),t.body){e.innerHTML="";const n=t.body,i=a();i.className="chartjs-tooltip__body",Object.values(n[0]).forEach(t=>{const e=a();e.className="chartjs-tooltip__line",e.innerText=t,i.appendChild(e)}),e.appendChild(i);const o=n.length;if(o>1){const t=a();t.className="chartjs-tooltip__more",t.innerText=`Click to see ${o-1} more`,e.appendChild(t)}}const n=this._chart.canvas.getBoundingClientRect(),i=e.style;i.left=n.left+window.pageXOffset+t.caretX+10+"px",i.top=n.top+window.pageYOffset+t.caretY-10+"px",i.fontFamily=t._bodyFontFamily,i.fontSize=t.bodyFontSize+"px",i.fontStyle=t._bodyFontStyle,i.padding=t.yPadding+"px "+t.xPadding+"px",i.pointerEvents="none"}},legend:{display:!1},elements:{point:{radius:3}},scales:{xAxes:[{type:"linear",scaleLabel:{display:!0,labelString:"Systolic mm Hg"},ticks:{min:50,max:210}}],yAxes:[{scaleLabel:{display:!0,labelString:"Diastolic mm Hg"},ticks:{min:20,max:140,stepSize:20}}]}}};var c=a("Pj3g"),l=a("ofXK"),d=a("xlym"),u=a("TtQc");let p=(()=>{class t{}return t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({factory:function(e){return new(e||t)}}),t})();var m=a("ILvI"),b=a("o5fV");let h=(()=>{class t extends b.a{constructor(){super()}getPatientMeasurements(t){return this.getItems(t,m.q)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Kb({token:t,factory:t.\u0275fac,providedIn:p}),t})();var f=a("eFim"),g=a("HZS1"),y=a("5vDB"),_=a("1ReC"),C=a("GhNK"),v=a("KebF"),x=a("rMZv"),w=a("0wOC"),T=a("OzZK"),P=a("C2AL"),I=a("ZyQt");function H(t,e){if(1&t&&o.Pb(0,"app-patient-log-records",11),2&t){const t=o.ec();o.mc("limit",3)("allowQueryParams",!1)("patientId",t.patientId)("showPagination",!1)}}const O=function(t){return{systolic:t}},A=function(t){return{diastolic:t}},M=function(t,e){return[t,e]};function L(t,e){if(1&t&&o.Pb(0,"app-tags",18),2&t){const t=o.ec().$implicit;o.mc("data",o.qc(5,M,o.pc(1,O,t.systolic),o.pc(3,A,t.diastolic)))}}const z=function(t,e,a){return[t,e,a]};function k(t,e){if(1&t&&o.Pb(0,"app-tags",19),2&t){const t=o.ec().$implicit;o.mc("data",o.rc(1,z,t.heartbeat_zone_frequency,t.valve_zone_frequency,t.cardiovascular_zone_frequency))}}function $(t,e){if(1&t&&(o.Ub(0,"td"),o.Hc(1),o.Tb()),2&t){const t=o.ec().$implicit;o.Ab(1),o.Ic(t.weight)}}function F(t,e){if(1&t&&(o.Ub(0,"td"),o.Hc(1),o.Tb()),2&t){const t=o.ec().$implicit;o.Ab(1),o.Ic(t.spo2)}}function U(t,e){if(1&t&&(o.Ub(0,"td"),o.Hc(1),o.Tb()),2&t){const t=o.ec().$implicit;o.Ab(1),o.Ic(t.blood_glucose)}}function S(t,e){if(1&t&&(o.Ub(0,"td"),o.Hc(1),o.Tb()),2&t){const t=o.ec().$implicit;o.Ab(1),o.Ic(t.temperature)}}const j=function(t){return["measurement-details",t,"blood-pressure"]},q=function(t){return{measurement:t}};function D(t,e){if(1&t&&(o.Ub(0,"a",20),o.Hc(1,"BP wave"),o.Tb()),2&t){const t=o.ec().$implicit;o.mc("routerLink",o.pc(2,j,t.id))("state",o.pc(4,q,t))}}const N=function(t){return{"test-measurement":t}};function E(t,e){if(1&t&&(o.Ub(0,"tr",12),o.Ub(1,"td"),o.Hc(2),o.fc(3,"date"),o.Tb(),o.Ub(4,"td"),o.Fc(5,L,1,8,"app-tags",13),o.Tb(),o.Ub(6,"td"),o.Hc(7),o.Tb(),o.Ub(8,"td"),o.Hc(9),o.Tb(),o.Ub(10,"td"),o.Hc(11),o.Tb(),o.Ub(12,"td"),o.Fc(13,k,1,5,"app-tags",14),o.Tb(),o.Ub(14,"td"),o.Hc(15),o.Tb(),o.Ub(16,"td"),o.Hc(17),o.Tb(),o.Ub(18,"td"),o.Hc(19),o.Tb(),o.Fc(20,$,2,1,"td",15),o.Fc(21,F,2,1,"td",15),o.Fc(22,U,2,1,"td",15),o.Fc(23,S,2,1,"td",15),o.Ub(24,"td",16),o.Fc(25,D,2,6,"a",17),o.Tb(),o.Tb()),2&t){const t=e.$implicit,a=o.ec();o.mc("ngClass",o.pc(19,N,t.test))("title",t.test?"Test measurement":""),o.Ab(2),o.Ic(o.hc(3,16,t.measurement_date,"short")),o.Ab(3),o.mc("ngIf",null!=t.systolic&&null!=t.diastolic),o.Ab(2),o.Ic(t.systolic),o.Ab(2),o.Ic(t.diastolic),o.Ab(2),o.Ic(t.pulse),o.Ab(2),o.mc("ngIf",null!=t.heartbeat_zone_frequency&&null!=t.valve_zone_frequency&&null!=t.cardiovascular_zone_frequency),o.Ab(2),o.Ic(t.heartbeat_zone_frequency),o.Ab(2),o.Ic(t.valve_zone_frequency),o.Ab(2),o.Ic(t.cardiovascular_zone_frequency),o.Ab(1),o.mc("ngIf",!a.extraMeasurementsHidden.weight),o.Ab(1),o.mc("ngIf",!a.extraMeasurementsHidden.spo2),o.Ab(1),o.mc("ngIf",!a.extraMeasurementsHidden.blood_glucose),o.Ab(1),o.mc("ngIf",!a.extraMeasurementsHidden.temperature),o.Ab(2),o.mc("ngIf",!(t.weight||t.blood_glucose||t.spo2))}}function R(t,e){if(1&t&&(o.Ub(0,"div"),o.Pb(1,"nz-tag",21),o.Ub(2,"p"),o.Hc(3),o.Tb(),o.Ub(4,"p",22),o.Hc(5),o.Tb(),o.Tb()),2&t){const t=e.$implicit;o.Ab(1),o.Cc("border-color",t.color),o.Ab(2),o.Ic(t.title),o.Ab(2),o.Ic(t.value)}}const Q=function(){return["doctor"]},B=[{path:"",component:(()=>{class t extends c.a{constructor(t,e,a,n,i){super(),this.router=t,this.activatedRoute=e,this.measurementListService=a,this.locale=n,this.trackingTimeService=i,this.displayColumns=[{name:"Measurement date",filterKey:"measurement_date",customFilter:"date",sort:!0,sortOrder:null,filter:!0,visible:!1},{name:"BP color"},{name:"Systolic"},{name:"Diastolic"},{name:"Pulse"},{name:"Heart spectrum"},{name:"I_1"},{name:"I_2"},{name:"I_3"},{name:d.a.weight,hidden:!0},{name:d.a.spo2,hidden:!0},{name:d.a.blood_glucose,hidden:!0},{name:d.a.temperature,hidden:!0},{name:""}],this.chartConfig={aside:[{title:"Hypertension Severe",color:u.a.redSevere,value:"200/120"},{title:"Hypertension Moderate",color:u.a.redModerate,value:"180/110"},{title:"Hypertension Mild",color:u.a.redMild,value:"160/100"},{title:"Borderline High",color:u.a.yellow,value:"140/90"},{title:"High Normal",color:u.a.greenHighNormal,value:"130/85"},{title:"Normal",color:u.a.greenNormal,value:"120/80"},{title:"Low Normal",color:u.a.greenLowNormal,value:"100/65"},{title:"Hypotension Low",color:u.a.greenLow,value:"90/60"}],chart:r},this.extraMeasurementsHidden={};let o=this.chartConfig.chart.options.tooltips.callbacks;o=Object.assign(Object.assign({},o),{afterLabel:t=>new l.e(this.locale).transform(this.items[t.index].measurement_date,"short")}),this.chartConfig.chart.options.tooltips.callbacks=o,this.patientId=this.activatedRoute.snapshot.params.patientId}onBackClick(){this.router.navigate(["/"])}getPatientMeasurements(t=this.params){this.getItems(this.measurementListService.getPatientMeasurements(t)).subscribe(()=>{this.addColumns();const t=this.items.filter(t=>!t.test).map(t=>({x:t.systolic,y:t.diastolic}));this.chartConfig.chart.data.datasets.forEach(e=>e.data=t)})}onQueryParamsChange(t){this.params=t,this.params.patients=this.patientId,this.getPatientMeasurements()}addColumns(){Object.keys(d.a).filter(t=>"blood_pressure_metrics"!==t).forEach(t=>{const e=!this.items.some(e=>e[t]);this.extraMeasurementsHidden[t]=e,this.displayColumns.find(e=>e.name===d.a[t]).hidden=e})}onChartPointClickEvt(t){const e=this.items[t];this.expandedTooltipData=null;const a=this.items.filter(t=>t.diastolic===e.diastolic&&t.systolic===e.systolic);1!==a.length?this.createExpandedTooltipData(e,a):window.open(`${this.router.url}/measurement-details/${e.id}/blood-pressure`,"_blank")}createExpandedTooltipData(t,e){this.expandedTooltipData=new s.c,this.expandedTooltipData.totalCount=e.length,this.expandedTooltipData.value=["Diastolic: "+t.diastolic,"Systolic: "+t.systolic],this.expandedTooltipData.links=e.map(t=>({href:`${this.router.url}/measurement-details/${t.id}/blood-pressure`,displayName:new l.e(this.locale).transform(t.measurement_date,"short")}))}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(i.e),o.Ob(i.a),o.Ob(h),o.Ob(o.u),o.Ob(f.a))},t.\u0275cmp=o.Ib({type:t,selectors:[["ng-component"]],features:[o.xb],decls:12,vars:16,consts:[[3,"limit","allowQueryParams","patientId","showPagination",4,"appRolesAccess"],["nzText","Patient measurements","nzOrientation","left",1,"large"],[3,"data","displayColumns","totalCount","isLoading$","queryParamsChange"],[3,"ngClass","title",4,"ngFor","ngForOf"],["nzText","Relating of measurements to the World Health Organization blood pressure standards","nzOrientation","left",1,"large"],[1,"chart"],[1,"chart__wrapper"],[1,"chart__container"],["annotationType","bpStandartsAnnotation",3,"data","options","height","isLoading","pointIsClickable","expandedTooltipData","chartPointClickEvt"],[1,"chart__aside"],[4,"ngFor","ngForOf"],[3,"limit","allowQueryParams","patientId","showPagination"],[3,"ngClass","title"],["type","bloodPressure",3,"data",4,"ngIf"],["type","heartSpectrum",3,"data",4,"ngIf"],[4,"ngIf"],[1,"table-cell__actions"],["nz-button","","nzType","link","nzSize","small",3,"routerLink","state",4,"ngIf"],["type","bloodPressure",3,"data"],["type","heartSpectrum",3,"data"],["nz-button","","nzType","link","nzSize","small",3,"routerLink","state"],[1,"chart__tag"],[1,"end"]],template:function(t,e){1&t&&(o.Fc(0,H,1,4,"app-patient-log-records",0),o.Pb(1,"nz-divider",1),o.Ub(2,"app-table-wrapper",2),o.bc("queryParamsChange",function(t){return e.onQueryParamsChange(t)}),o.Fc(3,E,26,21,"tr",3),o.Tb(),o.Pb(4,"nz-divider",4),o.Ub(5,"div",5),o.Ub(6,"div",6),o.Ub(7,"div",7),o.Ub(8,"app-chart",8),o.bc("chartPointClickEvt",function(t){return e.onChartPointClickEvt(t)}),o.fc(9,"async"),o.Tb(),o.Ub(10,"div",9),o.Fc(11,R,6,4,"div",10),o.Tb(),o.Tb(),o.Tb(),o.Tb()),2&t&&(o.mc("appRolesAccess",o.oc(15,Q)),o.Ab(2),o.mc("data",e.items)("displayColumns",e.displayColumns)("totalCount",e.totalCount)("isLoading$",e.isLoading$.asObservable()),o.Ab(1),o.mc("ngForOf",e.items),o.Ab(5),o.mc("data",e.chartConfig.chart.data)("options",e.chartConfig.chart.options)("height",400)("isLoading",o.gc(9,13,e.isLoading$))("pointIsClickable",!0)("expandedTooltipData",e.expandedTooltipData),o.Ab(3),o.mc("ngForOf",e.chartConfig.aside))},directives:[g.a,y.a,_.a,l.n,C.a,v.a,x.i,l.m,x.b,l.o,w.a,T.a,i.g,P.a,I.a],pipes:[l.b,l.e],styles:[".chart[_ngcontent-%COMP%]{display:flex;margin-top:32px}.chart__wrapper[_ngcontent-%COMP%]{display:inline-block;max-width:1280px;width:calc(100% - 48px)}.chart__container[_ngcontent-%COMP%]{display:grid;grid-template-columns:70% 265px;gap:16px}.chart__aside[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:4px}.chart__aside[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:grid;grid-template-columns:40px 1fr 1fr;gap:8px;align-items:center;margin-bottom:8px}.chart__aside[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;white-space:nowrap}.chart__aside[_ngcontent-%COMP%]   p.end[_ngcontent-%COMP%]{justify-self:end}.chart__tag[_ngcontent-%COMP%]{width:0;height:0;border:8px solid}"]}),t})()}];let K=(()=>{class t{}return t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({factory:function(e){return new(e||t)},imports:[[i.h.forChild(B)],i.h]}),t})();var V=a("Crpy");let X=(()=>{class t{}return t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({factory:function(e){return new(e||t)},imports:[[n.a,K,p,V.a]]}),t})()}}]);