(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{jT8Y:function(e,t,n){"use strict";n.r(t),n.d(t,"OrphanMeasurementsModule",function(){return F});var i=n("PCNd"),s=n("tyNb"),a=n("xlym"),c=n("eIep"),r=n("1G5W"),o=n("Pj3g"),b=n("mCNh"),u=n("fXoL"),m=n("ILvI"),d=n("o5fV");let l=(()=>{class e{}return e.\u0275mod=u.Mb({type:e}),e.\u0275inj=u.Lb({factory:function(t){return new(t||e)}}),e})(),p=(()=>{class e extends d.a{constructor(){super()}getOrphanMeasurements(e){return this.getItems(e,m.w)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=u.Kb({token:e,factory:e.\u0275fac,providedIn:l}),e})();var h=n("h5VU"),f=n("jPNr"),g=n("1ReC"),T=n("ofXK"),y=n("rMZv"),v=n("OzZK"),C=n("C2AL"),I=n("Nqz0"),U=n("FwiY"),z=n("Q8cG");function A(e,t){if(1&e&&(u.Ub(0,"td"),u.Hc(1),u.Tb()),2&e){const e=u.ec().$implicit;u.Ab(1),u.Ic(e.weight)}}function M(e,t){if(1&e&&(u.Ub(0,"td"),u.Hc(1),u.Tb()),2&e){const e=u.ec().$implicit;u.Ab(1),u.Ic(e.spo2)}}function w(e,t){if(1&e&&(u.Ub(0,"td"),u.Hc(1),u.Tb()),2&e){const e=u.ec().$implicit;u.Ab(1),u.Ic(e.blood_glucose)}}function H(e,t){if(1&e&&(u.Ub(0,"td"),u.Hc(1),u.Tb()),2&e){const e=u.ec().$implicit;u.Ab(1),u.Ic(e.temperature)}}const _=function(e){return{"test-measurement":e}};function P(e,t){if(1&e){const e=u.Vb();u.Ub(0,"tr",4),u.Ub(1,"td"),u.Hc(2),u.fc(3,"date"),u.Tb(),u.Ub(4,"td"),u.Hc(5),u.Tb(),u.Ub(6,"td"),u.Hc(7),u.Tb(),u.Ub(8,"td"),u.Hc(9),u.Tb(),u.Ub(10,"td"),u.Hc(11),u.Tb(),u.Ub(12,"td"),u.Hc(13),u.Tb(),u.Ub(14,"td"),u.Hc(15),u.Tb(),u.Ub(16,"td"),u.Hc(17),u.Tb(),u.Ub(18,"td"),u.Hc(19),u.Tb(),u.Fc(20,A,2,1,"td",5),u.Fc(21,M,2,1,"td",5),u.Fc(22,w,2,1,"td",5),u.Fc(23,H,2,1,"td",5),u.Ub(24,"td",6),u.Ub(25,"div"),u.Ub(26,"button",7),u.bc("click",function(e){return e.stopPropagation()}),u.Pb(27,"i",8),u.Tb(),u.Ub(28,"nz-dropdown-menu",null,9),u.Ub(30,"ul",10),u.Ub(31,"button",11),u.bc("click",function(){u.vc(e);const n=t.$implicit;return u.ec().onAssociateClick(n)}),u.Ub(32,"div",12),u.Pb(33,"i",13),u.Ub(34,"span"),u.Hc(35,"Associate with patient"),u.Tb(),u.Tb(),u.Tb(),u.Ub(36,"button",11),u.bc("click",function(){u.vc(e);const n=t.$implicit;return u.ec().onCreatePatientClick(n)}),u.Ub(37,"div",12),u.Pb(38,"i",14),u.Ub(39,"span"),u.Hc(40,"Create patient"),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb()}if(2&e){const e=t.$implicit,n=u.uc(29),i=u.ec();u.mc("ngClass",u.pc(19,_,e.test))("title",e.test?"Test measurement":""),u.Ab(2),u.Ic(u.hc(3,16,e.measurement_date,"short")),u.Ab(3),u.Ic(e.device.device_id),u.Ab(2),u.Ic(e.device.serial_number),u.Ab(2),u.Ic(e.systolic),u.Ab(2),u.Ic(e.diastolic),u.Ab(2),u.Ic(e.pulse),u.Ab(2),u.Ic(e.heartbeat_zone_frequency),u.Ab(2),u.Ic(e.valve_zone_frequency),u.Ab(2),u.Ic(e.cardiovascular_zone_frequency),u.Ab(1),u.mc("ngIf",!i.extraMeasurementsHidden.weight),u.Ab(1),u.mc("ngIf",!i.extraMeasurementsHidden.spo2),u.Ab(1),u.mc("ngIf",!i.extraMeasurementsHidden.blood_glucose),u.Ab(1),u.mc("ngIf",!i.extraMeasurementsHidden.temperature),u.Ab(3),u.mc("nzDropdownMenu",n)}}const O=[{path:"",component:(()=>{class e extends o.a{constructor(e,t){super(),this.orphanMeasurementsService=e,this.orphanDataService=t,this.displayColumns=[{name:"Measurement date",filterKey:"date",customFilter:"date",sort:!0,filter:!0,visible:!1},{name:"Device ID",filterKey:"device_id",customFilter:"search",sort:!0,filter:!0,visible:!1},{name:"Device serial number",filterKey:"serial_number",customFilter:"search",sort:!0,filter:!0,visible:!1},{name:"Systolic"},{name:"Diastolic"},{name:"Pulse"},{name:"I_1"},{name:"I_2"},{name:"I_3"},{name:a.a.weight,hidden:!0},{name:a.a.spo2,hidden:!0},{name:a.a.blood_glucose,hidden:!0},{name:a.a.temperature,hidden:!0},{name:""}],this.extraMeasurementsHidden={}}addColumns(){Object.keys(a.a).filter(e=>"blood_pressure_metrics"!==e).forEach(e=>{const t=!this.items.some(t=>t[e]);this.extraMeasurementsHidden[e]=t,this.displayColumns.find(t=>t.name===a.a[e]).hidden=t})}get measurementPipe(){return Object(b.a)(Object(c.a)(()=>this.getOrphanMeasurements()))}getOrphanMeasurements(e=this.params){return this.getItems(this.orphanMeasurementsService.getOrphanMeasurements(e)).pipe(Object(r.a)(this.destroyed))}onQueryParamsChange(e){this.params=e,this.getOrphanMeasurements().subscribe(()=>this.addColumns())}onAssociateClick(e){this.orphanDataService.openAssociateModal(e).pipe(this.measurementPipe).subscribe()}onCreatePatientClick(e){this.orphanDataService.createPatient(e).pipe(this.measurementPipe).subscribe()}}return e.\u0275fac=function(t){return new(t||e)(u.Ob(p),u.Ob(h.a))},e.\u0275cmp=u.Ib({type:e,selectors:[["ng-component"]],features:[u.xb],decls:4,vars:5,consts:[[1,"panel"],["nzTitle","Orphan measurements",1,"page-header"],[3,"data","displayColumns","totalCount","isLoading$","queryParamsChange"],[3,"ngClass","title",4,"ngFor","ngForOf"],[3,"ngClass","title"],[4,"ngIf"],[1,"table-cell__actions"],["nz-button","","nzType","link","nzTrigger","click","nz-dropdown","",3,"nzDropdownMenu","click"],["nz-icon","","nzType","icon:more","nzTheme","outline"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",1,"btn--menu-item",3,"click"],[1,"ant-btn-sm","ant-btn-link","ant-btn"],["nz-icon","","nzType","node-index","nzTheme","outline"],["nz-icon","","nzType","user-add","nzTheme","outline"]],template:function(e,t){1&e&&(u.Ub(0,"div",0),u.Pb(1,"nz-page-header",1),u.Ub(2,"app-table-wrapper",2),u.bc("queryParamsChange",function(e){return t.onQueryParamsChange(e)}),u.Fc(3,P,41,21,"tr",3),u.Tb(),u.Tb()),2&e&&(u.Ab(2),u.mc("data",t.items)("displayColumns",t.displayColumns)("totalCount",t.totalCount)("isLoading$",t.isLoading$.asObservable()),u.Ab(1),u.mc("ngForOf",t.items))},directives:[f.a,g.a,T.n,y.i,T.m,y.b,T.o,v.a,C.a,I.d,I.b,U.a,I.e,z.c,z.d],pipes:[T.e],encapsulation:2}),e})()}];let k=(()=>{class e{}return e.\u0275mod=u.Mb({type:e}),e.\u0275inj=u.Lb({factory:function(t){return new(t||e)},imports:[[s.h.forChild(O)],s.h]}),e})(),F=(()=>{class e{}return e.\u0275mod=u.Mb({type:e}),e.\u0275inj=u.Lb({factory:function(t){return new(t||e)},imports:[[i.a,k,l]]}),e})()}}]);