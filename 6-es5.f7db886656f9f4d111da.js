!function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=c(t);if(e){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return i(this,n)}}function i(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{Crpy:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("PCNd"),o=n("FZeK"),i=n("tyNb"),c=n("fXoL"),s=function(){var t=function t(){a(this,t)};return t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({factory:function(e){return new(e||t)},imports:[[r.a,o.a,i.h]]}),t}()},FZeK:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("fXoL"),o=function(){var t=function t(){a(this,t)};return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)}}),t}()},KebF:function(t,r,i){"use strict";i.d(r,"a",function(){return B});var c,s=i("Pj3g"),u=i("mCNh"),l=i("1G5W"),f=i("eIep"),d=i("fXoL"),p=i("ILvI"),b=i("o5fV"),m=i("3Pt+"),v=i("pfyX"),h=i("vxZU"),g=i("FZeK"),y=((c=function(t){n(i,t);var r=o(i);function i(){return a(this,i),r.call(this)}return e(i,[{key:"edit",value:function(t,e){return this.editItemRequest(e,"Record updated successfully",Object(p.z)(t))}},{key:"create",value:function(t,e){return this.createItemRequest(e,"Record created successfully",Object(p.z)(t))}}]),i}(h.a)).\u0275fac=function(t){return new(t||c)},c.\u0275prov=d.Kb({token:c,factory:c.\u0275fac,providedIn:g.a}),c),z=i("dEAy"),k=i("ocnv"),w=i("B+r4"),T=i("0lU3"),C=i("PTRe"),O=i("VdD3"),I=i("ofXK");function P(t,e){1&t&&(d.Sb(0),d.Hc(1," This field is required "),d.Rb())}function R(t,e){if(1&t&&(d.Sb(0),d.Hc(1),d.Rb()),2&t){var n=d.ec().$implicit;d.Ab(1),d.Jc(" ",n.errors.validationError," ")}}function E(t,e){if(1&t&&(d.Fc(0,P,2,0,"ng-container",11),d.Fc(1,R,2,1,"ng-container",11)),2&t){var n=e.$implicit;d.mc("ngIf",n.hasError("required")),d.Ab(1),d.mc("ngIf",n.hasError("validationError"))}}var L,A,S=function(){return{nzFormat:"hh:mm a"}},_=((A=function(t){n(i,t);var r=o(i);function i(t,e){var n;return a(this,i),(n=r.call(this,t)).crudPatientLogRecordsService=e,n.form=new m.h({duration:new m.e(null,[m.s.required]),note:new m.e("",[m.s.required]),creation_date:new m.e(null,[m.s.required])}),n}return e(i,[{key:"onSaveClick",value:function(t){var e,n=null===(e=this.record)||void 0===e?void 0:e.id,r=this.form.value,o=n?this.crudPatientLogRecordsService.edit(this.patientId,Object.assign(Object.assign({},r),{record_id:n})):this.crudPatientLogRecordsService.create(this.patientId,r);this.saveItem(t,o)}},{key:"ngOnInit",value:function(){if(this.record)for(var t in this.record)if(this.record[t]&&Object.prototype.hasOwnProperty.call(this.f,t)){if("creation_date"===t){this.f[t].patchValue(new Date(this.record[t]),{emitEvent:!1});continue}this.f[t].patchValue(this.record[t],{emitEvent:!1})}this.formInitValue=this.form.getRawValue()}}]),i}(v.a)).\u0275fac=function(t){return new(t||A)(d.Ob(z.c),d.Ob(y))},A.\u0275cmp=d.Ib({type:A,selectors:[["ng-component"]],features:[d.zb([y]),d.xb],decls:19,vars:13,consts:[["nz-form","",1,"form",3,"formGroup"],[1,"form__item"],["nzRequired","",3,"nzSpan"],[3,"nzErrorTip"],["nzFormat","dd/MM/yyyy hh:mm a","formControlName","creation_date",3,"nzShowTime"],["nzExtra","in minutes",3,"nzErrorTip"],["nz-input","","formControlName","duration","autocomplete","","type","number"],[1,"form__item","form__item--textarea"],["formControlName","note","nz-input","","rows","3"],[3,"processing","processingClose","isEditing","formValid","saveEvent","closeEvent"],["errorTpl",""],[4,"ngIf"]],template:function(t,e){if(1&t&&(d.Ub(0,"form",0),d.Ub(1,"nz-form-item",1),d.Ub(2,"nz-form-label",2),d.Hc(3,"Date"),d.Tb(),d.Ub(4,"nz-form-control",3),d.Pb(5,"nz-date-picker",4),d.Tb(),d.Tb(),d.Ub(6,"nz-form-item",1),d.Ub(7,"nz-form-label",2),d.Hc(8,"Duration"),d.Tb(),d.Ub(9,"nz-form-control",5),d.Pb(10,"input",6),d.Tb(),d.Tb(),d.Ub(11,"nz-form-item",7),d.Ub(12,"nz-form-label",2),d.Hc(13,"Note"),d.Tb(),d.Ub(14,"nz-form-control",3),d.Pb(15,"textarea",8),d.Tb(),d.Tb(),d.Tb(),d.Ub(16,"app-modal-footer",9),d.bc("saveEvent",function(t){return e.onSaveClick(t)})("closeEvent",function(){return e.closeModal()}),d.Tb(),d.Fc(17,E,2,2,"ng-template",null,10,d.Gc)),2&t){var n=d.uc(18);d.mc("formGroup",e.form),d.Ab(2),d.mc("nzSpan",4),d.Ab(2),d.mc("nzErrorTip",n),d.Ab(1),d.mc("nzShowTime",d.oc(12,S)),d.Ab(2),d.mc("nzSpan",4),d.Ab(2),d.mc("nzErrorTip",n),d.Ab(3),d.mc("nzSpan",4),d.Ab(2),d.mc("nzErrorTip",n),d.Ab(2),d.mc("processing",e.processing)("processingClose",e.processingClose)("isEditing",!(null==e.record||!e.record.id))("formValid",e.form.valid)}},directives:[m.t,m.o,k.b,m.i,w.c,k.c,w.a,k.d,k.a,T.b,m.n,m.g,C.b,m.d,m.q,O.a,I.o],encapsulation:2}),A),j=((L=function(t){n(i,t);var r=o(i);function i(){return a(this,i),r.call(this)}return e(i,[{key:"getPatientLog",value:function(t,e){return this.getItems(e,Object(p.z)(t))}},{key:"addRecord",value:function(t){return this.openModal("Add new note",{patientId:t},_)}},{key:"editRecord",value:function(t,e){return this.openModal("Edit note",{patientId:t,record:e},_)}}]),i}(b.a)).\u0275fac=function(t){return new(t||L)},L.\u0275prov=d.Kb({token:L,factory:L.\u0275fac,providedIn:g.a}),L),U=i("eFim"),F=i("5vDB"),V=i("HZS1"),x=i("1ReC"),M=i("OzZK"),D=i("RwU8"),H=i("C2AL"),N=i("tyNb"),q=i("rMZv"),G=i("FwiY");function $(t,e){if(1&t){var n=d.Vb();d.Ub(0,"button",7),d.bc("click",function(){return d.vc(n),d.ec().addNewRecord()}),d.Hc(1,"Add note"),d.Tb()}}function K(t,e){1&t&&(d.Ub(0,"a",8),d.Hc(1,"All notes"),d.Tb())}function X(t,e){if(1&t){var n=d.Vb();d.Ub(0,"tr"),d.Ub(1,"td",9),d.Hc(2),d.fc(3,"date"),d.Tb(),d.Ub(4,"td",9),d.Hc(5),d.Tb(),d.Ub(6,"td"),d.Hc(7),d.Tb(),d.Ub(8,"td",10),d.Ub(9,"button",11),d.bc("click",function(){d.vc(n);var t=e.$implicit;return d.ec().onEditClick(t)}),d.Ub(10,"div",12),d.Pb(11,"i",13),d.Ub(12,"span"),d.Hc(13,"Edit"),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Tb()}if(2&t){var r=e.$implicit;d.Ab(2),d.Ic(d.hc(3,3,r.creation_date,"short")),d.Ab(3),d.Ic(r.duration),d.Ab(2),d.Ic(r.note)}}var Z,Q=function(){return["doctor"]},B=((Z=function(t){n(i,t);var r=o(i);function i(t,e){var n;return a(this,i),(n=r.call(this)).patientLogRecordsService=t,n.timeTrackerService=e,n.allowQueryParams=!0,n.showAllBtn=!0,n.showPagination=!0,n.patientLogRecordsDisplayedColumns=[{name:"Date"},{name:"Duration"},{name:"Note"},{name:""}],n}return e(i,[{key:"getPatientLogRecords",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params;return this.limit&&(this.params.limit=this.limit),this.getItems(this.patientLogRecordsService.getPatientLog(this.patientId,t)).pipe(Object(l.a)(this.destroyed))}},{key:"onQueryParamsChange",value:function(t){this.params=t,this.getPatientLogRecords().subscribe()}},{key:"onEditClick",value:function(t){this.patientLogRecordsService.editRecord(this.patientId,t).pipe(this.patientLogRecordsPipe).subscribe()}},{key:"addNewRecord",value:function(){this.patientLogRecordsService.addRecord(this.patientId).pipe(this.patientLogRecordsPipe).subscribe()}},{key:"ngOnInit",value:function(){this.timeTrackerService.newDataTracking$.pipe(this.patientLogRecordsPipe,Object(l.a)(this.destroyed)).subscribe()}},{key:"patientLogRecordsPipe",get:function(){var t=this;return Object(u.a)(Object(f.a)(function(){return t.getPatientLogRecords()}))}}]),i}(s.a)).\u0275fac=function(t){return new(t||Z)(d.Ob(j),d.Ob(U.a))},Z.\u0275cmp=d.Ib({type:Z,selectors:[["app-patient-log-records"]],inputs:{limit:"limit",allowQueryParams:"allowQueryParams",showAllBtn:"showAllBtn",showPagination:"showPagination",patientId:"patientId"},features:[d.xb],decls:7,vars:11,consts:[["nzText","Patient log","nzOrientation","left",1,"large"],[1,"patient-log-records"],[1,"patient-log-records__actions"],["nz-button","","nzType","primary","class","patient-log-records__btn",3,"click",4,"appRolesAccess"],["nz-button","","nzType","link","class","patient-log-records__btn","routerLink","./patient-log-records","skipLocationChange","",4,"ngIf"],[3,"data","totalCount","isLoading$","pageIndex$","allowQueryParams","nzShowPagination","displayColumns","queryParamsChange"],[4,"ngFor","ngForOf"],["nz-button","","nzType","primary",1,"patient-log-records__btn",3,"click"],["nz-button","","nzType","link","routerLink","./patient-log-records","skipLocationChange","",1,"patient-log-records__btn"],[1,"table-cell__small"],[1,"table-cell__actions"],[1,"btn--menu-item",3,"click"],[1,"ant-btn-sm","ant-btn-link","ant-btn"],["nz-icon","","nzType","edit","nzTheme","outline"]],template:function(t,e){1&t&&(d.Pb(0,"nz-divider",0),d.Ub(1,"div",1),d.Ub(2,"div",2),d.Fc(3,$,2,0,"button",3),d.Fc(4,K,2,0,"a",4),d.Tb(),d.Ub(5,"app-table-wrapper",5),d.bc("queryParamsChange",function(t){return e.onQueryParamsChange(t)}),d.Fc(6,X,14,6,"tr",6),d.Tb(),d.Tb()),2&t&&(d.Ab(3),d.mc("appRolesAccess",d.oc(10,Q)),d.Ab(1),d.mc("ngIf",e.showAllBtn),d.Ab(1),d.mc("data",e.items)("totalCount",e.totalCount)("isLoading$",e.isLoading$.asObservable())("pageIndex$",e.pageIndex$)("allowQueryParams",e.allowQueryParams)("nzShowPagination",e.showPagination)("displayColumns",e.patientLogRecordsDisplayedColumns),d.Ab(1),d.mc("ngForOf",e.items))},directives:[F.a,V.a,I.o,x.a,I.n,M.a,D.a,H.a,N.g,q.i,q.b,G.a],pipes:[I.e],styles:[".patient-log-records__actions[_ngcontent-%COMP%]{display:flex;margin-bottom:1em}.patient-log-records__btn[_ngcontent-%COMP%]{margin-right:.5em}"]}),Z)},VdD3:function(t,n,r){"use strict";r.d(n,"a",function(){return b});var o=r("fXoL"),i=r("dEAy"),c=r("OzZK"),s=r("RwU8"),u=r("C2AL"),l=r("ofXK");function f(t,e){if(1&t){var n=o.Vb();o.Ub(0,"button",5),o.bc("click",function(){return o.vc(n),o.ec(2).onSaveClick(!1)}),o.Hc(1,"Save & Add another"),o.Tb()}if(2&t){var r=o.ec(2);o.mc("disabled",!r.formValid)("nzLoading",r.processing&&!r.processingClose)}}function d(t,e){1&t&&(o.Ub(0,"span"),o.Hc(1,"\xa0& Close"),o.Tb())}function p(t,e){if(1&t){var n=o.Vb();o.Sb(0),o.Ub(1,"button",1),o.bc("click",function(){return o.vc(n),o.ec().closeModal()}),o.Hc(2,"Cancel"),o.Tb(),o.Fc(3,f,2,2,"button",2),o.Ub(4,"button",3),o.bc("click",function(){return o.vc(n),o.ec().onSaveClick(!0)}),o.Hc(5,"Save"),o.Fc(6,d,2,0,"span",4),o.Tb(),o.Rb()}if(2&t){var r=o.ec();o.Ab(3),o.mc("ngIf",!r.isEditing),o.Ab(1),o.mc("disabled",!r.formValid)("nzLoading",r.processing&&r.processingClose),o.Ab(2),o.mc("ngIf",!r.isEditing)}}var b=function(){var t=function(){function t(){a(this,t),this.saveEvent=new o.n,this.closeEvent=new o.n,this.formValid=!0}return e(t,[{key:"closeModal",value:function(){this.closeEvent.emit()}},{key:"onSaveClick",value:function(t){this.saveEvent.emit(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Ib({type:t,selectors:[["app-modal-footer"]],inputs:{processing:"processing",processingClose:"processingClose",formValid:"formValid",isEditing:"isEditing"},outputs:{saveEvent:"saveEvent",closeEvent:"closeEvent"},decls:1,vars:0,consts:[[4,"nzModalFooter"],["nz-button","",3,"click"],["nz-button","","nzType","default",3,"disabled","nzLoading","click",4,"ngIf"],["nz-button","","nzType","primary",3,"disabled","nzLoading","click"],[4,"ngIf"],["nz-button","","nzType","default",3,"disabled","nzLoading","click"]],template:function(t,e){1&t&&o.Fc(0,p,7,4,"ng-container",0)},directives:[i.a,c.a,s.a,u.a,l.o],encapsulation:2}),t}()},o5fV:function(t,n,r){"use strict";r.d(n,"a",function(){return m});var o,i=r("mrSG"),c=r("sbGu"),s=r("dEAy"),u=r("CvgI"),l=r("tk/3"),f=r("lJxs"),d=r("pLZG"),p=r("fXoL"),b=((o=function t(e){a(this,t),this.modal=e,this.modal.updateConfig({nzWrapClassName:"vertical-center-modal",nzMaskClosable:!0,nzAutofocus:null,nzOkType:"danger",nzOkText:"Delete",nzClosable:!1})}).\u0275fac=function(t){return new(t||o)(p.Ob(s.c))},o.\u0275cmp=p.Ib({type:o,selectors:[["ng-component"]],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),o),m=function(){function t(){a(this,t);var e=c.a.getInjector;this.http=e.get(l.c),this.modalService=e.get(s.d)}return e(t,[{key:"getItems",value:function(t,e,n){var r=Object(u.a)(t),o=Object.assign({params:r},n);return this.http.get(e,Object.assign({},o)).pipe(Object(f.a)(function(t){return t}))}},{key:"openModal",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;return this.modalService.create(Object.assign(Object.assign({},r&&{nzWrapClassName:"vertical-center-modal"}),{nzTitle:t,nzWidth:o+"px",nzContent:n,nzComponentParams:Object.assign({},e)})).afterClose.pipe(Object(d.a)(function(t){return t}))}},{key:"openActionConfirmationModal",value:function(t,e){return this.modalService.confirm({nzContent:e,nzTitle:t,nzOnOk:function(){return!0}}).afterClose.pipe(Object(d.a)(function(t){return t}))}},{key:"deleteItem",value:function(t,e){var n=this;return this.modalService.confirm({nzContent:b,nzTitle:t,nzOnOk:function(t){return Object(i.a)(n,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.modal.config.nzOkLoading=!0,n.next=3,this.deleteItemRequest(e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}},n,this)}))}}).afterClose.pipe(Object(d.a)(function(t){return t}))}},{key:"deleteItemRequest",value:function(t){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.delete(t).toPromise().then(function(t){return"success"===t.status});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}))}}]),t}()},pfyX:function(t,r,i){"use strict";i.d(r,"a",function(){return m});var c=i("oaey"),s=i("sbGu"),u=i("lhsU"),l=i("3Pt+"),f=i("1G5W"),d=i("nYR2"),p=i("2Vo4"),b=i("bNXi"),m=function(t){n(i,t);var r=o(i);function i(t){var e;a(this,i),(e=r.call(this)).modal=t,e.loadOptions$=new p.a(null),e.updateAfterClosing=!1;var n=s.a.getInjector;return e.errorService=n.get(u.a),e.notifService=n.get(b.b),e}return e(i,[{key:"closeModal",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.updateAfterClosing;this.modal.destroy(t)}},{key:"saveItem",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.processing=!0,this.processingClose=t,this.form&&(this.markFormGroupTouched(this.form),this.errorService.form=this.form),e.pipe(Object(f.a)(this.destroyed),Object(d.a)(function(){return n.processing=!1})).subscribe(function(){r&&n.notifService.success(r,""),t?n.closeModal(!0):(n.form&&n.form.reset(n.formInitialValue),n.updateAfterClosing=!0)})}},{key:"onItemSelected",value:function(t,e,n){n.push(t),e.patchValue(null,{emitEvent:!1})}},{key:"onDeleteItemClick",value:function(t,e){this[e]=this[e].filter(function(e){return e.id!==t})}},{key:"markFormGroupTouched",value:function(t){var e=this;Object.values(t.controls).forEach(function(t){t.markAsTouched(),t instanceof l.h&&e.markFormGroupTouched(t)})}},{key:"f",get:function(){return this.form.controls}},{key:"formInitValue",set:function(t){this.formInitialValue=Object.assign({},t)}}]),i}(c.a)}}])}();