!function(){function t(n,e){return(t=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(n,e)}function n(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var o,i=r(t);if(n){var c=r(this).constructor;o=Reflect.construct(i,arguments,c)}else o=i.apply(this,arguments);return e(this,o)}}function e(t,n){return!n||"object"!=typeof n&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function i(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,n,e){return n&&i(t.prototype,n),e&&i(t,e),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{FfMZ:function(e,r,i){"use strict";i.r(r),i.d(r,"PasswordSettingModule",function(){return tt});var a,s,u,f=i("PCNd"),p=i("tyNb"),l=i("3Pt+"),b=i("oaey"),d=i("PqYM"),m=i("1G5W"),g=i("nYR2"),w=i("fXoL"),h=((a=function(){function t(){o(this,t)}return c(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||a)},a.\u0275cmp=w.Ib({type:a,selectors:[["ng-component"]],decls:2,vars:0,template:function(t,n){1&t&&(w.Ub(0,"div"),w.Hc(1,"Logging out..."),w.Tb())},styles:["div[_ngcontent-%COMP%] {\n      padding-bottom: 24px;\n      text-align: center;\n    }"]}),a),v=i("lhsU"),y=i("ILvI"),_=((s=function t(){o(this,t)}).\u0275mod=w.Mb({type:s}),s.\u0275inj=w.Lb({factory:function(t){return new(t||s)}}),s),O=i("tk/3"),P=((u=function(){function t(n){o(this,t),this.http=n}return c(t,[{key:"setPassword",value:function(t,n){return this.http.post(y.a,{password:t,identifier:n})}}]),t}()).\u0275fac=function(t){return new(t||u)(w.Yb(O.c))},u.\u0275prov=w.Kb({token:u,factory:u.\u0275fac,providedIn:_}),u),T=i("dEAy"),z=i("qXBG"),C=i("yW9e"),S=i("ofXK"),M=i("eHCX"),U=i("ocnv"),F=i("B+r4"),x=i("C2AL"),j=i("PTRe"),L=i("OzZK"),I=i("RwU8");function k(t,n){1&t&&(w.Ub(0,"div",7),w.Ub(1,"h1"),w.Hc(2,"Welcome to OSTAR portal"),w.Tb(),w.Ub(3,"p",8),w.Hc(4,"Please set a password to activate your account"),w.Tb(),w.Tb())}function E(t,n){}function R(t,n){1&t&&w.Fc(0,E,0,0,"ng-template")}var A=function(t){return{$implicit:t}};function H(t,n){if(1&t&&w.Fc(0,R,1,0,void 0,18),2&t){var e=n.$implicit;w.ec(2);var r=w.uc(7);w.mc("ngTemplateOutlet",r)("ngTemplateOutletContext",w.pc(2,A,e))}}function V(t,n){1&t&&(w.Sb(0),w.Hc(1," Passwords do not match "),w.Rb())}function q(t,n){}function G(t,n){1&t&&w.Fc(0,q,0,0,"ng-template")}function N(t,n){if(1&t&&(w.Fc(0,V,2,0,"ng-container",19),w.Fc(1,G,1,0,void 0,18)),2&t){var e=n.$implicit;w.ec(2);var r=w.uc(7);w.mc("ngIf",e.hasError("passwordNotMatch")&&!e.hasError("required")),w.Ab(1),w.mc("ngTemplateOutlet",r)("ngTemplateOutletContext",w.pc(3,A,e))}}function Y(t,n){if(1&t){var e=w.Vb();w.Ub(0,"form",9),w.bc("ngSubmit",function(){return w.vc(e),w.ec().submitForm()}),w.Ub(1,"nz-form-item"),w.Ub(2,"nz-form-label"),w.Hc(3,"Password"),w.Tb(),w.Ub(4,"nz-form-control",10),w.Ub(5,"nz-input-group",11),w.Pb(6,"input",12),w.Fc(7,H,1,4,"ng-template",null,13,w.Gc),w.Tb(),w.Tb(),w.Tb(),w.Ub(9,"nz-form-item"),w.Ub(10,"nz-form-label"),w.Hc(11,"Confirm password"),w.Tb(),w.Ub(12,"nz-form-control",14),w.Ub(13,"nz-input-group",11),w.Ub(14,"input",15),w.bc("blur",function(){return w.vc(e),w.ec().confirmationPasswordUpdateValidity()}),w.Tb(),w.Fc(15,N,2,5,"ng-template",null,16,w.Gc),w.Tb(),w.Tb(),w.Tb(),w.Ub(17,"button",17),w.Hc(18,"Continue"),w.Tb(),w.Tb()}if(2&t){var r=w.uc(8),o=w.uc(16),i=w.ec();w.mc("formGroup",i.pwSettingForm),w.Ab(4),w.mc("nzErrorTip",r),w.Ab(8),w.mc("nzErrorTip",o),w.Ab(5),w.mc("nzType","primary")("disabled",!i.pwSettingForm.valid)("nzLoading",i.isLoading)}}function $(t,n){if(1&t&&(w.Ub(0,"div",20),w.Ub(1,"p"),w.Hc(2),w.Tb(),w.Ub(3,"p"),w.Hc(4," If you are not redirected, please select this "),w.Ub(5,"a",21),w.Hc(6,"here"),w.Tb(),w.Hc(7,". "),w.Tb(),w.Tb()),2&t){var e=w.ec();w.Ab(2),w.Jc(" Your account confirmed successfully. You will be automatically redirected to the login page in ",e.timeLeft," seconds. ")}}function J(t,n){1&t&&(w.Sb(0),w.Hc(1," This field is required "),w.Rb())}function W(t,n){if(1&t&&(w.Sb(0),w.Hc(1),w.Rb()),2&t){var e=w.ec().$implicit;w.Ab(1),w.Jc(" ",e.errors.validationError," ")}}function X(t,n){if(1&t&&(w.Fc(0,J,2,0,"ng-container",19),w.Fc(1,W,2,1,"ng-container",19)),2&t){var e=n.$implicit;w.mc("ngIf",e.hasError("required")),w.Ab(1),w.mc("ngIf",e.hasError("validationError"))}}var K,B,D,Z=[{path:"",component:(K=function(e){!function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&t(n,e)}(i,e);var r=n(i);function i(t,n,e,c,a,s){var u;return o(this,i),(u=r.call(this)).activatedRoute=t,u.errorService=n,u.passwordSettingService=e,u.router=c,u.modalService=a,u.authService=s,u.isLoading=!1,u.timeLeft=0,u}return c(i,[{key:"startTimer",value:function(){var t=this,n=Object(d.a)(0,1e3).pipe(Object(m.a)(this.destroyed)).subscribe(function(e){t.timeLeft=5-e,t.timeLeft||(n.unsubscribe(),t.router.navigate(["/login"],{state:{currentUserObjectExist:!0}}))})}},{key:"submitForm",value:function(){var t=this;this.errorService.form=this.pwSettingForm,this.isLoading=!0,this.passwordSettingService.setPassword(this.f.password.value,this.identifier).pipe(Object(m.a)(this.destroyed),Object(g.a)(function(){return t.isLoading=!1})).subscribe(function(){t.passwordSet=!0,t.startTimer()})}},{key:"passwordMatchValidator",value:function(t){return this.f.password.value!==t.value?{passwordNotMatch:!0}:null}},{key:"confirmationPasswordUpdateValidity",value:function(){this.f.confirmationPassword.setValidators([l.s.required,this.passwordMatchValidator.bind(this)]),this.f.confirmationPassword.updateValueAndValidity()}},{key:"loggingOut",value:function(){var t=this.modalService.create({nzContent:h,nzWrapClassName:"vertical-center-modal",nzClosable:!1,nzFooter:null});this.authService.logout().pipe(Object(m.a)(this.destroyed),Object(g.a)(function(){return t.destroy()})).subscribe()}},{key:"ngOnInit",value:function(){var t=this;this.loggingOut(),this.pwSettingForm=new l.h({password:new l.e("",[l.s.required]),confirmationPassword:new l.e("",[l.s.required])}),this.identifier=this.activatedRoute.snapshot.queryParams.identifier,this.f.password.valueChanges.pipe(Object(m.a)(this.destroyed)).subscribe(function(){return t.confirmationPasswordUpdateValidity()})}},{key:"f",get:function(){return this.pwSettingForm.controls}}]),i}(b.a),K.\u0275fac=function(t){return new(t||K)(w.Ob(p.a),w.Ob(v.a),w.Ob(P),w.Ob(p.e),w.Ob(T.d),w.Ob(z.a))},K.\u0275cmp=w.Ib({type:K,selectors:[["app-password-setting"]],features:[w.xb],decls:8,vars:3,consts:[[1,"layout"],[1,"content"],[1,"pw-setting__container"],["class","pw-setting__title",4,"ngIf"],["nz-form","","nzLayout","vertical","class","pw-setting__form",3,"formGroup","ngSubmit",4,"ngIf"],["class","success-msg",4,"ngIf"],["errorValidationTpl",""],[1,"pw-setting__title"],["nz-typography","",1,"pw-setting__subtitle","pw-setting__form--mb-md"],["nz-form","","nzLayout","vertical",1,"pw-setting__form",3,"formGroup","ngSubmit"],[3,"nzErrorTip"],["nzPrefixIcon","lock","nzSize","large"],["type","password","nz-input","","formControlName","password","autocomplete","","name","password"],["passwordErrorTpl",""],[1,"pw-setting__form--mb-sm",3,"nzErrorTip"],["type","password","nz-input","","formControlName","confirmationPassword","autocomplete","","name","confirmationPassword",3,"blur"],["confirmationPasswordErrorTpl",""],["nz-button","","nzSize","large",1,"pw-setting__button",3,"nzType","disabled","nzLoading"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],[1,"success-msg"],["routerLink","/login"]],template:function(t,n){1&t&&(w.Ub(0,"nz-layout",0),w.Ub(1,"nz-content",1),w.Ub(2,"div",2),w.Fc(3,k,5,0,"div",3),w.Fc(4,Y,19,6,"form",4),w.Fc(5,$,8,1,"div",5),w.Tb(),w.Tb(),w.Tb(),w.Fc(6,X,2,2,"ng-template",null,6,w.Gc)),2&t&&(w.Ab(3),w.mc("ngIf",!n.passwordSet),w.Ab(1),w.mc("ngIf",!n.passwordSet),w.Ab(1),w.mc("ngIf",n.passwordSet))},directives:[C.d,C.a,S.o,M.a,l.t,l.o,U.b,l.i,F.c,U.c,F.a,U.d,U.a,x.a,j.c,j.b,l.d,l.n,l.g,L.a,I.a,S.t,p.g],styles:[".pw-setting__container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;flex-wrap:wrap;padding:24px}.pw-setting__container[_ngcontent-%COMP%]   nz-form-label[_ngcontent-%COMP%]{padding:0!important}.pw-setting__title[_ngcontent-%COMP%]{width:100%;margin:0 auto;text-align:center}.pw-setting__subtitle[_ngcontent-%COMP%]{font-size:1rem}.pw-setting__form[_ngcontent-%COMP%]{width:100%;max-width:36rem}.pw-setting__form--mb-md[_ngcontent-%COMP%]{margin-bottom:24px}.pw-setting__form--mb-sm[_ngcontent-%COMP%]{margin-bottom:16px}.pw-setting__button[_ngcontent-%COMP%]{width:100%}.content[_ngcontent-%COMP%]{height:100%;background:#fff;margin:24px}.success-msg[_ngcontent-%COMP%]{flex-direction:column;justify-content:center}.success-msg[_ngcontent-%COMP%], .success-msg[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;align-items:center}.success-msg[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem}.success-msg[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-left:.5em}"]}),K)}],Q=((D=function t(){o(this,t)}).\u0275mod=w.Mb({type:D}),D.\u0275inj=w.Lb({factory:function(t){return new(t||D)},imports:[[p.h.forChild(Z)],p.h]}),D),tt=((B=function t(){o(this,t)}).\u0275mod=w.Mb({type:B}),B.\u0275inj=w.Lb({factory:function(t){return new(t||B)},imports:[[f.a,Q,_]]}),B)}}])}();