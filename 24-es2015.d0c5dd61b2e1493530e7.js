(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"39Jk":function(t,e,n){"use strict";n.r(e),n.d(e,"AlertListModule",function(){return T});var i=n("PCNd"),r=n("tyNb"),s=n("Pj3g"),a=n("fXoL");let c=(()=>{class t{}return t.\u0275mod=a.Mb({type:t}),t.\u0275inj=a.Lb({factory:function(e){return new(e||t)}}),t})();var o=n("o5fV"),l=n("ILvI");let u=(()=>{class t extends o.a{constructor(){super()}getAlertList(t){return this.getItems(t,l.b)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=a.Kb({token:t,factory:t.\u0275fac,providedIn:c}),t})();var d=n("jPNr"),b=n("1ReC"),m=n("ofXK"),p=n("rMZv"),f=n("C2AL"),h=n("FwiY");function g(t,e){if(1&t&&(a.Sb(0),a.Ub(1,"a",5),a.Hc(2),a.Pb(3,"i",6),a.Tb(),a.Rb()),2&t){const t=e.ngIf;a.Ab(1),a.mc("href","/patient-details/"+t.id,a.xc),a.Ab(1),a.Lc(" ",t.first_name," ",t.middle_name," ",t.last_name," ")}}function v(t,e){if(1&t&&(a.Ub(0,"div"),a.Ub(1,"strong"),a.Hc(2,"Blood pressure:"),a.Tb(),a.Hc(3),a.Tb()),2&t){const t=a.ec().$implicit;a.Ab(3),a.Jc(" ",t.bp_alert," ")}}function y(t,e){if(1&t&&(a.Ub(0,"div"),a.Ub(1,"strong"),a.Hc(2,"Heart rate:"),a.Tb(),a.Hc(3),a.Tb()),2&t){const t=a.ec().$implicit;a.Ab(3),a.Jc(" ",t.hr_alert," ")}}function C(t,e){if(1&t&&(a.Ub(0,"div"),a.Ub(1,"strong"),a.Hc(2,"Arrhythmia:"),a.Tb(),a.Hc(3),a.Tb()),2&t){const t=a.ec().$implicit;a.Ab(3),a.Jc(" ",t.arrhythmia_alert," ")}}function A(t,e){if(1&t&&(a.Ub(0,"div"),a.Hc(1),a.Tb()),2&t){const t=a.ec().$implicit;a.Ab(1),a.Jc(" ",t.alerts," ")}}function O(t,e){if(1&t&&(a.Ub(0,"tr"),a.Ub(1,"td"),a.Hc(2),a.fc(3,"date"),a.Tb(),a.Ub(4,"td"),a.Hc(5),a.Tb(),a.Ub(6,"td"),a.Fc(7,g,4,4,"ng-container",4),a.Tb(),a.Ub(8,"td"),a.Fc(9,v,4,1,"div",4),a.Fc(10,y,4,1,"div",4),a.Fc(11,C,4,1,"div",4),a.Fc(12,A,2,1,"div",4),a.Tb(),a.Tb()),2&t){const t=e.$implicit;a.Ab(2),a.Ic(a.hc(3,7,t.measurement_date,"short")),a.Ab(3),a.Ic(null==t.device?null:t.device.device_id),a.Ab(2),a.mc("ngIf",t.patient),a.Ab(2),a.mc("ngIf",t.bp_alert),a.Ab(1),a.mc("ngIf",t.hr_alert),a.Ab(1),a.mc("ngIf",t.arrhythmia_alert),a.Ab(1),a.mc("ngIf",t.alerts)}}const I=[{path:"",component:(()=>{class t extends s.a{constructor(t){super(),this.alertListService=t,this.displayColumns=[{name:"Measurement date",filterKey:"measurement_date",customFilter:"date",sort:!0,filter:!0,visible:!1},{name:"Device ID",filterKey:"device_id",customFilter:"search",filter:!0,visible:!1},{name:"Patient",filterKey:"device_id",customFilter:"search",filter:!0,visible:!1},{name:"Alerts"}]}getAlerts(t=this.params){this.getItems(this.alertListService.getAlertList(t)).subscribe()}onQueryParamsChange(t){this.params=t,this.getAlerts(t)}}return t.\u0275fac=function(e){return new(e||t)(a.Ob(u))},t.\u0275cmp=a.Ib({type:t,selectors:[["app-alert-list"]],features:[a.xb],decls:4,vars:5,consts:[[1,"panel"],["nzTitle","Alerts",1,"page-header"],[3,"data","displayColumns","totalCount","isLoading$","queryParamsChange"],[4,"ngFor","ngForOf"],[4,"ngIf"],["target","_blank",3,"href"],["nz-icon","","nzType","icon:external-link"]],template:function(t,e){1&t&&(a.Ub(0,"div",0),a.Pb(1,"nz-page-header",1),a.Ub(2,"app-table-wrapper",2),a.bc("queryParamsChange",function(t){return e.onQueryParamsChange(t)}),a.Fc(3,O,13,10,"tr",3),a.Tb(),a.Tb()),2&t&&(a.Ab(2),a.mc("data",e.items)("displayColumns",e.displayColumns)("totalCount",e.totalCount)("isLoading$",e.isLoading$.asObservable()),a.Ab(1),a.mc("ngForOf",e.items))},directives:[d.a,b.a,m.n,p.i,p.b,m.o,f.a,h.a],pipes:[m.e],styles:[""]}),t})()}];let L=(()=>{class t{}return t.\u0275mod=a.Mb({type:t}),t.\u0275inj=a.Lb({factory:function(e){return new(e||t)},imports:[[r.h.forChild(I)],r.h]}),t})(),T=(()=>{class t{}return t.\u0275mod=a.Mb({type:t}),t.\u0275inj=a.Lb({factory:function(e){return new(e||t)},imports:[[i.a,L,c]]}),t})()},Pj3g:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n("fXoL"),r=n("oaey"),s=n("nYR2"),a=n("1G5W"),c=n("lJxs"),o=n("2Vo4"),l=n("EY2u");class u extends r.a{constructor(){super(),this.isLoading$=new o.a(!0),this.pageIndex$=new i.n,this.params=null}stopLoading(){return this.isLoading$.next(!1),l.a}goToPrevPage(){return this.pageIndex$.emit(),l.a}getItems(t){return this.isLoading$.next(!0),t.pipe(Object(s.a)(()=>this.isLoading$.next(!1)),Object(a.a)(this.destroyed),Object(c.a)(t=>(this.items=t.items,this.totalCount=t.total_count,t)))}}},o5fV:function(t,e,n){"use strict";n.d(e,"a",function(){return b});var i=n("mrSG"),r=n("sbGu"),s=n("dEAy"),a=n("CvgI"),c=n("tk/3"),o=n("lJxs"),l=n("pLZG"),u=n("fXoL");let d=(()=>{class t{constructor(t){this.modal=t,this.modal.updateConfig({nzWrapClassName:"vertical-center-modal",nzMaskClosable:!0,nzAutofocus:null,nzOkType:"danger",nzOkText:"Delete",nzClosable:!1})}}return t.\u0275fac=function(e){return new(e||t)(u.Ob(s.c))},t.\u0275cmp=u.Ib({type:t,selectors:[["ng-component"]],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),t})();class b{constructor(){const t=r.a.getInjector;this.http=t.get(c.c),this.modalService=t.get(s.d)}getItems(t,e,n){const i=Object(a.a)(t),r=Object.assign({params:i},n);return this.http.get(e,Object.assign({},r)).pipe(Object(o.a)(t=>t))}openModal(t,e=null,n,i=!0,r=600){return this.modalService.create(Object.assign(Object.assign({},i&&{nzWrapClassName:"vertical-center-modal"}),{nzTitle:t,nzWidth:r+"px",nzContent:n,nzComponentParams:Object.assign({},e)})).afterClose.pipe(Object(l.a)(t=>t))}openActionConfirmationModal(t,e){return this.modalService.confirm({nzContent:e,nzTitle:t,nzOnOk:()=>!0}).afterClose.pipe(Object(l.a)(t=>t))}deleteItem(t,e){return this.modalService.confirm({nzContent:d,nzTitle:t,nzOnOk:t=>Object(i.a)(this,void 0,void 0,function*(){return t.modal.config.nzOkLoading=!0,yield this.deleteItemRequest(e)})}).afterClose.pipe(Object(l.a)(t=>t))}deleteItemRequest(t){return Object(i.a)(this,void 0,void 0,function*(){return yield this.http.delete(t).toPromise().then(t=>"success"===t.status)})}}}}]);