(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"0x4I":function(t,e,n){"use strict";n.d(e,"a",function(){return h});var s=n("3Pt+"),i=n("YFAD"),o=n("TwVa"),a=n("sWYD"),r=n("mCNh"),c=n("pLZG"),l=n("1G5W"),d=n("lJxs"),u=n("pfyX");class h extends u.a{constructor(t){super(t),this.doctors=new o.f("getDoctorOptions","doctors"),this.groups=new o.f("getGroupOptions","groups"),this.practices=new o.f("getPracticeOptions","practices"),this.sex=i.a,this.originalOrder=(t,e)=>0,this.form=new s.h({patient_id:new s.e("",[s.s.required]),first_name:new s.e("",[s.s.required]),middle_name:new s.e(""),last_name:new s.e("",[s.s.required]),sex:new s.e(null),birth_date:new s.e(null),phone:new s.e("",[s.s.required]),email:new s.e(null),doctor:new s.e(null,[s.s.required]),practice:new s.e(null,[s.s.required]),groups:new s.e(null),address:new s.h({city:new s.e("",[s.s.required]),company:new s.e(""),postal_code:new s.e("",[s.s.required]),state:new s.e("",[s.s.required]),street1:new s.e("",[s.s.required]),street2:new s.e(""),street3:new s.e("")}),notes:new s.e("")}),this.f.practice.valueChanges.pipe(Object(c.a)(t=>!t),Object(l.a)(this.destroyed)).subscribe(()=>{this.f.doctor.reset(),this.f.groups.reset()})}get formValue(){const t=this.form.value;return t.groups=t.groups?[...t.groups]:[],t.birth_date=t.birth_date&&Object(a.a)(new Date(t.birth_date),"yyyy-MM-dd"),t.address.country="US",t}get f(){return this.form.controls}practiceValueChanged(t){this.f.doctor.reset(),this.f.groups.reset(),this.loadOptions$.next([{key:"practice",value:t.name}])}pushOptions(){return Object(r.a)(Object(d.a)(t=>{const e=t.options,n=e.type;let s,i=[];"doctors"===n&&(s=t=>Object.assign(new o.b,t)),"groups"===n&&(s=t=>Object.assign(new o.e,t)),"practices"===n&&(s=t=>Object.assign(new o.h,t)),i=t.items.map(t=>s(t)),e.items$.next([...e.items$.value,...i])}))}init(){this.formInitValue=this.form.getRawValue()}}},Pj3g:function(t,e,n){"use strict";n.d(e,"a",function(){return d});var s=n("fXoL"),i=n("oaey"),o=n("nYR2"),a=n("1G5W"),r=n("lJxs"),c=n("2Vo4"),l=n("EY2u");class d extends i.a{constructor(){super(),this.isLoading$=new c.a(!0),this.pageIndex$=new s.n,this.params=null}stopLoading(){return this.isLoading$.next(!1),l.a}goToPrevPage(){return this.pageIndex$.emit(),l.a}getItems(t){return this.isLoading$.next(!0),t.pipe(Object(o.a)(()=>this.isLoading$.next(!1)),Object(a.a)(this.destroyed),Object(r.a)(t=>(this.items=t.items,this.totalCount=t.total_count,t)))}}},TwVa:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"g",function(){return i}),n.d(e,"b",function(){return o}),n.d(e,"f",function(){return r}),n.d(e,"c",function(){return c}),n.d(e,"e",function(){return l}),n.d(e,"d",function(){return d}),n.d(e,"h",function(){return u});class s{constructor(){}get label(){return this.device_id}}class i{constructor(){}get label(){return`${this.first_name} ${this.middle_name||""} ${this.last_name} - ${this.patient_id}`}}class o extends class{}{get label(){return`${this.first_name} ${this.last_name} - ${this.npi}`}}var a=n("2Vo4");class r{constructor(t,e=null){this.totalCount=0,this.items$=new a.a(new Array),this.searchChange$=new a.a(null),this.getRequestFuncName=t,this.type=e}}class c{constructor(){}}class l{get label(){return this.name}}class d{constructor(t){Object.assign(this,t)}}class u{get label(){return this.name}}},VdD3:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var s=n("fXoL"),i=n("dEAy"),o=n("OzZK"),a=n("RwU8"),r=n("C2AL"),c=n("ofXK");function l(t,e){if(1&t){const t=s.Vb();s.Ub(0,"button",5),s.bc("click",function(){return s.vc(t),s.ec(2).onSaveClick(!1)}),s.Hc(1,"Save & Add another"),s.Tb()}if(2&t){const t=s.ec(2);s.mc("disabled",!t.formValid)("nzLoading",t.processing&&!t.processingClose)}}function d(t,e){1&t&&(s.Ub(0,"span"),s.Hc(1,"\xa0& Close"),s.Tb())}function u(t,e){if(1&t){const t=s.Vb();s.Sb(0),s.Ub(1,"button",1),s.bc("click",function(){return s.vc(t),s.ec().closeModal()}),s.Hc(2,"Cancel"),s.Tb(),s.Fc(3,l,2,2,"button",2),s.Ub(4,"button",3),s.bc("click",function(){return s.vc(t),s.ec().onSaveClick(!0)}),s.Hc(5,"Save"),s.Fc(6,d,2,0,"span",4),s.Tb(),s.Rb()}if(2&t){const t=s.ec();s.Ab(3),s.mc("ngIf",!t.isEditing),s.Ab(1),s.mc("disabled",!t.formValid)("nzLoading",t.processing&&t.processingClose),s.Ab(2),s.mc("ngIf",!t.isEditing)}}let h=(()=>{class t{constructor(){this.saveEvent=new s.n,this.closeEvent=new s.n,this.formValid=!0}closeModal(){this.closeEvent.emit()}onSaveClick(t){this.saveEvent.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Ib({type:t,selectors:[["app-modal-footer"]],inputs:{processing:"processing",processingClose:"processingClose",formValid:"formValid",isEditing:"isEditing"},outputs:{saveEvent:"saveEvent",closeEvent:"closeEvent"},decls:1,vars:0,consts:[[4,"nzModalFooter"],["nz-button","",3,"click"],["nz-button","","nzType","default",3,"disabled","nzLoading","click",4,"ngIf"],["nz-button","","nzType","primary",3,"disabled","nzLoading","click"],[4,"ngIf"],["nz-button","","nzType","default",3,"disabled","nzLoading","click"]],template:function(t,e){1&t&&s.Fc(0,u,7,4,"ng-container",0)},directives:[i.a,o.a,a.a,r.a,c.o],encapsulation:2}),t})()},YFAD:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var s=function(t){return t.male="Male",t.female="Female",t}({})},bb81:function(t,e,n){"use strict";n.d(e,"a",function(){return A});var s=n("fXoL"),i=n("EY2u"),o=n("HDdC"),a=n("2Vo4"),r=n("1G5W"),c=n("vkgz"),l=n("/uUt"),d=n("Kj3r"),u=n("eIep"),h=n("nYR2"),p=n("JIr8"),g=n("pLZG"),f=n("oaey"),b=n("CvgI"),m=n("UXun"),O=n("lJxs"),v=n("ovFC"),C=n("tk/3");let z=(()=>{class t{constructor(t){this.http=t,this.options$=new a.a([]),this.totalCount$=new a.a(0),this.isLoadingMore$=new a.a(!1),this.isLoading$=new a.a(!0),this.filters={}}get optionsAsObservable$(){return this.options$.asObservable()}get options(){return this.options$.value}set options(t){this.options$.next([...t])}get totalCount(){return this.totalCount$.value}set totalCount(t){this.totalCount$.next(t)}get isLoadingMore(){return this.isLoadingMore$.value}set isLoadingMore(t){this.isLoadingMore$.next(t)}get isLoadingMoreAsObservable$(){return this.isLoadingMore$.pipe(Object(m.a)(1))}get isLoadingAsObservable$(){return this.isLoading$.pipe(Object(m.a)(1))}get isLoading(){return this.isLoading$.value}set isLoading(t){this.isLoading$.next(t)}loadMoreOptions(t,e){return this.options.length<this.totalCount?(this.isLoadingMore=!0,this.getOptionsRequest(t).pipe(Object(O.a)(t=>{this.totalCount=t.total_count;const n=e?t.items.map(t=>e(t)):t.items;this.options=[...this.options,...n]}),Object(h.a)(()=>this.isLoadingMore=!1))):i.a}getOptions(t,e){return this.getOptionsRequest(t).pipe(Object(O.a)(t=>{this.totalCount=t.total_count,this.options=e?t.items.map(t=>e(t)):t.items}),Object(h.a)(()=>this.isLoading=!1))}getOptionsRequest(t){const e=Object(b.a)(Object.assign({limit:15,offset:this.options.length},this.filters));return this.http.get(t,{params:e})}}return t.\u0275fac=function(e){return new(e||t)(s.Yb(C.c))},t.\u0275prov=s.Kb({token:t,factory:t.\u0275fac,providedIn:v.a}),t})();var w=n("zAKX"),S=n("3Pt+"),L=n("vxfF"),j=n("ofXK"),y=n("qAZ0"),$=n("QlLE");function _(t,e){if(1&t&&s.Pb(0,"nz-option",7),2&t){const t=e.$implicit,n=s.ec();s.mc("nzValue",t.id)("nzLabel",t[n.labelKey])("nzDisabled",n.optionDisabled(t.id))}}function x(t,e){1&t&&(s.Ub(0,"nz-option",8),s.Ub(1,"div",9),s.Pb(2,"nz-spin"),s.Ub(3,"span",10),s.Hc(4,"Searching..."),s.Tb(),s.Tb(),s.Tb())}function M(t,e){1&t&&(s.Ub(0,"div",14),s.Pb(1,"nz-spin"),s.Ub(2,"span"),s.Hc(3,"Loading data..."),s.Tb(),s.Tb())}function T(t,e){if(1&t&&(s.Ub(0,"div",12),s.Fc(1,M,4,0,"div",13),s.fc(2,"async"),s.Tb()),2&t){const t=s.ec(2),e=s.uc(10);s.Ab(1),s.mc("ngIf",s.gc(2,2,t.isLoadingMore$))("ngIfElse",e)}}function I(t,e){if(1&t&&s.Fc(0,T,3,4,"div",11),2&t){const t=s.ec();s.mc("ngIf",!t.isSearching&&t.totalCount>15&&"tags"!==t.mode)}}function P(t,e){if(1&t&&(s.Ub(0,"div",15),s.Hc(1),s.Tb()),2&t){const t=s.ec();s.Ab(1),s.Kc("",t.options.length," of ",t.totalCount,"")}}function F(t,e){if(1&t&&s.Pb(0,"nz-empty",16),2&t){const t=s.ec();s.mc("nzNotFoundContent",t.noDataText)}}let A=(()=>{class t extends f.a{constructor(t){super(),this.selectService=t,this.labelKey="name",this.size="default",this.mode="default",this.filterName="name",this.canLoad=!0,this.loadOptions$=new o.a,this.valueChangedEvt=new s.n,this.searchChange$=new a.a(null)}get totalCount(){return this.selectService.totalCount}get options(){return this.selectService.options}onScrollToBottom(){this.selectService.loadMoreOptions(this.url,this.transformFunc).pipe(Object(r.a)(this.destroyed)).subscribe()}onSearch(t){(t||this.selectService.filters[this.filterName])&&(this.isSearching=!0,this.searchChange$.next(t))}onOpenChange(t){!t&&this.selectService.filters[this.filterName]&&(this.selectService.filters[this.filterName]=null,this.selectService.options=[],this.getOptions())}selectionValueChanged(t){t&&this.valueChangedEvt.emit(this.selectService.options.find(e=>e.id===t))}searchOptions(){return this.searchChange$.asObservable().pipe(Object(c.a)(t=>{this.selectService.options=[],this.selectService.filters[this.filterName]=t}),Object(l.a)(),Object(d.a)(500),Object(u.a)(()=>this.selectService.getOptions(this.url,this.transformFunc).pipe(Object(h.a)(()=>{this.isSearching=!1,this.disabled=!1}),Object(p.a)(()=>i.a))),Object(r.a)(this.destroyed))}getOptions(){this.selectService.getOptions(this.url,this.transformFunc).pipe(Object(r.a)(this.destroyed)).subscribe()}optionDisabled(t){return!(!this.disabledOptions||!this.disabledOptions.length)&&this.disabledOptions.map(t=>t.id).includes(t)}ngOnInit(){const t=this.control.value;t&&(this.selectService.filters.include=t),this.isLoading$=this.selectService.isLoadingAsObservable$,this.isLoadingMore$=this.selectService.isLoadingMoreAsObservable$,this.options$=this.selectService.optionsAsObservable$,this.canLoad&&this.searchOptions().subscribe(),this.loadOptions$.pipe(Object(c.a)(()=>{this.disabled=!0,this.selectService.isLoading=!0}),Object(r.a)(this.destroyed),Object(g.a)(t=>!!t),Object(u.a)(t=>(t.forEach(t=>this.selectService.filters[t.key]=t.value),this.canLoad=!0,this.searchOptions()))).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(z))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-select"]],inputs:{control:"control",url:"url",labelKey:"labelKey",size:"size",disabled:"disabled",placeholder:"placeholder",mode:"mode",maxTagCount:"maxTagCount",filterName:"filterName",canLoad:"canLoad",disabledOptions:"disabledOptions",noDataText:"noDataText",transformFunc:"transformFunc",loadOptions$:"loadOptions$"},outputs:{valueChangedEvt:"valueChangedEvt"},features:[s.zb([z]),s.xb],decls:13,vars:20,consts:[["nzAllowClear","","nzServerSearch","","nzShowSearch","",3,"nzSize","nzPlaceHolder","formControl","nzLoading","nzDisabled","nzMode","nzMaxTagCount","nzDropdownRender","nzShowArrow","nzNotFoundContent","nzOnSearch","nzOpenChange","ngModelChange","nzScrollToBottom"],[3,"itemSize","maxBufferPx"],[3,"nzValue","nzLabel","nzDisabled",4,"ngFor","ngForOf"],["nzDisabled","","nzCustomContent","",4,"ngIf"],["loadingMoreOptionsTpl",""],["totalCountTpl",""],["noDataTpl",""],[3,"nzValue","nzLabel","nzDisabled"],["nzDisabled","","nzCustomContent",""],[1,"searching-option"],[1,"searching-option__text"],["class","dropdown-footer",4,"ngIf"],[1,"dropdown-footer"],["class","dropdown-footer__spinner",4,"ngIf","ngIfElse"],[1,"dropdown-footer__spinner"],[1,"dropdown-footer__total"],["nzNotFoundImage","simple",3,"nzNotFoundContent"]],template:function(t,e){if(1&t&&(s.Ub(0,"nz-select",0),s.bc("nzOnSearch",function(t){return e.onSearch(t)})("nzOpenChange",function(t){return e.onOpenChange(t)})("ngModelChange",function(t){return e.selectionValueChanged(t)})("nzScrollToBottom",function(){return e.onScrollToBottom()}),s.fc(1,"async"),s.fc(2,"async"),s.Ub(3,"cdk-virtual-scroll-viewport",1),s.Fc(4,_,1,3,"nz-option",2),s.fc(5,"async"),s.Tb(),s.Fc(6,x,5,0,"nz-option",3),s.Fc(7,I,1,1,"ng-template",null,4,s.Gc),s.Tb(),s.Fc(9,P,2,2,"ng-template",null,5,s.Gc),s.Fc(11,F,1,1,"ng-template",null,6,s.Gc)),2&t){const t=s.uc(8),n=s.uc(12);s.mc("nzSize",e.size)("nzPlaceHolder",e.placeholder)("formControl",e.control)("nzLoading",e.canLoad&&s.gc(1,14,e.isLoading$))("nzDisabled",e.disabled||s.gc(2,16,e.isLoading$))("nzMode",e.mode)("nzMaxTagCount",e.maxTagCount)("nzDropdownRender",t)("nzShowArrow",!0)("nzNotFoundContent",n),s.Ab(3),s.mc("itemSize",32)("maxBufferPx",160),s.Ab(1),s.mc("ngForOf",s.gc(5,18,e.options$)),s.Ab(2),s.mc("ngIf",e.isSearching)}},directives:[w.d,S.n,S.f,L.b,L.a,j.n,j.o,w.a,y.a,$.b],pipes:[j.b],styles:["[_nghost-%COMP%], [_nghost-%COMP%]   nz-select[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ant-select-arrow{top:48%}.dropdown-footer[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;align-items:center;justify-items:start;padding:4px 14px;color:#1890ff;border-top:1px solid #f0f0f0}.dropdown-footer__total[_ngcontent-%COMP%]{width:100%;grid-column:2/3;display:flex;justify-content:flex-end}.dropdown-footer__spinner[_ngcontent-%COMP%]{display:flex;align-items:center}.dropdown-footer__spinner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:18px}.dropdown-footer[_ngcontent-%COMP%]   nz-spin[_ngcontent-%COMP%]{margin-left:12px}.option[_ngcontent-%COMP%]{display:flex}.option[_ngcontent-%COMP%]   nz-spin[_ngcontent-%COMP%]{margin-left:.9em}.option[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#1890ff;margin-left:1.1em}.searching-option[_ngcontent-%COMP%]{display:flex;align-items:center}.searching-option[_ngcontent-%COMP%]   nz-spin[_ngcontent-%COMP%]{margin-left:.8em}.searching-option__text[_ngcontent-%COMP%]{margin-left:1.2em}"],changeDetection:0}),t})()},o5fV:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var s=n("mrSG"),i=n("sbGu"),o=n("dEAy"),a=n("CvgI"),r=n("tk/3"),c=n("lJxs"),l=n("pLZG"),d=n("fXoL");let u=(()=>{class t{constructor(t){this.modal=t,this.modal.updateConfig({nzWrapClassName:"vertical-center-modal",nzMaskClosable:!0,nzAutofocus:null,nzOkType:"danger",nzOkText:"Delete",nzClosable:!1})}}return t.\u0275fac=function(e){return new(e||t)(d.Ob(o.c))},t.\u0275cmp=d.Ib({type:t,selectors:[["ng-component"]],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),t})();class h{constructor(){const t=i.a.getInjector;this.http=t.get(r.c),this.modalService=t.get(o.d)}getItems(t,e,n){const s=Object(a.a)(t),i=Object.assign({params:s},n);return this.http.get(e,Object.assign({},i)).pipe(Object(c.a)(t=>t))}openModal(t,e=null,n,s=!0,i=600){return this.modalService.create(Object.assign(Object.assign({},s&&{nzWrapClassName:"vertical-center-modal"}),{nzTitle:t,nzWidth:i+"px",nzContent:n,nzComponentParams:Object.assign({},e)})).afterClose.pipe(Object(l.a)(t=>t))}openActionConfirmationModal(t,e){return this.modalService.confirm({nzContent:e,nzTitle:t,nzOnOk:()=>!0}).afterClose.pipe(Object(l.a)(t=>t))}deleteItem(t,e){return this.modalService.confirm({nzContent:u,nzTitle:t,nzOnOk:t=>Object(s.a)(this,void 0,void 0,function*(){return t.modal.config.nzOkLoading=!0,yield this.deleteItemRequest(e)})}).afterClose.pipe(Object(l.a)(t=>t))}deleteItemRequest(t){return Object(s.a)(this,void 0,void 0,function*(){return yield this.http.delete(t).toPromise().then(t=>"success"===t.status)})}}},pfyX:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var s=n("oaey"),i=n("sbGu"),o=n("lhsU"),a=n("3Pt+"),r=n("1G5W"),c=n("nYR2"),l=n("2Vo4"),d=n("bNXi");class u extends s.a{constructor(t){super(),this.modal=t,this.loadOptions$=new l.a(null),this.updateAfterClosing=!1;const e=i.a.getInjector;this.errorService=e.get(o.a),this.notifService=e.get(d.b)}get f(){return this.form.controls}set formInitValue(t){this.formInitialValue=Object.assign({},t)}closeModal(t=this.updateAfterClosing){this.modal.destroy(t)}saveItem(t,e,n=null){this.processing=!0,this.processingClose=t,this.form&&(this.markFormGroupTouched(this.form),this.errorService.form=this.form),e.pipe(Object(r.a)(this.destroyed),Object(c.a)(()=>this.processing=!1)).subscribe(()=>{n&&this.notifService.success(n,""),t?this.closeModal(!0):(this.form&&this.form.reset(this.formInitialValue),this.updateAfterClosing=!0)})}onItemSelected(t,e,n){n.push(t),e.patchValue(null,{emitEvent:!1})}onDeleteItemClick(t,e){this[e]=this[e].filter(e=>e.id!==t)}markFormGroupTouched(t){Object.values(t.controls).forEach(t=>{t.markAsTouched(),t instanceof a.h&&this.markFormGroupTouched(t)})}}}}]);