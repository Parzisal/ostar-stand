!function(){function e(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return n(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function t(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&r(e,n)}function r(e,n){return(r=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function a(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var t,i=s(e);if(n){var o=s(this).constructor;t=Reflect.construct(i,arguments,o)}else t=i.apply(this,arguments);return c(this,t)}}function c(e,n){return!n||"object"!=typeof n&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{BEQY:function(e,n,t){"use strict";t.r(n),t.d(n,"ManagerListModule",function(){return ue});var r,c,s=t("PCNd"),l=t("tyNb"),f=t("Pj3g"),d=t("2Vo4"),b=t("mCNh"),p=t("UXun"),m=t("1G5W"),g=t("eIep"),h=t("nYR2"),v=t("fXoL"),y=t("ILvI"),z=t("o5fV"),O=t("3Pt+"),C=t("pfyX"),k=t("vxZU"),T=((c=function e(){u(this,e)}).\u0275mod=v.Mb({type:c}),c.\u0275inj=v.Lb({factory:function(e){return new(e||c)}}),c),S=((r=function(e){o(t,e);var n=a(t);function t(){return u(this,t),n.call(this)}return i(t,[{key:"edit",value:function(e,n){return this.editItemRequest(e,"Manager updated successfully",Object(y.p)(n))}},{key:"create",value:function(e){return this.createItemRequest(e,"Manager created successfully",y.o)}},{key:"getPracticeOptions",value:function(e){return this.getOptions(e,y.C)}}]),t}(k.a)).\u0275fac=function(e){return new(e||r)},r.\u0275prov=v.Kb({token:r,factory:r.\u0275fac,providedIn:T}),r),w=t("dEAy"),I=t("ocnv"),A=t("B+r4"),M=t("bb81"),j=t("5vDB"),U=t("PTRe"),_=t("VdD3"),P=t("ofXK");function L(e,n){1&e&&(v.Sb(0),v.Hc(1," This field is required "),v.Rb())}function E(e,n){if(1&e&&(v.Sb(0),v.Hc(1),v.Rb()),2&e){var t=v.ec().$implicit;v.Ab(1),v.Jc(" ",t.errors.validationError," ")}}function $(e,n){if(1&e&&(v.Fc(0,L,2,0,"ng-container",16),v.Fc(1,E,2,1,"ng-container",16)),2&e){var t=n.$implicit;v.mc("ngIf",t.hasError("required")),v.Ab(1),v.mc("ngIf",t.hasError("validationError"))}}var x,F,R=((F=function(e){o(t,e);var n=a(t);function t(e,i){var o;return u(this,t),(o=n.call(this,e)).crudService=i,o.practiceUrl=y.C,o.groupsUrl=y.k,o.form=new O.h({practice:new O.e("",[O.s.required]),first_name:new O.e("",[O.s.required]),middle_name:new O.e(""),last_name:new O.e("",[O.s.required]),email:new O.e("",[O.s.required,O.s.email]),phone:new O.e("")}),o}return i(t,[{key:"onSaveClick",value:function(e){var n,t=null===(n=this.manager)||void 0===n?void 0:n.id,i=this.form.value,o=t?this.crudService.edit(i,t):this.crudService.create(i);this.saveItem(e,o)}},{key:"practiceValueChanged",value:function(e){this.loadOptions$.next([{key:"practice",value:e.name}])}},{key:"ngOnInit",value:function(){if(this.manager){for(var e in this.manager)if(this.manager[e]&&Object.prototype.hasOwnProperty.call(this.f,e)){if("object"==typeof this.manager[e]){this.f[e].patchValue(this.manager[e].id,{emitEvent:!1});continue}this.f[e].patchValue(this.manager[e],{emitEvent:!1})}this.loadOptions$.next([{key:"practice",value:this.manager.practice.name}])}this.formInitValue=this.form.getRawValue()}}]),t}(C.a)).\u0275fac=function(e){return new(e||F)(v.Ob(w.c),v.Ob(S))},F.\u0275cmp=v.Ib({type:F,selectors:[["app-crud-manager-modal"]],features:[v.zb([S]),v.xb],decls:33,vars:17,consts:[["nz-form","",1,"form",3,"formGroup"],["nzRequired","",3,"nzSpan"],[3,"nzErrorTip"],["placeholder","Search and select practice",3,"control","url","valueChangedEvt"],[1,"form__item","form__item--multiple-fields"],[1,"form__row"],[1,"form__column"],["nz-input","","formControlName","first_name","autocomplete","","placeholder","First name *","type","text"],["nzExtra","optional",3,"nzErrorTip"],["nz-input","","formControlName","middle_name","autocomplete","","placeholder","Middle name","type","text"],["nz-input","","formControlName","last_name","autocomplete","","placeholder","Last name *","type","text"],["nz-input","","formControlName","email","type","text"],[3,"nzSpan"],["nz-input","","formControlName","phone","type","text"],[3,"processing","processingClose","isEditing","formValid","saveEvent","closeEvent"],["errorTpl",""],[4,"ngIf"]],template:function(e,n){if(1&e&&(v.Ub(0,"form",0),v.Ub(1,"nz-form-item"),v.Ub(2,"nz-form-label",1),v.Hc(3,"Practice"),v.Tb(),v.Ub(4,"nz-form-control",2),v.Ub(5,"app-select",3),v.bc("valueChangedEvt",function(e){return n.practiceValueChanged(e)}),v.Tb(),v.Tb(),v.Tb(),v.Pb(6,"nz-divider"),v.Ub(7,"nz-form-item",4),v.Ub(8,"nz-form-label",1),v.Hc(9,"Name"),v.Tb(),v.Ub(10,"div",5),v.Ub(11,"nz-form-item",6),v.Ub(12,"nz-form-control",2),v.Pb(13,"input",7),v.Tb(),v.Tb(),v.Ub(14,"nz-form-item",6),v.Ub(15,"nz-form-control",8),v.Pb(16,"input",9),v.Tb(),v.Tb(),v.Ub(17,"nz-form-item",6),v.Ub(18,"nz-form-control",2),v.Pb(19,"input",10),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Ub(20,"nz-form-item"),v.Ub(21,"nz-form-label",1),v.Hc(22,"Email"),v.Tb(),v.Ub(23,"nz-form-control",2),v.Pb(24,"input",11),v.Tb(),v.Tb(),v.Ub(25,"nz-form-item"),v.Ub(26,"nz-form-label",12),v.Hc(27,"Phone"),v.Tb(),v.Ub(28,"nz-form-control",2),v.Pb(29,"input",13),v.Tb(),v.Tb(),v.Tb(),v.Ub(30,"app-modal-footer",14),v.bc("saveEvent",function(e){return n.onSaveClick(e)})("closeEvent",function(){return n.closeModal()}),v.Tb(),v.Fc(31,$,2,2,"ng-template",null,15,v.Gc)),2&e){var t=v.uc(32);v.mc("formGroup",n.form),v.Ab(2),v.mc("nzSpan",3),v.Ab(2),v.mc("nzErrorTip",t),v.Ab(1),v.mc("control",n.f.practice)("url",n.practiceUrl),v.Ab(3),v.mc("nzSpan",3),v.Ab(4),v.mc("nzErrorTip",t),v.Ab(3),v.mc("nzErrorTip",t),v.Ab(3),v.mc("nzErrorTip",t),v.Ab(3),v.mc("nzSpan",3),v.Ab(2),v.mc("nzErrorTip",t),v.Ab(3),v.mc("nzSpan",3),v.Ab(2),v.mc("nzErrorTip",t),v.Ab(2),v.mc("processing",n.processing)("processingClose",n.processingClose)("isEditing",!(null==n.manager||!n.manager.id))("formValid",n.form.valid)}},directives:[O.t,O.o,I.b,O.i,A.c,I.c,A.a,I.d,I.a,M.a,j.a,U.b,O.d,O.n,O.g,_.a,P.o],encapsulation:2}),F),D=((x=function(e){o(t,e);var n=a(t);function t(){return u(this,t),n.call(this)}return i(t,[{key:"getManagerList",value:function(e){return this.getItems(e,y.o)}},{key:"addManager",value:function(){return this.openModal("Add new manager",void 0,R)}},{key:"editManager",value:function(e){return this.openModal("Edit manager ".concat(e.first_name," ").concat(e.last_name),{manager:e},R)}},{key:"deleteManager",value:function(e){return this.deleteItem("Are you sure you want to delete manager ".concat(e.first_name," ").concat(e.last_name,"?"),Object(y.p)(e.id))}},{key:"resendActivationEmail",value:function(e){return this.http.post(Object(y.E)(e),{})}}]),t}(z.a)).\u0275fac=function(e){return new(e||x)},x.\u0275prov=v.Kb({token:x,factory:x.\u0275fac,providedIn:T}),x),V=t("bNXi"),N=t("jPNr"),H=t("OzZK"),G=t("RwU8"),K=t("C2AL"),q=t("1ReC"),X=t("rMZv"),B=t("Nqz0"),Y=t("FwiY"),Z=t("Q8cG"),J=t("ZyQt");function W(e,n){1&e&&(v.Ub(0,"nz-tag",19),v.Hc(1,"active"),v.Tb())}function Q(e,n){1&e&&(v.Ub(0,"nz-tag",20),v.Hc(1,"inactive"),v.Tb())}var ee=function(e){return{"ant-btn-link--disabled":e}};function ne(e,n){if(1&e){var t=v.Vb();v.Ub(0,"button",21),v.bc("click",function(){v.vc(t);var e=v.ec().$implicit;return v.ec().onResendActivationEmailClick(e)}),v.fc(1,"async"),v.fc(2,"async"),v.Ub(3,"div",22),v.fc(4,"async"),v.Pb(5,"i",23),v.fc(6,"async"),v.Ub(7,"span"),v.Hc(8,"Resend activation email"),v.Tb(),v.Tb(),v.Tb()}if(2&e){var i=v.ec(2);v.mc("nzDisabled",v.gc(1,4,i.emailIsSendingAsObs$))("disabled",v.gc(2,6,i.emailIsSendingAsObs$)),v.Ab(3),v.mc("ngClass",v.pc(12,ee,v.gc(4,8,i.emailIsSendingAsObs$))),v.Ab(2),v.mc("nzType",v.gc(6,10,i.emailIsSendingAsObs$)?"loading":"mail")}}function te(e,n){if(1&e){var t=v.Vb();v.Ub(0,"tr"),v.Ub(1,"td"),v.Hc(2),v.Tb(),v.Ub(3,"td"),v.Hc(4),v.Tb(),v.Ub(5,"td"),v.Hc(6),v.Tb(),v.Ub(7,"td"),v.Hc(8),v.Tb(),v.Ub(9,"td",5),v.Fc(10,W,2,0,"nz-tag",6),v.Fc(11,Q,2,0,"nz-tag",7),v.Tb(),v.Ub(12,"td",8),v.Ub(13,"div"),v.Ub(14,"button",9),v.Pb(15,"i",10),v.Tb(),v.Ub(16,"nz-dropdown-menu",null,11),v.Ub(18,"div",12),v.Fc(19,ne,9,14,"button",13),v.Ub(20,"button",14),v.bc("click",function(){v.vc(t);var e=n.$implicit;return v.ec().onEditClick(e)}),v.Ub(21,"div",15),v.Pb(22,"i",16),v.Ub(23,"span"),v.Hc(24,"Edit"),v.Tb(),v.Tb(),v.Tb(),v.Ub(25,"button",14),v.bc("click",function(){v.vc(t);var e=n.$implicit;return v.ec().onDeleteClick(e)}),v.Ub(26,"div",17),v.Pb(27,"i",18),v.Ub(28,"span"),v.Hc(29,"Delete"),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Tb()}if(2&e){var i=n.$implicit,o=v.uc(17);v.Ab(2),v.Lc("",i.first_name," ",null==i?null:i.middle_name," ",i.last_name,""),v.Ab(2),v.Ic(null==i.practice?null:i.practice.name),v.Ab(2),v.Ic(i.email),v.Ab(2),v.Ic(i.phone),v.Ab(2),v.mc("ngIf",i.active),v.Ab(1),v.mc("ngIf",!i.active),v.Ab(3),v.mc("nzDropdownMenu",o),v.Ab(5),v.mc("ngIf",!i.active)}}var ie,oe,re,ae=[{path:"",component:(ie=function(e){o(t,e);var n=a(t);function t(e,i){var o;return u(this,t),(o=n.call(this)).managerService=e,o.notifService=i,o.emailIsSending$=new d.a(!1),o.displayColumns=[{name:"Name",filterKey:"name",customFilter:"search",filter:!0,visible:!1},{name:"Practice",filterKey:"practice",customFilter:"search",filter:!0,visible:!1},{name:"Email",filterKey:"email",customFilter:"search",filter:!0,visible:!1},{name:"Phone"},{name:"State",filterMultiple:!1,filterKey:"active",listOfFilter:[{text:"Active",value:"true"},{text:"Inactive",value:"false"}],filter:!0,visible:!1,pipe:"state"},{name:""}],o}return i(t,[{key:"getManagers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params;return this.getItems(this.managerService.getManagerList(e)).pipe(Object(m.a)(this.destroyed))}},{key:"onAddClick",value:function(){this.managerService.addManager().pipe(this.managersPipe).subscribe()}},{key:"onEditClick",value:function(e){this.managerService.editManager(e).pipe(this.managersPipe).subscribe()}},{key:"onDeleteClick",value:function(e){var n=this;this.managerService.deleteManager(e).pipe(Object(g.a)(function(){return 1===n.items.length?n.goToPrevPage():n.getManagers()})).subscribe()}},{key:"onQueryParamsChange",value:function(e){this.params=e,this.getManagers().subscribe()}},{key:"onResendActivationEmailClick",value:function(e){var n=this;this.emailIsSending$.next(!0),this.managerService.resendActivationEmail(e.id).pipe(Object(m.a)(this.destroyed),Object(h.a)(function(){return n.emailIsSending$.next(!1)})).subscribe(function(){return n.notifService.success("Email has been sent to "+e.email,"")})}},{key:"emailIsSendingAsObs$",get:function(){return this.emailIsSending$.pipe(Object(p.a)(1))}},{key:"managersPipe",get:function(){var e=this;return Object(b.a)(Object(g.a)(function(){return e.getManagers()}))}}]),t}(f.a),ie.\u0275fac=function(e){return new(e||ie)(v.Ob(D),v.Ob(V.b))},ie.\u0275cmp=v.Ib({type:ie,selectors:[["app-manager-list"]],features:[v.xb],decls:7,vars:6,consts:[[1,"panel"],["nzTitle","Manager list",1,"page-header"],["nz-button","","nzType","primary",3,"click"],[3,"data","totalCount","isLoading$","pageIndex$","displayColumns","queryParamsChange"],[4,"ngFor","ngForOf"],[1,"table-cell__state"],["nzColor","green",4,"ngIf"],["nzColor","red",4,"ngIf"],[1,"table-cell__actions"],["nz-button","","nzType","link","nzTrigger","click","nz-dropdown","",3,"nzDropdownMenu"],["nz-icon","","nzType","icon:more","nzTheme","outline"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","","class","btn--menu-item",3,"nzDisabled","disabled","click",4,"ngIf"],["nz-menu-item","",1,"btn--menu-item",3,"click"],[1,"ant-btn-sm","ant-btn-link","ant-btn"],["nz-icon","","nzType","edit","nzTheme","outline"],[1,"ant-btn-sm","ant-btn-link","ant-btn","ant-btn-dangerous"],["nz-icon","","nzType","delete","nzTheme","outline"],["nzColor","green"],["nzColor","red"],["nz-menu-item","",1,"btn--menu-item",3,"nzDisabled","disabled","click"],[1,"ant-btn-sm","ant-btn-link","ant-btn",3,"ngClass"],["nz-icon","","nzTheme","outline",3,"nzType"]],template:function(e,n){1&e&&(v.Ub(0,"div",0),v.Ub(1,"nz-page-header",1),v.Ub(2,"nz-page-header-extra"),v.Ub(3,"button",2),v.bc("click",function(){return n.onAddClick()}),v.Hc(4,"Add manager"),v.Tb(),v.Tb(),v.Tb(),v.Ub(5,"app-table-wrapper",3),v.bc("queryParamsChange",function(e){return n.onQueryParamsChange(e)}),v.Fc(6,te,30,10,"tr",4),v.Tb(),v.Tb()),2&e&&(v.Ab(5),v.mc("data",n.items)("totalCount",n.totalCount)("isLoading$",n.isLoading$.asObservable())("pageIndex$",n.pageIndex$)("displayColumns",n.displayColumns),v.Ab(1),v.mc("ngForOf",n.items))},directives:[N.a,N.c,H.a,G.a,K.a,q.a,P.n,X.i,X.b,P.o,B.d,B.b,Y.a,B.e,Z.c,Z.d,J.a,P.m],pipes:[P.b],styles:[""]}),ie)}],ce=((oe=function e(){u(this,e)}).\u0275mod=v.Mb({type:oe}),oe.\u0275inj=v.Lb({factory:function(e){return new(e||oe)},imports:[[l.h.forChild(ae)],l.h]}),oe),se=t("S9na"),ue=((re=function e(){u(this,e)}).\u0275mod=v.Mb({type:re}),re.\u0275inj=v.Lb({factory:function(e){return new(e||re)},imports:[[s.a,se.a,ce,T]]}),re)},Pj3g:function(e,n,t){"use strict";t.d(n,"a",function(){return p});var r=t("fXoL"),c=t("oaey"),s=t("nYR2"),l=t("1G5W"),f=t("lJxs"),d=t("2Vo4"),b=t("EY2u"),p=function(e){o(t,e);var n=a(t);function t(){var e;return u(this,t),(e=n.call(this)).isLoading$=new d.a(!0),e.pageIndex$=new r.n,e.params=null,e}return i(t,[{key:"stopLoading",value:function(){return this.isLoading$.next(!1),b.a}},{key:"goToPrevPage",value:function(){return this.pageIndex$.emit(),b.a}},{key:"getItems",value:function(e){var n=this;return this.isLoading$.next(!0),e.pipe(Object(s.a)(function(){return n.isLoading$.next(!1)}),Object(l.a)(this.destroyed),Object(f.a)(function(e){return n.items=e.items,n.totalCount=e.total_count,e}))}}]),t}(c.a)},VdD3:function(e,n,t){"use strict";t.d(n,"a",function(){return p});var o=t("fXoL"),r=t("dEAy"),a=t("OzZK"),c=t("RwU8"),s=t("C2AL"),l=t("ofXK");function f(e,n){if(1&e){var t=o.Vb();o.Ub(0,"button",5),o.bc("click",function(){return o.vc(t),o.ec(2).onSaveClick(!1)}),o.Hc(1,"Save & Add another"),o.Tb()}if(2&e){var i=o.ec(2);o.mc("disabled",!i.formValid)("nzLoading",i.processing&&!i.processingClose)}}function d(e,n){1&e&&(o.Ub(0,"span"),o.Hc(1,"\xa0& Close"),o.Tb())}function b(e,n){if(1&e){var t=o.Vb();o.Sb(0),o.Ub(1,"button",1),o.bc("click",function(){return o.vc(t),o.ec().closeModal()}),o.Hc(2,"Cancel"),o.Tb(),o.Fc(3,f,2,2,"button",2),o.Ub(4,"button",3),o.bc("click",function(){return o.vc(t),o.ec().onSaveClick(!0)}),o.Hc(5,"Save"),o.Fc(6,d,2,0,"span",4),o.Tb(),o.Rb()}if(2&e){var i=o.ec();o.Ab(3),o.mc("ngIf",!i.isEditing),o.Ab(1),o.mc("disabled",!i.formValid)("nzLoading",i.processing&&i.processingClose),o.Ab(2),o.mc("ngIf",!i.isEditing)}}var p=function(){var e=function(){function e(){u(this,e),this.saveEvent=new o.n,this.closeEvent=new o.n,this.formValid=!0}return i(e,[{key:"closeModal",value:function(){this.closeEvent.emit()}},{key:"onSaveClick",value:function(e){this.saveEvent.emit(e)}}]),e}();return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=o.Ib({type:e,selectors:[["app-modal-footer"]],inputs:{processing:"processing",processingClose:"processingClose",formValid:"formValid",isEditing:"isEditing"},outputs:{saveEvent:"saveEvent",closeEvent:"closeEvent"},decls:1,vars:0,consts:[[4,"nzModalFooter"],["nz-button","",3,"click"],["nz-button","","nzType","default",3,"disabled","nzLoading","click",4,"ngIf"],["nz-button","","nzType","primary",3,"disabled","nzLoading","click"],[4,"ngIf"],["nz-button","","nzType","default",3,"disabled","nzLoading","click"]],template:function(e,n){1&e&&o.Fc(0,b,7,4,"ng-container",0)},directives:[r.a,a.a,c.a,s.a,l.o],encapsulation:2}),e}()},bb81:function(n,t,r){"use strict";r.d(t,"a",function(){return N});var c,s=r("fXoL"),l=r("EY2u"),f=r("HDdC"),d=r("2Vo4"),b=r("1G5W"),p=r("vkgz"),m=r("/uUt"),g=r("Kj3r"),h=r("eIep"),v=r("nYR2"),y=r("JIr8"),z=r("pLZG"),O=r("oaey"),C=r("CvgI"),k=r("UXun"),T=r("lJxs"),S=r("ovFC"),w=r("tk/3"),I=((c=function(){function n(e){u(this,n),this.http=e,this.options$=new d.a([]),this.totalCount$=new d.a(0),this.isLoadingMore$=new d.a(!1),this.isLoading$=new d.a(!0),this.filters={}}return i(n,[{key:"loadMoreOptions",value:function(n,t){var i=this;return this.options.length<this.totalCount?(this.isLoadingMore=!0,this.getOptionsRequest(n).pipe(Object(T.a)(function(n){i.totalCount=n.total_count;var o=t?n.items.map(function(e){return t(e)}):n.items;i.options=[].concat(e(i.options),e(o))}),Object(v.a)(function(){return i.isLoadingMore=!1}))):l.a}},{key:"getOptions",value:function(e,n){var t=this;return this.getOptionsRequest(e).pipe(Object(T.a)(function(e){t.totalCount=e.total_count,t.options=n?e.items.map(function(e){return n(e)}):e.items}),Object(v.a)(function(){return t.isLoading=!1}))}},{key:"getOptionsRequest",value:function(e){var n=Object(C.a)(Object.assign({limit:15,offset:this.options.length},this.filters));return this.http.get(e,{params:n})}},{key:"optionsAsObservable$",get:function(){return this.options$.asObservable()}},{key:"options",get:function(){return this.options$.value},set:function(n){this.options$.next(e(n))}},{key:"totalCount",get:function(){return this.totalCount$.value},set:function(e){this.totalCount$.next(e)}},{key:"isLoadingMore",get:function(){return this.isLoadingMore$.value},set:function(e){this.isLoadingMore$.next(e)}},{key:"isLoadingMoreAsObservable$",get:function(){return this.isLoadingMore$.pipe(Object(k.a)(1))}},{key:"isLoadingAsObservable$",get:function(){return this.isLoading$.pipe(Object(k.a)(1))}},{key:"isLoading",get:function(){return this.isLoading$.value},set:function(e){this.isLoading$.next(e)}}]),n}()).\u0275fac=function(e){return new(e||c)(s.Yb(w.c))},c.\u0275prov=s.Kb({token:c,factory:c.\u0275fac,providedIn:S.a}),c),A=r("zAKX"),M=r("3Pt+"),j=r("vxfF"),U=r("ofXK"),_=r("qAZ0"),P=r("QlLE");function L(e,n){if(1&e&&s.Pb(0,"nz-option",7),2&e){var t=n.$implicit,i=s.ec();s.mc("nzValue",t.id)("nzLabel",t[i.labelKey])("nzDisabled",i.optionDisabled(t.id))}}function E(e,n){1&e&&(s.Ub(0,"nz-option",8),s.Ub(1,"div",9),s.Pb(2,"nz-spin"),s.Ub(3,"span",10),s.Hc(4,"Searching..."),s.Tb(),s.Tb(),s.Tb())}function $(e,n){1&e&&(s.Ub(0,"div",14),s.Pb(1,"nz-spin"),s.Ub(2,"span"),s.Hc(3,"Loading data..."),s.Tb(),s.Tb())}function x(e,n){if(1&e&&(s.Ub(0,"div",12),s.Fc(1,$,4,0,"div",13),s.fc(2,"async"),s.Tb()),2&e){var t=s.ec(2),i=s.uc(10);s.Ab(1),s.mc("ngIf",s.gc(2,2,t.isLoadingMore$))("ngIfElse",i)}}function F(e,n){if(1&e&&s.Fc(0,x,3,4,"div",11),2&e){var t=s.ec();s.mc("ngIf",!t.isSearching&&t.totalCount>15&&"tags"!==t.mode)}}function R(e,n){if(1&e&&(s.Ub(0,"div",15),s.Hc(1),s.Tb()),2&e){var t=s.ec();s.Ab(1),s.Kc("",t.options.length," of ",t.totalCount,"")}}function D(e,n){if(1&e&&s.Pb(0,"nz-empty",16),2&e){var t=s.ec();s.mc("nzNotFoundContent",t.noDataText)}}var V,N=((V=function(e){o(t,e);var n=a(t);function t(e){var i;return u(this,t),(i=n.call(this)).selectService=e,i.labelKey="name",i.size="default",i.mode="default",i.filterName="name",i.canLoad=!0,i.loadOptions$=new f.a,i.valueChangedEvt=new s.n,i.searchChange$=new d.a(null),i}return i(t,[{key:"onScrollToBottom",value:function(){this.selectService.loadMoreOptions(this.url,this.transformFunc).pipe(Object(b.a)(this.destroyed)).subscribe()}},{key:"onSearch",value:function(e){(e||this.selectService.filters[this.filterName])&&(this.isSearching=!0,this.searchChange$.next(e))}},{key:"onOpenChange",value:function(e){!e&&this.selectService.filters[this.filterName]&&(this.selectService.filters[this.filterName]=null,this.selectService.options=[],this.getOptions())}},{key:"selectionValueChanged",value:function(e){e&&this.valueChangedEvt.emit(this.selectService.options.find(function(n){return n.id===e}))}},{key:"searchOptions",value:function(){var e=this;return this.searchChange$.asObservable().pipe(Object(p.a)(function(n){e.selectService.options=[],e.selectService.filters[e.filterName]=n}),Object(m.a)(),Object(g.a)(500),Object(h.a)(function(){return e.selectService.getOptions(e.url,e.transformFunc).pipe(Object(v.a)(function(){e.isSearching=!1,e.disabled=!1}),Object(y.a)(function(){return l.a}))}),Object(b.a)(this.destroyed))}},{key:"getOptions",value:function(){this.selectService.getOptions(this.url,this.transformFunc).pipe(Object(b.a)(this.destroyed)).subscribe()}},{key:"optionDisabled",value:function(e){return!(!this.disabledOptions||!this.disabledOptions.length)&&this.disabledOptions.map(function(e){return e.id}).includes(e)}},{key:"ngOnInit",value:function(){var e=this,n=this.control.value;n&&(this.selectService.filters.include=n),this.isLoading$=this.selectService.isLoadingAsObservable$,this.isLoadingMore$=this.selectService.isLoadingMoreAsObservable$,this.options$=this.selectService.optionsAsObservable$,this.canLoad&&this.searchOptions().subscribe(),this.loadOptions$.pipe(Object(p.a)(function(){e.disabled=!0,e.selectService.isLoading=!0}),Object(b.a)(this.destroyed),Object(z.a)(function(e){return!!e}),Object(h.a)(function(n){return n.forEach(function(n){return e.selectService.filters[n.key]=n.value}),e.canLoad=!0,e.searchOptions()})).subscribe()}},{key:"totalCount",get:function(){return this.selectService.totalCount}},{key:"options",get:function(){return this.selectService.options}}]),t}(O.a)).\u0275fac=function(e){return new(e||V)(s.Ob(I))},V.\u0275cmp=s.Ib({type:V,selectors:[["app-select"]],inputs:{control:"control",url:"url",labelKey:"labelKey",size:"size",disabled:"disabled",placeholder:"placeholder",mode:"mode",maxTagCount:"maxTagCount",filterName:"filterName",canLoad:"canLoad",disabledOptions:"disabledOptions",noDataText:"noDataText",transformFunc:"transformFunc",loadOptions$:"loadOptions$"},outputs:{valueChangedEvt:"valueChangedEvt"},features:[s.zb([I]),s.xb],decls:13,vars:20,consts:[["nzAllowClear","","nzServerSearch","","nzShowSearch","",3,"nzSize","nzPlaceHolder","formControl","nzLoading","nzDisabled","nzMode","nzMaxTagCount","nzDropdownRender","nzShowArrow","nzNotFoundContent","nzOnSearch","nzOpenChange","ngModelChange","nzScrollToBottom"],[3,"itemSize","maxBufferPx"],[3,"nzValue","nzLabel","nzDisabled",4,"ngFor","ngForOf"],["nzDisabled","","nzCustomContent","",4,"ngIf"],["loadingMoreOptionsTpl",""],["totalCountTpl",""],["noDataTpl",""],[3,"nzValue","nzLabel","nzDisabled"],["nzDisabled","","nzCustomContent",""],[1,"searching-option"],[1,"searching-option__text"],["class","dropdown-footer",4,"ngIf"],[1,"dropdown-footer"],["class","dropdown-footer__spinner",4,"ngIf","ngIfElse"],[1,"dropdown-footer__spinner"],[1,"dropdown-footer__total"],["nzNotFoundImage","simple",3,"nzNotFoundContent"]],template:function(e,n){if(1&e&&(s.Ub(0,"nz-select",0),s.bc("nzOnSearch",function(e){return n.onSearch(e)})("nzOpenChange",function(e){return n.onOpenChange(e)})("ngModelChange",function(e){return n.selectionValueChanged(e)})("nzScrollToBottom",function(){return n.onScrollToBottom()}),s.fc(1,"async"),s.fc(2,"async"),s.Ub(3,"cdk-virtual-scroll-viewport",1),s.Fc(4,L,1,3,"nz-option",2),s.fc(5,"async"),s.Tb(),s.Fc(6,E,5,0,"nz-option",3),s.Fc(7,F,1,1,"ng-template",null,4,s.Gc),s.Tb(),s.Fc(9,R,2,2,"ng-template",null,5,s.Gc),s.Fc(11,D,1,1,"ng-template",null,6,s.Gc)),2&e){var t=s.uc(8),i=s.uc(12);s.mc("nzSize",n.size)("nzPlaceHolder",n.placeholder)("formControl",n.control)("nzLoading",n.canLoad&&s.gc(1,14,n.isLoading$))("nzDisabled",n.disabled||s.gc(2,16,n.isLoading$))("nzMode",n.mode)("nzMaxTagCount",n.maxTagCount)("nzDropdownRender",t)("nzShowArrow",!0)("nzNotFoundContent",i),s.Ab(3),s.mc("itemSize",32)("maxBufferPx",160),s.Ab(1),s.mc("ngForOf",s.gc(5,18,n.options$)),s.Ab(2),s.mc("ngIf",n.isSearching)}},directives:[A.d,M.n,M.f,j.b,j.a,U.n,U.o,A.a,_.a,P.b],pipes:[U.b],styles:["[_nghost-%COMP%], [_nghost-%COMP%]   nz-select[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ant-select-arrow{top:48%}.dropdown-footer[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;align-items:center;justify-items:start;padding:4px 14px;color:#1890ff;border-top:1px solid #f0f0f0}.dropdown-footer__total[_ngcontent-%COMP%]{width:100%;grid-column:2/3;display:flex;justify-content:flex-end}.dropdown-footer__spinner[_ngcontent-%COMP%]{display:flex;align-items:center}.dropdown-footer__spinner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:18px}.dropdown-footer[_ngcontent-%COMP%]   nz-spin[_ngcontent-%COMP%]{margin-left:12px}.option[_ngcontent-%COMP%]{display:flex}.option[_ngcontent-%COMP%]   nz-spin[_ngcontent-%COMP%]{margin-left:.9em}.option[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#1890ff;margin-left:1.1em}.searching-option[_ngcontent-%COMP%]{display:flex;align-items:center}.searching-option[_ngcontent-%COMP%]   nz-spin[_ngcontent-%COMP%]{margin-left:.8em}.searching-option__text[_ngcontent-%COMP%]{margin-left:1.2em}"],changeDetection:0}),V)},o5fV:function(e,n,t){"use strict";t.d(n,"a",function(){return m});var o,r=t("mrSG"),a=t("sbGu"),c=t("dEAy"),s=t("CvgI"),l=t("tk/3"),f=t("lJxs"),d=t("pLZG"),b=t("fXoL"),p=((o=function e(n){u(this,e),this.modal=n,this.modal.updateConfig({nzWrapClassName:"vertical-center-modal",nzMaskClosable:!0,nzAutofocus:null,nzOkType:"danger",nzOkText:"Delete",nzClosable:!1})}).\u0275fac=function(e){return new(e||o)(b.Ob(c.c))},o.\u0275cmp=b.Ib({type:o,selectors:[["ng-component"]],decls:0,vars:0,template:function(e,n){},encapsulation:2,changeDetection:0}),o),m=function(){function e(){u(this,e);var n=a.a.getInjector;this.http=n.get(l.c),this.modalService=n.get(c.d)}return i(e,[{key:"getItems",value:function(e,n,t){var i=Object(s.a)(e),o=Object.assign({params:i},t);return this.http.get(n,Object.assign({},o)).pipe(Object(f.a)(function(e){return e}))}},{key:"openModal",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2?arguments[2]:void 0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;return this.modalService.create(Object.assign(Object.assign({},i&&{nzWrapClassName:"vertical-center-modal"}),{nzTitle:e,nzWidth:o+"px",nzContent:t,nzComponentParams:Object.assign({},n)})).afterClose.pipe(Object(d.a)(function(e){return e}))}},{key:"openActionConfirmationModal",value:function(e,n){return this.modalService.confirm({nzContent:n,nzTitle:e,nzOnOk:function(){return!0}}).afterClose.pipe(Object(d.a)(function(e){return e}))}},{key:"deleteItem",value:function(e,n){var t=this;return this.modalService.confirm({nzContent:p,nzTitle:e,nzOnOk:function(e){return Object(r.a)(t,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.modal.config.nzOkLoading=!0,t.next=3,this.deleteItemRequest(n);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}))}}).afterClose.pipe(Object(d.a)(function(e){return e}))}},{key:"deleteItemRequest",value:function(e){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.http.delete(e).toPromise().then(function(e){return"success"===e.status});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},n,this)}))}}]),e}()},pfyX:function(e,n,t){"use strict";t.d(n,"a",function(){return m});var r=t("oaey"),c=t("sbGu"),s=t("lhsU"),l=t("3Pt+"),f=t("1G5W"),d=t("nYR2"),b=t("2Vo4"),p=t("bNXi"),m=function(e){o(t,e);var n=a(t);function t(e){var i;u(this,t),(i=n.call(this)).modal=e,i.loadOptions$=new b.a(null),i.updateAfterClosing=!1;var o=c.a.getInjector;return i.errorService=o.get(s.a),i.notifService=o.get(p.b),i}return i(t,[{key:"closeModal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.updateAfterClosing;this.modal.destroy(e)}},{key:"saveItem",value:function(e,n){var t=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.processing=!0,this.processingClose=e,this.form&&(this.markFormGroupTouched(this.form),this.errorService.form=this.form),n.pipe(Object(f.a)(this.destroyed),Object(d.a)(function(){return t.processing=!1})).subscribe(function(){i&&t.notifService.success(i,""),e?t.closeModal(!0):(t.form&&t.form.reset(t.formInitialValue),t.updateAfterClosing=!0)})}},{key:"onItemSelected",value:function(e,n,t){t.push(e),n.patchValue(null,{emitEvent:!1})}},{key:"onDeleteItemClick",value:function(e,n){this[n]=this[n].filter(function(n){return n.id!==e})}},{key:"markFormGroupTouched",value:function(e){var n=this;Object.values(e.controls).forEach(function(e){e.markAsTouched(),e instanceof l.h&&n.markFormGroupTouched(e)})}},{key:"f",get:function(){return this.form.controls}},{key:"formInitValue",set:function(e){this.formInitialValue=Object.assign({},e)}}]),t}(r.a)}}])}();