!function(){function t(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&e(t,n)}function e(t,n){return(e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,n)}function n(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=i(t);if(e){var o=i(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function c(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{TwVa:function(e,a,i){"use strict";i.d(a,"a",function(){return o}),i.d(a,"g",function(){return s}),i.d(a,"b",function(){return l}),i.d(a,"f",function(){return d}),i.d(a,"c",function(){return p}),i.d(a,"e",function(){return f}),i.d(a,"d",function(){return m}),i.d(a,"h",function(){return b});var o=function(){function t(){r(this,t)}return c(t,[{key:"label",get:function(){return this.device_id}}]),t}(),s=function(){function t(){r(this,t)}return c(t,[{key:"label",get:function(){return"".concat(this.first_name," ").concat(this.middle_name||""," ").concat(this.last_name," - ").concat(this.patient_id)}}]),t}(),l=function(e){t(i,e);var a=n(i);function i(){return r(this,i),a.apply(this,arguments)}return c(i,[{key:"label",get:function(){return"".concat(this.first_name," ").concat(this.last_name," - ").concat(this.npi)}}]),i}(function(){return function t(){r(this,t)}}()),u=i("2Vo4"),d=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r(this,t),this.totalCount=0,this.items$=new u.a(new Array),this.searchChange$=new u.a(null),this.getRequestFuncName=e,this.type=n},p=function t(){r(this,t)},f=function(){function t(){r(this,t)}return c(t,[{key:"label",get:function(){return this.name}}]),t}(),m=function t(e){r(this,t),Object.assign(this,e)},b=function(){function t(){r(this,t)}return c(t,[{key:"label",get:function(){return this.name}}]),t}()},aS3c:function(e,a,i){"use strict";i.r(a),i.d(a,"MeasurementListModule",function(){return at});var o,s,l=i("PCNd"),u=i("tyNb"),d=i("fXoL"),p=i("TwVa"),f={data:{labels:new Array(200).fill(0).map(function(t,e){return e++}),datasets:[{data:[],borderColor:"#1c455f",backgroundColor:"#1c455f",fill:!1,showLine:!1,radius:3,pointHoverRadius:3}]},options:{tooltips:{displayColors:!1,callbacks:{title:function(){return null},beforeLabel:function(t){return"Systolic: "+t.xLabel},label:function(t){return"Diastolic: "+t.yLabel}},enabled:!1,custom:function(t){var e=document.querySelector(".chartjs-tooltip");function n(){return document.createElement("div")}if(e||((e=n()).className="chartjs-tooltip",document.body.appendChild(e)),t.body){e.innerHTML="";var a=t.body,i=n();i.className="chartjs-tooltip__body",Object.values(a[0]).forEach(function(t){var e=n();e.className="chartjs-tooltip__line",e.innerText=t,i.appendChild(e)}),e.appendChild(i);var r=a.length;if(r>1){var o=n();o.className="chartjs-tooltip__more",o.innerText="Click to see ".concat(r-1," more"),e.appendChild(o)}}var c=this._chart.canvas.getBoundingClientRect(),s=e.style;s.left=c.left+window.pageXOffset+t.caretX+10+"px",s.top=c.top+window.pageYOffset+t.caretY-10+"px",s.fontFamily=t._bodyFontFamily,s.fontSize=t.bodyFontSize+"px",s.fontStyle=t._bodyFontStyle,s.padding=t.yPadding+"px "+t.xPadding+"px",s.pointerEvents="none"}},legend:{display:!1},elements:{point:{radius:3}},scales:{xAxes:[{type:"linear",scaleLabel:{display:!0,labelString:"Systolic mm Hg"},ticks:{min:50,max:210}}],yAxes:[{scaleLabel:{display:!0,labelString:"Diastolic mm Hg"},ticks:{min:20,max:140,stepSize:20}}]}}},m=i("Pj3g"),b=i("ofXK"),h=i("xlym"),g=i("TtQc"),y=((o=function t(){r(this,t)}).\u0275mod=d.Mb({type:o}),o.\u0275inj=d.Lb({factory:function(t){return new(t||o)}}),o),v=i("ILvI"),_=i("o5fV"),C=((s=function(e){t(i,e);var a=n(i);function i(){return r(this,i),a.call(this)}return c(i,[{key:"getPatientMeasurements",value:function(t){return this.getItems(t,v.q)}}]),i}(_.a)).\u0275fac=function(t){return new(t||s)},s.\u0275prov=d.Kb({token:s,factory:s.\u0275fac,providedIn:y}),s),w=i("eFim"),x=i("HZS1"),P=i("5vDB"),T=i("1ReC"),O=i("GhNK"),I=i("KebF"),k=i("rMZv"),H=i("0wOC"),A=i("OzZK"),M=i("C2AL"),L=i("ZyQt");function z(t,e){if(1&t&&d.Pb(0,"app-patient-log-records",11),2&t){var n=d.ec();d.mc("limit",3)("allowQueryParams",!1)("patientId",n.patientId)("showPagination",!1)}}var S=function(t){return{systolic:t}},F=function(t){return{diastolic:t}},U=function(t,e){return[t,e]};function j(t,e){if(1&t&&d.Pb(0,"app-tags",18),2&t){var n=d.ec().$implicit;d.mc("data",d.qc(5,U,d.pc(1,S,n.systolic),d.pc(3,F,n.diastolic)))}}var D=function(t,e,n){return[t,e,n]};function q(t,e){if(1&t&&d.Pb(0,"app-tags",19),2&t){var n=d.ec().$implicit;d.mc("data",d.rc(1,D,n.heartbeat_zone_frequency,n.valve_zone_frequency,n.cardiovascular_zone_frequency))}}function N(t,e){if(1&t&&(d.Ub(0,"td"),d.Hc(1),d.Tb()),2&t){var n=d.ec().$implicit;d.Ab(1),d.Ic(n.weight)}}function R(t,e){if(1&t&&(d.Ub(0,"td"),d.Hc(1),d.Tb()),2&t){var n=d.ec().$implicit;d.Ab(1),d.Ic(n.spo2)}}function $(t,e){if(1&t&&(d.Ub(0,"td"),d.Hc(1),d.Tb()),2&t){var n=d.ec().$implicit;d.Ab(1),d.Ic(n.blood_glucose)}}function E(t,e){if(1&t&&(d.Ub(0,"td"),d.Hc(1),d.Tb()),2&t){var n=d.ec().$implicit;d.Ab(1),d.Ic(n.temperature)}}var Q=function(t){return["measurement-details",t,"blood-pressure"]},B=function(t){return{measurement:t}};function K(t,e){if(1&t&&(d.Ub(0,"a",20),d.Hc(1,"BP wave"),d.Tb()),2&t){var n=d.ec().$implicit;d.mc("routerLink",d.pc(2,Q,n.id))("state",d.pc(4,B,n))}}var V=function(t){return{"test-measurement":t}};function X(t,e){if(1&t&&(d.Ub(0,"tr",12),d.Ub(1,"td"),d.Hc(2),d.fc(3,"date"),d.Tb(),d.Ub(4,"td"),d.Fc(5,j,1,8,"app-tags",13),d.Tb(),d.Ub(6,"td"),d.Hc(7),d.Tb(),d.Ub(8,"td"),d.Hc(9),d.Tb(),d.Ub(10,"td"),d.Hc(11),d.Tb(),d.Ub(12,"td"),d.Fc(13,q,1,5,"app-tags",14),d.Tb(),d.Ub(14,"td"),d.Hc(15),d.Tb(),d.Ub(16,"td"),d.Hc(17),d.Tb(),d.Ub(18,"td"),d.Hc(19),d.Tb(),d.Fc(20,N,2,1,"td",15),d.Fc(21,R,2,1,"td",15),d.Fc(22,$,2,1,"td",15),d.Fc(23,E,2,1,"td",15),d.Ub(24,"td",16),d.Fc(25,K,2,6,"a",17),d.Tb(),d.Tb()),2&t){var n=e.$implicit,a=d.ec();d.mc("ngClass",d.pc(19,V,n.test))("title",n.test?"Test measurement":""),d.Ab(2),d.Ic(d.hc(3,16,n.measurement_date,"short")),d.Ab(3),d.mc("ngIf",null!=n.systolic&&null!=n.diastolic),d.Ab(2),d.Ic(n.systolic),d.Ab(2),d.Ic(n.diastolic),d.Ab(2),d.Ic(n.pulse),d.Ab(2),d.mc("ngIf",null!=n.heartbeat_zone_frequency&&null!=n.valve_zone_frequency&&null!=n.cardiovascular_zone_frequency),d.Ab(2),d.Ic(n.heartbeat_zone_frequency),d.Ab(2),d.Ic(n.valve_zone_frequency),d.Ab(2),d.Ic(n.cardiovascular_zone_frequency),d.Ab(1),d.mc("ngIf",!a.extraMeasurementsHidden.weight),d.Ab(1),d.mc("ngIf",!a.extraMeasurementsHidden.spo2),d.Ab(1),d.mc("ngIf",!a.extraMeasurementsHidden.blood_glucose),d.Ab(1),d.mc("ngIf",!a.extraMeasurementsHidden.temperature),d.Ab(2),d.mc("ngIf",!(n.weight||n.blood_glucose||n.spo2))}}function Z(t,e){if(1&t&&(d.Ub(0,"div"),d.Pb(1,"nz-tag",21),d.Ub(2,"p"),d.Hc(3),d.Tb(),d.Ub(4,"p",22),d.Hc(5),d.Tb(),d.Tb()),2&t){var n=e.$implicit;d.Ab(1),d.Cc("border-color",n.color),d.Ab(2),d.Ic(n.title),d.Ab(2),d.Ic(n.value)}}var J,Y,G,W=function(){return["doctor"]},tt=[{path:"",component:(J=function(e){t(i,e);var a=n(i);function i(t,e,n,o,c){var s;r(this,i),(s=a.call(this)).router=t,s.activatedRoute=e,s.measurementListService=n,s.locale=o,s.trackingTimeService=c,s.displayColumns=[{name:"Measurement date",filterKey:"measurement_date",customFilter:"date",sort:!0,sortOrder:null,filter:!0,visible:!1},{name:"BP color"},{name:"Systolic"},{name:"Diastolic"},{name:"Pulse"},{name:"Heart spectrum"},{name:"I_1"},{name:"I_2"},{name:"I_3"},{name:h.a.weight,hidden:!0},{name:h.a.spo2,hidden:!0},{name:h.a.blood_glucose,hidden:!0},{name:h.a.temperature,hidden:!0},{name:""}],s.chartConfig={aside:[{title:"Hypertension Severe",color:g.a.redSevere,value:"200/120"},{title:"Hypertension Moderate",color:g.a.redModerate,value:"180/110"},{title:"Hypertension Mild",color:g.a.redMild,value:"160/100"},{title:"Borderline High",color:g.a.yellow,value:"140/90"},{title:"High Normal",color:g.a.greenHighNormal,value:"130/85"},{title:"Normal",color:g.a.greenNormal,value:"120/80"},{title:"Low Normal",color:g.a.greenLowNormal,value:"100/65"},{title:"Hypotension Low",color:g.a.greenLow,value:"90/60"}],chart:f},s.extraMeasurementsHidden={};var l=s.chartConfig.chart.options.tooltips.callbacks;return l=Object.assign(Object.assign({},l),{afterLabel:function(t){return new b.e(s.locale).transform(s.items[t.index].measurement_date,"short")}}),s.chartConfig.chart.options.tooltips.callbacks=l,s.patientId=s.activatedRoute.snapshot.params.patientId,s}return c(i,[{key:"onBackClick",value:function(){this.router.navigate(["/"])}},{key:"getPatientMeasurements",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params;this.getItems(this.measurementListService.getPatientMeasurements(e)).subscribe(function(){t.addColumns();var e=t.items.filter(function(t){return!t.test}).map(function(t){return{x:t.systolic,y:t.diastolic}});t.chartConfig.chart.data.datasets.forEach(function(t){return t.data=e})})}},{key:"onQueryParamsChange",value:function(t){this.params=t,this.params.patients=this.patientId,this.getPatientMeasurements()}},{key:"addColumns",value:function(){var t=this;Object.keys(h.a).filter(function(t){return"blood_pressure_metrics"!==t}).forEach(function(e){var n=!t.items.some(function(t){return t[e]});t.extraMeasurementsHidden[e]=n,t.displayColumns.find(function(t){return t.name===h.a[e]}).hidden=n})}},{key:"onChartPointClickEvt",value:function(t){var e=this.items[t];this.expandedTooltipData=null;var n=this.items.filter(function(t){return t.diastolic===e.diastolic&&t.systolic===e.systolic});1!==n.length?this.createExpandedTooltipData(e,n):window.open("".concat(this.router.url,"/measurement-details/").concat(e.id,"/blood-pressure"),"_blank")}},{key:"createExpandedTooltipData",value:function(t,e){var n=this;this.expandedTooltipData=new p.c,this.expandedTooltipData.totalCount=e.length,this.expandedTooltipData.value=["Diastolic: "+t.diastolic,"Systolic: "+t.systolic],this.expandedTooltipData.links=e.map(function(t){return{href:"".concat(n.router.url,"/measurement-details/").concat(t.id,"/blood-pressure"),displayName:new b.e(n.locale).transform(t.measurement_date,"short")}})}}]),i}(m.a),J.\u0275fac=function(t){return new(t||J)(d.Ob(u.e),d.Ob(u.a),d.Ob(C),d.Ob(d.u),d.Ob(w.a))},J.\u0275cmp=d.Ib({type:J,selectors:[["ng-component"]],features:[d.xb],decls:12,vars:16,consts:[[3,"limit","allowQueryParams","patientId","showPagination",4,"appRolesAccess"],["nzText","Patient measurements","nzOrientation","left",1,"large"],[3,"data","displayColumns","totalCount","isLoading$","queryParamsChange"],[3,"ngClass","title",4,"ngFor","ngForOf"],["nzText","Relating of measurements to the World Health Organization blood pressure standards","nzOrientation","left",1,"large"],[1,"chart"],[1,"chart__wrapper"],[1,"chart__container"],["annotationType","bpStandartsAnnotation",3,"data","options","height","isLoading","pointIsClickable","expandedTooltipData","chartPointClickEvt"],[1,"chart__aside"],[4,"ngFor","ngForOf"],[3,"limit","allowQueryParams","patientId","showPagination"],[3,"ngClass","title"],["type","bloodPressure",3,"data",4,"ngIf"],["type","heartSpectrum",3,"data",4,"ngIf"],[4,"ngIf"],[1,"table-cell__actions"],["nz-button","","nzType","link","nzSize","small",3,"routerLink","state",4,"ngIf"],["type","bloodPressure",3,"data"],["type","heartSpectrum",3,"data"],["nz-button","","nzType","link","nzSize","small",3,"routerLink","state"],[1,"chart__tag"],[1,"end"]],template:function(t,e){1&t&&(d.Fc(0,z,1,4,"app-patient-log-records",0),d.Pb(1,"nz-divider",1),d.Ub(2,"app-table-wrapper",2),d.bc("queryParamsChange",function(t){return e.onQueryParamsChange(t)}),d.Fc(3,X,26,21,"tr",3),d.Tb(),d.Pb(4,"nz-divider",4),d.Ub(5,"div",5),d.Ub(6,"div",6),d.Ub(7,"div",7),d.Ub(8,"app-chart",8),d.bc("chartPointClickEvt",function(t){return e.onChartPointClickEvt(t)}),d.fc(9,"async"),d.Tb(),d.Ub(10,"div",9),d.Fc(11,Z,6,4,"div",10),d.Tb(),d.Tb(),d.Tb(),d.Tb()),2&t&&(d.mc("appRolesAccess",d.oc(15,W)),d.Ab(2),d.mc("data",e.items)("displayColumns",e.displayColumns)("totalCount",e.totalCount)("isLoading$",e.isLoading$.asObservable()),d.Ab(1),d.mc("ngForOf",e.items),d.Ab(5),d.mc("data",e.chartConfig.chart.data)("options",e.chartConfig.chart.options)("height",400)("isLoading",d.gc(9,13,e.isLoading$))("pointIsClickable",!0)("expandedTooltipData",e.expandedTooltipData),d.Ab(3),d.mc("ngForOf",e.chartConfig.aside))},directives:[x.a,P.a,T.a,b.n,O.a,I.a,k.i,b.m,k.b,b.o,H.a,A.a,u.g,M.a,L.a],pipes:[b.b,b.e],styles:[".chart[_ngcontent-%COMP%]{display:flex;margin-top:32px}.chart__wrapper[_ngcontent-%COMP%]{display:inline-block;max-width:1280px;width:calc(100% - 48px)}.chart__container[_ngcontent-%COMP%]{display:grid;grid-template-columns:70% 265px;gap:16px}.chart__aside[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:4px}.chart__aside[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:grid;grid-template-columns:40px 1fr 1fr;gap:8px;align-items:center;margin-bottom:8px}.chart__aside[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;white-space:nowrap}.chart__aside[_ngcontent-%COMP%]   p.end[_ngcontent-%COMP%]{justify-self:end}.chart__tag[_ngcontent-%COMP%]{width:0;height:0;border:8px solid}"]}),J)}],et=((Y=function t(){r(this,t)}).\u0275mod=d.Mb({type:Y}),Y.\u0275inj=d.Lb({factory:function(t){return new(t||Y)},imports:[[u.h.forChild(tt)],u.h]}),Y),nt=i("Crpy"),at=((G=function t(){r(this,t)}).\u0275mod=d.Mb({type:G}),G.\u0275inj=d.Lb({factory:function(t){return new(t||G)},imports:[[l.a,et,y,nt.a]]}),G)}}])}();