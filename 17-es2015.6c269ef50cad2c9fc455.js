(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{LPxp:function(e,t,n){"use strict";n.r(t),n.d(t,"PracticeListModule",function(){return G});var i=n("PCNd"),r=n("tyNb"),o=n("Pj3g"),c=n("mCNh"),s=n("1G5W"),a=n("eIep"),l=n("fXoL"),b=n("ILvI"),u=n("o5fV");let m=(()=>{class e{}return e.\u0275mod=l.Mb({type:e}),e.\u0275inj=l.Lb({factory:function(t){return new(t||e)}}),e})();var p=n("3Pt+"),d=n("pfyX"),f=n("vxZU");let h=(()=>{class e extends f.a{constructor(){super()}edit(e,t){return this.editItemRequest(e,"Practice updated successfully",Object(b.D)(t))}create(e){return this.createItemRequest(e,"Practice created successfully",b.C)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=l.Kb({token:e,factory:e.\u0275fac,providedIn:m}),e})();var z=n("dEAy"),g=n("ocnv"),v=n("B+r4"),T=n("PTRe"),C=n("5vDB"),y=n("VdD3"),U=n("ofXK");function P(e,t){1&e&&(l.Sb(0),l.Hc(1," This field is required "),l.Rb())}function A(e,t){if(1&e&&(l.Sb(0),l.Hc(1),l.Rb()),2&e){const e=l.ec().$implicit;l.Ab(1),l.Jc(" ",e.errors.validationError," ")}}function I(e,t){if(1&e&&(l.Fc(0,P,2,0,"ng-container",18),l.Fc(1,A,2,1,"ng-container",18)),2&e){const e=t.$implicit;l.mc("ngIf",e.hasError("required")),l.Ab(1),l.mc("ngIf",e.hasError("validationError"))}}let E=(()=>{class e extends d.a{constructor(e,t){super(e),this.crudService=t,this.form=new p.h({name:new p.e("",[p.s.required]),email:new p.e("",[p.s.required,p.s.email]),phone:new p.e("",[p.s.required]),billing_address:new p.h({city:new p.e("",[p.s.required]),company:new p.e(""),postal_code:new p.e("",[p.s.required]),state:new p.e("",[p.s.required]),street1:new p.e("",[p.s.required]),street2:new p.e(""),street3:new p.e("")})})}onSaveClick(e){var t;const n=null===(t=this.practice)||void 0===t?void 0:t.id,i=this.form.value,r=n?this.crudService.edit(i,n):this.crudService.create(i);this.saveItem(e,r)}ngOnInit(){if(this.practice)for(const e in this.practice)this.practice[e]&&Object.prototype.hasOwnProperty.call(this.f,e)&&this.f[e].patchValue(this.practice[e],{emitEvent:!1});this.formInitValue=this.form.getRawValue()}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(z.c),l.Ob(h))},e.\u0275cmp=l.Ib({type:e,selectors:[["ng-component"]],features:[l.zb([h]),l.xb],decls:56,vars:25,consts:[["nz-form","",1,"form",3,"formGroup"],["nzRequired","",3,"nzSpan"],[3,"nzErrorTip"],["nz-input","","formControlName","name","autocomplete",""],["nz-input","","formControlName","email","type","email"],["nz-input","","formControlName","phone"],["nzText","Billing address","nzOrientation","left"],["formGroupName","billing_address"],["formControlName","street1","nz-input",""],[3,"nzSpan"],["formControlName","street2","nz-input",""],["formControlName","street3","nz-input",""],["formControlName","city","nz-input",""],["formControlName","state","nz-input",""],["formControlName","postal_code","nz-input",""],["formControlName","company","nz-input",""],[3,"processing","processingClose","isEditing","formValid","saveEvent","closeEvent"],["errorTpl",""],[4,"ngIf"]],template:function(e,t){if(1&e&&(l.Ub(0,"form",0),l.Ub(1,"nz-form-item"),l.Ub(2,"nz-form-label",1),l.Hc(3,"Name"),l.Tb(),l.Ub(4,"nz-form-control",2),l.Pb(5,"input",3),l.Tb(),l.Tb(),l.Ub(6,"nz-form-item"),l.Ub(7,"nz-form-label",1),l.Hc(8,"Email"),l.Tb(),l.Ub(9,"nz-form-control",2),l.Pb(10,"input",4),l.Tb(),l.Tb(),l.Ub(11,"nz-form-item"),l.Ub(12,"nz-form-label",1),l.Hc(13,"Phone"),l.Tb(),l.Ub(14,"nz-form-control",2),l.Pb(15,"input",5),l.Tb(),l.Tb(),l.Pb(16,"nz-divider",6),l.Ub(17,"div",7),l.Ub(18,"nz-form-item"),l.Ub(19,"nz-form-label",1),l.Hc(20,"Street 1"),l.Tb(),l.Ub(21,"nz-form-control",2),l.Pb(22,"input",8),l.Tb(),l.Tb(),l.Ub(23,"nz-form-item"),l.Ub(24,"nz-form-label",9),l.Hc(25,"Street 2"),l.Tb(),l.Ub(26,"nz-form-control",2),l.Pb(27,"input",10),l.Tb(),l.Tb(),l.Ub(28,"nz-form-item"),l.Ub(29,"nz-form-label",9),l.Hc(30,"Street 3"),l.Tb(),l.Ub(31,"nz-form-control",2),l.Pb(32,"input",11),l.Tb(),l.Tb(),l.Ub(33,"nz-form-item"),l.Ub(34,"nz-form-label",1),l.Hc(35,"City"),l.Tb(),l.Ub(36,"nz-form-control",2),l.Pb(37,"input",12),l.Tb(),l.Tb(),l.Ub(38,"nz-form-item"),l.Ub(39,"nz-form-label",1),l.Hc(40,"State"),l.Tb(),l.Ub(41,"nz-form-control",2),l.Pb(42,"input",13),l.Tb(),l.Tb(),l.Ub(43,"nz-form-item"),l.Ub(44,"nz-form-label",1),l.Hc(45,"ZIP"),l.Tb(),l.Ub(46,"nz-form-control",2),l.Pb(47,"input",14),l.Tb(),l.Tb(),l.Ub(48,"nz-form-item"),l.Ub(49,"nz-form-label",9),l.Hc(50,"Company"),l.Tb(),l.Ub(51,"nz-form-control",2),l.Pb(52,"input",15),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(53,"app-modal-footer",16),l.bc("saveEvent",function(e){return t.onSaveClick(e)})("closeEvent",function(){return t.closeModal()}),l.Tb(),l.Fc(54,I,2,2,"ng-template",null,17,l.Gc)),2&e){const e=l.uc(55);l.mc("formGroup",t.form),l.Ab(2),l.mc("nzSpan",5),l.Ab(2),l.mc("nzErrorTip",e),l.Ab(3),l.mc("nzSpan",5),l.Ab(2),l.mc("nzErrorTip",e),l.Ab(3),l.mc("nzSpan",5),l.Ab(2),l.mc("nzErrorTip",e),l.Ab(5),l.mc("nzSpan",5),l.Ab(2),l.mc("nzErrorTip",e),l.Ab(3),l.mc("nzSpan",5),l.Ab(2),l.mc("nzErrorTip",e),l.Ab(3),l.mc("nzSpan",5),l.Ab(2),l.mc("nzErrorTip",e),l.Ab(3),l.mc("nzSpan",5),l.Ab(2),l.mc("nzErrorTip",e),l.Ab(3),l.mc("nzSpan",5),l.Ab(2),l.mc("nzErrorTip",e),l.Ab(3),l.mc("nzSpan",5),l.Ab(2),l.mc("nzErrorTip",e),l.Ab(3),l.mc("nzSpan",5),l.Ab(2),l.mc("nzErrorTip",e),l.Ab(2),l.mc("processing",t.processing)("processingClose",t.processingClose)("isEditing",!(null==t.practice||!t.practice.id))("formValid",t.form.valid)}},directives:[p.t,p.o,g.b,p.i,v.c,g.c,v.a,g.d,g.a,T.b,p.d,p.n,p.g,C.a,p.j,y.a,U.o],encapsulation:2}),e})(),O=(()=>{class e extends u.a{constructor(){super()}getPracticeList(e){return this.getItems(e,b.C)}addPractice(){return this.openModal("Add new practice",void 0,E)}editPractice(e){return this.openModal("Edit practice "+e.name,{practice:e},E)}deletePractice(e){return this.deleteItem(`Are you sure you want to delete practice ${e.name}?`,Object(b.D)(e.id))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=l.Kb({token:e,factory:e.\u0275fac,providedIn:m}),e})();var k=n("jPNr"),w=n("OzZK"),S=n("RwU8"),j=n("C2AL"),L=n("1ReC"),x=n("rMZv"),V=n("bYvm"),H=n("Nqz0"),N=n("FwiY"),F=n("Q8cG");function M(e,t){if(1&e){const e=l.Vb();l.Ub(0,"tr"),l.Ub(1,"td"),l.Hc(2),l.Tb(),l.Ub(3,"td"),l.Pb(4,"app-address",5),l.Tb(),l.Ub(5,"td"),l.Hc(6),l.Tb(),l.Ub(7,"td"),l.Hc(8),l.Tb(),l.Ub(9,"td",6),l.Ub(10,"div"),l.Ub(11,"button",7),l.bc("click",function(e){return e.stopPropagation()}),l.Pb(12,"i",8),l.Tb(),l.Ub(13,"nz-dropdown-menu",null,9),l.Ub(15,"ul",10),l.Ub(16,"button",11),l.bc("click",function(){l.vc(e);const n=t.$implicit;return l.ec().onEditClick(n)}),l.Ub(17,"div",12),l.Pb(18,"i",13),l.Ub(19,"span"),l.Hc(20,"Edit"),l.Tb(),l.Tb(),l.Tb(),l.Ub(21,"button",11),l.bc("click",function(){l.vc(e);const n=t.$implicit;return l.ec().onDeleteClick(n)}),l.Ub(22,"div",14),l.Pb(23,"i",15),l.Ub(24,"span"),l.Hc(25,"Delete"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()}if(2&e){const e=t.$implicit,n=l.uc(14);l.Ab(2),l.Ic(e.name),l.Ab(2),l.mc("address",e.billing_address),l.Ab(2),l.Ic(e.phone),l.Ab(2),l.Ic(e.email),l.Ab(3),l.mc("nzDropdownMenu",n)}}const $=[{path:"",component:(()=>{class e extends o.a{constructor(e){super(),this.practiceListService=e,this.displayColumns=[{name:"Name",filterKey:"name",customFilter:"search",filter:!0,visible:!1},{name:"Billing address",filterKey:"billing_address",customFilter:"search",filter:!0,visible:!1},{name:"Phone",filterKey:"phone",customFilter:"search",filter:!0,visible:!1},{name:"Email",filterKey:"email",customFilter:"search",filter:!0,visible:!1},{name:""}]}getPractices(e=this.params){return this.getItems(this.practiceListService.getPracticeList(e)).pipe(Object(s.a)(this.destroyed))}get practicesPipe(){return Object(c.a)(Object(a.a)(()=>this.getPractices()))}onAddClick(){this.practiceListService.addPractice().pipe(this.practicesPipe).subscribe()}onEditClick(e){this.practiceListService.editPractice(e).pipe(this.practicesPipe).subscribe()}onDeleteClick(e){this.practiceListService.deletePractice(e).pipe(Object(a.a)(()=>1===this.items.length?this.goToPrevPage():this.getPractices())).subscribe()}onQueryParamsChange(e){this.params=e,this.getPractices().subscribe()}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(O))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-practice-list"]],features:[l.xb],decls:7,vars:6,consts:[[1,"panel"],["nzTitle","Practice list",1,"page-header"],["nz-button","","nzType","primary",3,"click"],[3,"data","totalCount","isLoading$","pageIndex$","displayColumns","queryParamsChange"],[4,"ngFor","ngForOf"],[3,"address"],[1,"table-cell__actions"],["nz-button","","nzType","link","nzTrigger","click","nz-dropdown","",3,"nzDropdownMenu","click"],["nz-icon","","nzType","icon:more","nzTheme","outline"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",1,"btn--menu-item",3,"click"],[1,"ant-btn-sm","ant-btn-link","ant-btn"],["nz-icon","","nzType","edit","nzTheme","outline"],[1,"ant-btn-sm","ant-btn-link","ant-btn","ant-btn-dangerous"],["nz-icon","","nzType","delete","nzTheme","outline"]],template:function(e,t){1&e&&(l.Ub(0,"div",0),l.Ub(1,"nz-page-header",1),l.Ub(2,"nz-page-header-extra"),l.Ub(3,"button",2),l.bc("click",function(){return t.onAddClick()}),l.Hc(4,"Add practice"),l.Tb(),l.Tb(),l.Tb(),l.Ub(5,"app-table-wrapper",3),l.bc("queryParamsChange",function(e){return t.onQueryParamsChange(e)}),l.Fc(6,M,26,5,"tr",4),l.Tb(),l.Tb()),2&e&&(l.Ab(5),l.mc("data",t.items)("totalCount",t.totalCount)("isLoading$",t.isLoading$.asObservable())("pageIndex$",t.pageIndex$)("displayColumns",t.displayColumns),l.Ab(1),l.mc("ngForOf",t.items))},directives:[k.a,k.c,w.a,S.a,j.a,L.a,U.n,x.i,x.b,V.a,H.d,H.b,N.a,H.e,F.c,F.d],styles:[""]}),e})()}];let q=(()=>{class e{}return e.\u0275mod=l.Mb({type:e}),e.\u0275inj=l.Lb({factory:function(t){return new(t||e)},imports:[[r.h.forChild($)],r.h]}),e})(),G=(()=>{class e{}return e.\u0275mod=l.Mb({type:e}),e.\u0275inj=l.Lb({factory:function(t){return new(t||e)},imports:[[i.a,q,m]]}),e})()},Pj3g:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var i=n("fXoL"),r=n("oaey"),o=n("nYR2"),c=n("1G5W"),s=n("lJxs"),a=n("2Vo4"),l=n("EY2u");class b extends r.a{constructor(){super(),this.isLoading$=new a.a(!0),this.pageIndex$=new i.n,this.params=null}stopLoading(){return this.isLoading$.next(!1),l.a}goToPrevPage(){return this.pageIndex$.emit(),l.a}getItems(e){return this.isLoading$.next(!0),e.pipe(Object(o.a)(()=>this.isLoading$.next(!1)),Object(c.a)(this.destroyed),Object(s.a)(e=>(this.items=e.items,this.totalCount=e.total_count,e)))}}},VdD3:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var i=n("fXoL"),r=n("dEAy"),o=n("OzZK"),c=n("RwU8"),s=n("C2AL"),a=n("ofXK");function l(e,t){if(1&e){const e=i.Vb();i.Ub(0,"button",5),i.bc("click",function(){return i.vc(e),i.ec(2).onSaveClick(!1)}),i.Hc(1,"Save & Add another"),i.Tb()}if(2&e){const e=i.ec(2);i.mc("disabled",!e.formValid)("nzLoading",e.processing&&!e.processingClose)}}function b(e,t){1&e&&(i.Ub(0,"span"),i.Hc(1,"\xa0& Close"),i.Tb())}function u(e,t){if(1&e){const e=i.Vb();i.Sb(0),i.Ub(1,"button",1),i.bc("click",function(){return i.vc(e),i.ec().closeModal()}),i.Hc(2,"Cancel"),i.Tb(),i.Fc(3,l,2,2,"button",2),i.Ub(4,"button",3),i.bc("click",function(){return i.vc(e),i.ec().onSaveClick(!0)}),i.Hc(5,"Save"),i.Fc(6,b,2,0,"span",4),i.Tb(),i.Rb()}if(2&e){const e=i.ec();i.Ab(3),i.mc("ngIf",!e.isEditing),i.Ab(1),i.mc("disabled",!e.formValid)("nzLoading",e.processing&&e.processingClose),i.Ab(2),i.mc("ngIf",!e.isEditing)}}let m=(()=>{class e{constructor(){this.saveEvent=new i.n,this.closeEvent=new i.n,this.formValid=!0}closeModal(){this.closeEvent.emit()}onSaveClick(e){this.saveEvent.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Ib({type:e,selectors:[["app-modal-footer"]],inputs:{processing:"processing",processingClose:"processingClose",formValid:"formValid",isEditing:"isEditing"},outputs:{saveEvent:"saveEvent",closeEvent:"closeEvent"},decls:1,vars:0,consts:[[4,"nzModalFooter"],["nz-button","",3,"click"],["nz-button","","nzType","default",3,"disabled","nzLoading","click",4,"ngIf"],["nz-button","","nzType","primary",3,"disabled","nzLoading","click"],[4,"ngIf"],["nz-button","","nzType","default",3,"disabled","nzLoading","click"]],template:function(e,t){1&e&&i.Fc(0,u,7,4,"ng-container",0)},directives:[r.a,o.a,c.a,s.a,a.o],encapsulation:2}),e})()},o5fV:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var i=n("mrSG"),r=n("sbGu"),o=n("dEAy"),c=n("CvgI"),s=n("tk/3"),a=n("lJxs"),l=n("pLZG"),b=n("fXoL");let u=(()=>{class e{constructor(e){this.modal=e,this.modal.updateConfig({nzWrapClassName:"vertical-center-modal",nzMaskClosable:!0,nzAutofocus:null,nzOkType:"danger",nzOkText:"Delete",nzClosable:!1})}}return e.\u0275fac=function(t){return new(t||e)(b.Ob(o.c))},e.\u0275cmp=b.Ib({type:e,selectors:[["ng-component"]],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),e})();class m{constructor(){const e=r.a.getInjector;this.http=e.get(s.c),this.modalService=e.get(o.d)}getItems(e,t,n){const i=Object(c.a)(e),r=Object.assign({params:i},n);return this.http.get(t,Object.assign({},r)).pipe(Object(a.a)(e=>e))}openModal(e,t=null,n,i=!0,r=600){return this.modalService.create(Object.assign(Object.assign({},i&&{nzWrapClassName:"vertical-center-modal"}),{nzTitle:e,nzWidth:r+"px",nzContent:n,nzComponentParams:Object.assign({},t)})).afterClose.pipe(Object(l.a)(e=>e))}openActionConfirmationModal(e,t){return this.modalService.confirm({nzContent:t,nzTitle:e,nzOnOk:()=>!0}).afterClose.pipe(Object(l.a)(e=>e))}deleteItem(e,t){return this.modalService.confirm({nzContent:u,nzTitle:e,nzOnOk:e=>Object(i.a)(this,void 0,void 0,function*(){return e.modal.config.nzOkLoading=!0,yield this.deleteItemRequest(t)})}).afterClose.pipe(Object(l.a)(e=>e))}deleteItemRequest(e){return Object(i.a)(this,void 0,void 0,function*(){return yield this.http.delete(e).toPromise().then(e=>"success"===e.status)})}}},pfyX:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("oaey"),r=n("sbGu"),o=n("lhsU"),c=n("3Pt+"),s=n("1G5W"),a=n("nYR2"),l=n("2Vo4"),b=n("bNXi");class u extends i.a{constructor(e){super(),this.modal=e,this.loadOptions$=new l.a(null),this.updateAfterClosing=!1;const t=r.a.getInjector;this.errorService=t.get(o.a),this.notifService=t.get(b.b)}get f(){return this.form.controls}set formInitValue(e){this.formInitialValue=Object.assign({},e)}closeModal(e=this.updateAfterClosing){this.modal.destroy(e)}saveItem(e,t,n=null){this.processing=!0,this.processingClose=e,this.form&&(this.markFormGroupTouched(this.form),this.errorService.form=this.form),t.pipe(Object(s.a)(this.destroyed),Object(a.a)(()=>this.processing=!1)).subscribe(()=>{n&&this.notifService.success(n,""),e?this.closeModal(!0):(this.form&&this.form.reset(this.formInitialValue),this.updateAfterClosing=!0)})}onItemSelected(e,t,n){n.push(e),t.patchValue(null,{emitEvent:!1})}onDeleteItemClick(e,t){this[t]=this[t].filter(t=>t.id!==e)}markFormGroupTouched(e){Object.values(e.controls).forEach(e=>{e.markAsTouched(),e instanceof c.h&&this.markFormGroupTouched(e)})}}}}]);