(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{FfMZ:function(t,n,e){"use strict";e.r(n),e.d(n,"PasswordSettingModule",function(){return Y});var i=e("PCNd"),o=e("tyNb"),r=e("3Pt+"),s=e("oaey"),c=e("PqYM"),a=e("1G5W"),p=e("nYR2"),u=e("fXoL");let d=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=u.Ib({type:t,selectors:[["ng-component"]],decls:2,vars:0,template:function(t,n){1&t&&(u.Ub(0,"div"),u.Hc(1,"Logging out..."),u.Tb())},styles:["div[_ngcontent-%COMP%] {\n      padding-bottom: 24px;\n      text-align: center;\n    }"]}),t})();var l=e("lhsU"),m=e("ILvI");let b=(()=>{class t{}return t.\u0275mod=u.Mb({type:t}),t.\u0275inj=u.Lb({factory:function(n){return new(n||t)}}),t})();var g=e("tk/3");let f=(()=>{class t{constructor(t){this.http=t}setPassword(t,n){return this.http.post(m.a,{password:t,identifier:n})}}return t.\u0275fac=function(n){return new(n||t)(u.Yb(g.c))},t.\u0275prov=u.Kb({token:t,factory:t.\u0275fac,providedIn:b}),t})();var w=e("dEAy"),h=e("qXBG"),_=e("yW9e"),O=e("ofXK"),v=e("eHCX"),y=e("ocnv"),T=e("B+r4"),P=e("C2AL"),z=e("PTRe"),C=e("OzZK"),M=e("RwU8");function S(t,n){1&t&&(u.Ub(0,"div",7),u.Ub(1,"h1"),u.Hc(2,"Welcome to OSTAR portal"),u.Tb(),u.Ub(3,"p",8),u.Hc(4,"Please set a password to activate your account"),u.Tb(),u.Tb())}function U(t,n){}function F(t,n){1&t&&u.Fc(0,U,0,0,"ng-template")}const x=function(t){return{$implicit:t}};function L(t,n){if(1&t&&u.Fc(0,F,1,0,void 0,18),2&t){const t=n.$implicit;u.ec(2);const e=u.uc(7);u.mc("ngTemplateOutlet",e)("ngTemplateOutletContext",u.pc(2,x,t))}}function I(t,n){1&t&&(u.Sb(0),u.Hc(1," Passwords do not match "),u.Rb())}function A(t,n){}function E(t,n){1&t&&u.Fc(0,A,0,0,"ng-template")}function H(t,n){if(1&t&&(u.Fc(0,I,2,0,"ng-container",19),u.Fc(1,E,1,0,void 0,18)),2&t){const t=n.$implicit;u.ec(2);const e=u.uc(7);u.mc("ngIf",t.hasError("passwordNotMatch")&&!t.hasError("required")),u.Ab(1),u.mc("ngTemplateOutlet",e)("ngTemplateOutletContext",u.pc(3,x,t))}}function j(t,n){if(1&t){const t=u.Vb();u.Ub(0,"form",9),u.bc("ngSubmit",function(){return u.vc(t),u.ec().submitForm()}),u.Ub(1,"nz-form-item"),u.Ub(2,"nz-form-label"),u.Hc(3,"Password"),u.Tb(),u.Ub(4,"nz-form-control",10),u.Ub(5,"nz-input-group",11),u.Pb(6,"input",12),u.Fc(7,L,1,4,"ng-template",null,13,u.Gc),u.Tb(),u.Tb(),u.Tb(),u.Ub(9,"nz-form-item"),u.Ub(10,"nz-form-label"),u.Hc(11,"Confirm password"),u.Tb(),u.Ub(12,"nz-form-control",14),u.Ub(13,"nz-input-group",11),u.Ub(14,"input",15),u.bc("blur",function(){return u.vc(t),u.ec().confirmationPasswordUpdateValidity()}),u.Tb(),u.Fc(15,H,2,5,"ng-template",null,16,u.Gc),u.Tb(),u.Tb(),u.Tb(),u.Ub(17,"button",17),u.Hc(18,"Continue"),u.Tb(),u.Tb()}if(2&t){const t=u.uc(8),n=u.uc(16),e=u.ec();u.mc("formGroup",e.pwSettingForm),u.Ab(4),u.mc("nzErrorTip",t),u.Ab(8),u.mc("nzErrorTip",n),u.Ab(5),u.mc("nzType","primary")("disabled",!e.pwSettingForm.valid)("nzLoading",e.isLoading)}}function V(t,n){if(1&t&&(u.Ub(0,"div",20),u.Ub(1,"p"),u.Hc(2),u.Tb(),u.Ub(3,"p"),u.Hc(4," If you are not redirected, please select this "),u.Ub(5,"a",21),u.Hc(6,"here"),u.Tb(),u.Hc(7,". "),u.Tb(),u.Tb()),2&t){const t=u.ec();u.Ab(2),u.Jc(" Your account confirmed successfully. You will be automatically redirected to the login page in ",t.timeLeft," seconds. ")}}function q(t,n){1&t&&(u.Sb(0),u.Hc(1," This field is required "),u.Rb())}function R(t,n){if(1&t&&(u.Sb(0),u.Hc(1),u.Rb()),2&t){const t=u.ec().$implicit;u.Ab(1),u.Jc(" ",t.errors.validationError," ")}}function G(t,n){if(1&t&&(u.Fc(0,q,2,0,"ng-container",19),u.Fc(1,R,2,1,"ng-container",19)),2&t){const t=n.$implicit;u.mc("ngIf",t.hasError("required")),u.Ab(1),u.mc("ngIf",t.hasError("validationError"))}}const k=[{path:"",component:(()=>{class t extends s.a{constructor(t,n,e,i,o,r){super(),this.activatedRoute=t,this.errorService=n,this.passwordSettingService=e,this.router=i,this.modalService=o,this.authService=r,this.isLoading=!1,this.timeLeft=0}get f(){return this.pwSettingForm.controls}startTimer(){const t=Object(c.a)(0,1e3).pipe(Object(a.a)(this.destroyed)).subscribe(n=>{this.timeLeft=5-n,this.timeLeft||(t.unsubscribe(),this.router.navigate(["/login"],{state:{currentUserObjectExist:!0}}))})}submitForm(){this.errorService.form=this.pwSettingForm,this.isLoading=!0,this.passwordSettingService.setPassword(this.f.password.value,this.identifier).pipe(Object(a.a)(this.destroyed),Object(p.a)(()=>this.isLoading=!1)).subscribe(()=>{this.passwordSet=!0,this.startTimer()})}passwordMatchValidator(t){return this.f.password.value!==t.value?{passwordNotMatch:!0}:null}confirmationPasswordUpdateValidity(){this.f.confirmationPassword.setValidators([r.s.required,this.passwordMatchValidator.bind(this)]),this.f.confirmationPassword.updateValueAndValidity()}loggingOut(){const t=this.modalService.create({nzContent:d,nzWrapClassName:"vertical-center-modal",nzClosable:!1,nzFooter:null});this.authService.logout().pipe(Object(a.a)(this.destroyed),Object(p.a)(()=>t.destroy())).subscribe()}ngOnInit(){this.loggingOut(),this.pwSettingForm=new r.h({password:new r.e("",[r.s.required]),confirmationPassword:new r.e("",[r.s.required])}),this.identifier=this.activatedRoute.snapshot.queryParams.identifier,this.f.password.valueChanges.pipe(Object(a.a)(this.destroyed)).subscribe(()=>this.confirmationPasswordUpdateValidity())}}return t.\u0275fac=function(n){return new(n||t)(u.Ob(o.a),u.Ob(l.a),u.Ob(f),u.Ob(o.e),u.Ob(w.d),u.Ob(h.a))},t.\u0275cmp=u.Ib({type:t,selectors:[["app-password-setting"]],features:[u.xb],decls:8,vars:3,consts:[[1,"layout"],[1,"content"],[1,"pw-setting__container"],["class","pw-setting__title",4,"ngIf"],["nz-form","","nzLayout","vertical","class","pw-setting__form",3,"formGroup","ngSubmit",4,"ngIf"],["class","success-msg",4,"ngIf"],["errorValidationTpl",""],[1,"pw-setting__title"],["nz-typography","",1,"pw-setting__subtitle","pw-setting__form--mb-md"],["nz-form","","nzLayout","vertical",1,"pw-setting__form",3,"formGroup","ngSubmit"],[3,"nzErrorTip"],["nzPrefixIcon","lock","nzSize","large"],["type","password","nz-input","","formControlName","password","autocomplete","","name","password"],["passwordErrorTpl",""],[1,"pw-setting__form--mb-sm",3,"nzErrorTip"],["type","password","nz-input","","formControlName","confirmationPassword","autocomplete","","name","confirmationPassword",3,"blur"],["confirmationPasswordErrorTpl",""],["nz-button","","nzSize","large",1,"pw-setting__button",3,"nzType","disabled","nzLoading"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],[1,"success-msg"],["routerLink","/login"]],template:function(t,n){1&t&&(u.Ub(0,"nz-layout",0),u.Ub(1,"nz-content",1),u.Ub(2,"div",2),u.Fc(3,S,5,0,"div",3),u.Fc(4,j,19,6,"form",4),u.Fc(5,V,8,1,"div",5),u.Tb(),u.Tb(),u.Tb(),u.Fc(6,G,2,2,"ng-template",null,6,u.Gc)),2&t&&(u.Ab(3),u.mc("ngIf",!n.passwordSet),u.Ab(1),u.mc("ngIf",!n.passwordSet),u.Ab(1),u.mc("ngIf",n.passwordSet))},directives:[_.d,_.a,O.o,v.a,r.t,r.o,y.b,r.i,T.c,y.c,T.a,y.d,y.a,P.a,z.c,z.b,r.d,r.n,r.g,C.a,M.a,O.t,o.g],styles:[".pw-setting__container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;flex-wrap:wrap;padding:24px}.pw-setting__container[_ngcontent-%COMP%]   nz-form-label[_ngcontent-%COMP%]{padding:0!important}.pw-setting__title[_ngcontent-%COMP%]{width:100%;margin:0 auto;text-align:center}.pw-setting__subtitle[_ngcontent-%COMP%]{font-size:1rem}.pw-setting__form[_ngcontent-%COMP%]{width:100%;max-width:36rem}.pw-setting__form--mb-md[_ngcontent-%COMP%]{margin-bottom:24px}.pw-setting__form--mb-sm[_ngcontent-%COMP%]{margin-bottom:16px}.pw-setting__button[_ngcontent-%COMP%]{width:100%}.content[_ngcontent-%COMP%]{height:100%;background:#fff;margin:24px}.success-msg[_ngcontent-%COMP%]{flex-direction:column;justify-content:center}.success-msg[_ngcontent-%COMP%], .success-msg[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;align-items:center}.success-msg[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem}.success-msg[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-left:.5em}"]}),t})()}];let N=(()=>{class t{}return t.\u0275mod=u.Mb({type:t}),t.\u0275inj=u.Lb({factory:function(n){return new(n||t)},imports:[[o.h.forChild(k)],o.h]}),t})(),Y=(()=>{class t{}return t.\u0275mod=u.Mb({type:t}),t.\u0275inj=u.Lb({factory:function(n){return new(n||t)},imports:[[i.a,N,b]]}),t})()}}]);