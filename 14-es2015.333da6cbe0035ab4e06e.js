(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{Pj3g:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var o=n("fXoL"),i=n("oaey"),s=n("nYR2"),r=n("1G5W"),c=n("lJxs"),a=n("2Vo4"),l=n("EY2u");class u extends i.a{constructor(){super(),this.isLoading$=new a.a(!0),this.pageIndex$=new o.n,this.params=null}stopLoading(){return this.isLoading$.next(!1),l.a}goToPrevPage(){return this.pageIndex$.emit(),l.a}getItems(t){return this.isLoading$.next(!0),t.pipe(Object(s.a)(()=>this.isLoading$.next(!1)),Object(r.a)(this.destroyed),Object(c.a)(t=>(this.items=t.items,this.totalCount=t.total_count,t)))}}},TwVa:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"g",function(){return i}),n.d(e,"b",function(){return s}),n.d(e,"f",function(){return c}),n.d(e,"c",function(){return a}),n.d(e,"e",function(){return l}),n.d(e,"d",function(){return u}),n.d(e,"h",function(){return d});class o{constructor(){}get label(){return this.device_id}}class i{constructor(){}get label(){return`${this.first_name} ${this.middle_name||""} ${this.last_name} - ${this.patient_id}`}}class s extends class{}{get label(){return`${this.first_name} ${this.last_name} - ${this.npi}`}}var r=n("2Vo4");class c{constructor(t,e=null){this.totalCount=0,this.items$=new r.a(new Array),this.searchChange$=new r.a(null),this.getRequestFuncName=t,this.type=e}}class a{constructor(){}}class l{get label(){return this.name}}class u{constructor(t){Object.assign(this,t)}}class d{get label(){return this.name}}},VdD3:function(t,e,n){"use strict";n.d(e,"a",function(){return p});var o=n("fXoL"),i=n("dEAy"),s=n("OzZK"),r=n("RwU8"),c=n("C2AL"),a=n("ofXK");function l(t,e){if(1&t){const t=o.Vb();o.Ub(0,"button",5),o.bc("click",function(){return o.vc(t),o.ec(2).onSaveClick(!1)}),o.Hc(1,"Save & Add another"),o.Tb()}if(2&t){const t=o.ec(2);o.mc("disabled",!t.formValid)("nzLoading",t.processing&&!t.processingClose)}}function u(t,e){1&t&&(o.Ub(0,"span"),o.Hc(1,"\xa0& Close"),o.Tb())}function d(t,e){if(1&t){const t=o.Vb();o.Sb(0),o.Ub(1,"button",1),o.bc("click",function(){return o.vc(t),o.ec().closeModal()}),o.Hc(2,"Cancel"),o.Tb(),o.Fc(3,l,2,2,"button",2),o.Ub(4,"button",3),o.bc("click",function(){return o.vc(t),o.ec().onSaveClick(!0)}),o.Hc(5,"Save"),o.Fc(6,u,2,0,"span",4),o.Tb(),o.Rb()}if(2&t){const t=o.ec();o.Ab(3),o.mc("ngIf",!t.isEditing),o.Ab(1),o.mc("disabled",!t.formValid)("nzLoading",t.processing&&t.processingClose),o.Ab(2),o.mc("ngIf",!t.isEditing)}}let p=(()=>{class t{constructor(){this.saveEvent=new o.n,this.closeEvent=new o.n,this.formValid=!0}closeModal(){this.closeEvent.emit()}onSaveClick(t){this.saveEvent.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Ib({type:t,selectors:[["app-modal-footer"]],inputs:{processing:"processing",processingClose:"processingClose",formValid:"formValid",isEditing:"isEditing"},outputs:{saveEvent:"saveEvent",closeEvent:"closeEvent"},decls:1,vars:0,consts:[[4,"nzModalFooter"],["nz-button","",3,"click"],["nz-button","","nzType","default",3,"disabled","nzLoading","click",4,"ngIf"],["nz-button","","nzType","primary",3,"disabled","nzLoading","click"],[4,"ngIf"],["nz-button","","nzType","default",3,"disabled","nzLoading","click"]],template:function(t,e){1&t&&o.Fc(0,d,7,4,"ng-container",0)},directives:[i.a,s.a,r.a,c.a,a.o],encapsulation:2}),t})()},bb81:function(t,e,n){"use strict";n.d(e,"a",function(){return M});var o=n("fXoL"),i=n("EY2u"),s=n("HDdC"),r=n("2Vo4"),c=n("1G5W"),a=n("vkgz"),l=n("/uUt"),u=n("Kj3r"),d=n("eIep"),p=n("nYR2"),b=n("JIr8"),h=n("pLZG"),m=n("oaey"),f=n("CvgI"),g=n("UXun"),v=n("lJxs"),z=n("ovFC"),C=n("tk/3");let O=(()=>{class t{constructor(t){this.http=t,this.options$=new r.a([]),this.totalCount$=new r.a(0),this.isLoadingMore$=new r.a(!1),this.isLoading$=new r.a(!0),this.filters={}}get optionsAsObservable$(){return this.options$.asObservable()}get options(){return this.options$.value}set options(t){this.options$.next([...t])}get totalCount(){return this.totalCount$.value}set totalCount(t){this.totalCount$.next(t)}get isLoadingMore(){return this.isLoadingMore$.value}set isLoadingMore(t){this.isLoadingMore$.next(t)}get isLoadingMoreAsObservable$(){return this.isLoadingMore$.pipe(Object(g.a)(1))}get isLoadingAsObservable$(){return this.isLoading$.pipe(Object(g.a)(1))}get isLoading(){return this.isLoading$.value}set isLoading(t){this.isLoading$.next(t)}loadMoreOptions(t,e){return this.options.length<this.totalCount?(this.isLoadingMore=!0,this.getOptionsRequest(t).pipe(Object(v.a)(t=>{this.totalCount=t.total_count;const n=e?t.items.map(t=>e(t)):t.items;this.options=[...this.options,...n]}),Object(p.a)(()=>this.isLoadingMore=!1))):i.a}getOptions(t,e){return this.getOptionsRequest(t).pipe(Object(v.a)(t=>{this.totalCount=t.total_count,this.options=e?t.items.map(t=>e(t)):t.items}),Object(p.a)(()=>this.isLoading=!1))}getOptionsRequest(t){const e=Object(f.a)(Object.assign({limit:15,offset:this.options.length},this.filters));return this.http.get(t,{params:e})}}return t.\u0275fac=function(e){return new(e||t)(o.Yb(C.c))},t.\u0275prov=o.Kb({token:t,factory:t.\u0275fac,providedIn:z.a}),t})();var T=n("zAKX"),y=n("3Pt+"),w=n("vxfF"),S=n("ofXK"),P=n("qAZ0"),U=n("QlLE");function L(t,e){if(1&t&&o.Pb(0,"nz-option",7),2&t){const t=e.$implicit,n=o.ec();o.mc("nzValue",t.id)("nzLabel",t[n.labelKey])("nzDisabled",n.optionDisabled(t.id))}}function $(t,e){1&t&&(o.Ub(0,"nz-option",8),o.Ub(1,"div",9),o.Pb(2,"nz-spin"),o.Ub(3,"span",10),o.Hc(4,"Searching..."),o.Tb(),o.Tb(),o.Tb())}function A(t,e){1&t&&(o.Ub(0,"div",14),o.Pb(1,"nz-spin"),o.Ub(2,"span"),o.Hc(3,"Loading data..."),o.Tb(),o.Tb())}function x(t,e){if(1&t&&(o.Ub(0,"div",12),o.Fc(1,A,4,0,"div",13),o.fc(2,"async"),o.Tb()),2&t){const t=o.ec(2),e=o.uc(10);o.Ab(1),o.mc("ngIf",o.gc(2,2,t.isLoadingMore$))("ngIfElse",e)}}function I(t,e){if(1&t&&o.Fc(0,x,3,4,"div",11),2&t){const t=o.ec();o.mc("ngIf",!t.isSearching&&t.totalCount>15&&"tags"!==t.mode)}}function k(t,e){if(1&t&&(o.Ub(0,"div",15),o.Hc(1),o.Tb()),2&t){const t=o.ec();o.Ab(1),o.Kc("",t.options.length," of ",t.totalCount,"")}}function j(t,e){if(1&t&&o.Pb(0,"nz-empty",16),2&t){const t=o.ec();o.mc("nzNotFoundContent",t.noDataText)}}let M=(()=>{class t extends m.a{constructor(t){super(),this.selectService=t,this.labelKey="name",this.size="default",this.mode="default",this.filterName="name",this.canLoad=!0,this.loadOptions$=new s.a,this.valueChangedEvt=new o.n,this.searchChange$=new r.a(null)}get totalCount(){return this.selectService.totalCount}get options(){return this.selectService.options}onScrollToBottom(){this.selectService.loadMoreOptions(this.url,this.transformFunc).pipe(Object(c.a)(this.destroyed)).subscribe()}onSearch(t){(t||this.selectService.filters[this.filterName])&&(this.isSearching=!0,this.searchChange$.next(t))}onOpenChange(t){!t&&this.selectService.filters[this.filterName]&&(this.selectService.filters[this.filterName]=null,this.selectService.options=[],this.getOptions())}selectionValueChanged(t){t&&this.valueChangedEvt.emit(this.selectService.options.find(e=>e.id===t))}searchOptions(){return this.searchChange$.asObservable().pipe(Object(a.a)(t=>{this.selectService.options=[],this.selectService.filters[this.filterName]=t}),Object(l.a)(),Object(u.a)(500),Object(d.a)(()=>this.selectService.getOptions(this.url,this.transformFunc).pipe(Object(p.a)(()=>{this.isSearching=!1,this.disabled=!1}),Object(b.a)(()=>i.a))),Object(c.a)(this.destroyed))}getOptions(){this.selectService.getOptions(this.url,this.transformFunc).pipe(Object(c.a)(this.destroyed)).subscribe()}optionDisabled(t){return!(!this.disabledOptions||!this.disabledOptions.length)&&this.disabledOptions.map(t=>t.id).includes(t)}ngOnInit(){const t=this.control.value;t&&(this.selectService.filters.include=t),this.isLoading$=this.selectService.isLoadingAsObservable$,this.isLoadingMore$=this.selectService.isLoadingMoreAsObservable$,this.options$=this.selectService.optionsAsObservable$,this.canLoad&&this.searchOptions().subscribe(),this.loadOptions$.pipe(Object(a.a)(()=>{this.disabled=!0,this.selectService.isLoading=!0}),Object(c.a)(this.destroyed),Object(h.a)(t=>!!t),Object(d.a)(t=>(t.forEach(t=>this.selectService.filters[t.key]=t.value),this.canLoad=!0,this.searchOptions()))).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(O))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-select"]],inputs:{control:"control",url:"url",labelKey:"labelKey",size:"size",disabled:"disabled",placeholder:"placeholder",mode:"mode",maxTagCount:"maxTagCount",filterName:"filterName",canLoad:"canLoad",disabledOptions:"disabledOptions",noDataText:"noDataText",transformFunc:"transformFunc",loadOptions$:"loadOptions$"},outputs:{valueChangedEvt:"valueChangedEvt"},features:[o.zb([O]),o.xb],decls:13,vars:20,consts:[["nzAllowClear","","nzServerSearch","","nzShowSearch","",3,"nzSize","nzPlaceHolder","formControl","nzLoading","nzDisabled","nzMode","nzMaxTagCount","nzDropdownRender","nzShowArrow","nzNotFoundContent","nzOnSearch","nzOpenChange","ngModelChange","nzScrollToBottom"],[3,"itemSize","maxBufferPx"],[3,"nzValue","nzLabel","nzDisabled",4,"ngFor","ngForOf"],["nzDisabled","","nzCustomContent","",4,"ngIf"],["loadingMoreOptionsTpl",""],["totalCountTpl",""],["noDataTpl",""],[3,"nzValue","nzLabel","nzDisabled"],["nzDisabled","","nzCustomContent",""],[1,"searching-option"],[1,"searching-option__text"],["class","dropdown-footer",4,"ngIf"],[1,"dropdown-footer"],["class","dropdown-footer__spinner",4,"ngIf","ngIfElse"],[1,"dropdown-footer__spinner"],[1,"dropdown-footer__total"],["nzNotFoundImage","simple",3,"nzNotFoundContent"]],template:function(t,e){if(1&t&&(o.Ub(0,"nz-select",0),o.bc("nzOnSearch",function(t){return e.onSearch(t)})("nzOpenChange",function(t){return e.onOpenChange(t)})("ngModelChange",function(t){return e.selectionValueChanged(t)})("nzScrollToBottom",function(){return e.onScrollToBottom()}),o.fc(1,"async"),o.fc(2,"async"),o.Ub(3,"cdk-virtual-scroll-viewport",1),o.Fc(4,L,1,3,"nz-option",2),o.fc(5,"async"),o.Tb(),o.Fc(6,$,5,0,"nz-option",3),o.Fc(7,I,1,1,"ng-template",null,4,o.Gc),o.Tb(),o.Fc(9,k,2,2,"ng-template",null,5,o.Gc),o.Fc(11,j,1,1,"ng-template",null,6,o.Gc)),2&t){const t=o.uc(8),n=o.uc(12);o.mc("nzSize",e.size)("nzPlaceHolder",e.placeholder)("formControl",e.control)("nzLoading",e.canLoad&&o.gc(1,14,e.isLoading$))("nzDisabled",e.disabled||o.gc(2,16,e.isLoading$))("nzMode",e.mode)("nzMaxTagCount",e.maxTagCount)("nzDropdownRender",t)("nzShowArrow",!0)("nzNotFoundContent",n),o.Ab(3),o.mc("itemSize",32)("maxBufferPx",160),o.Ab(1),o.mc("ngForOf",o.gc(5,18,e.options$)),o.Ab(2),o.mc("ngIf",e.isSearching)}},directives:[T.d,y.n,y.f,w.b,w.a,S.n,S.o,T.a,P.a,U.b],pipes:[S.b],styles:["[_nghost-%COMP%], [_nghost-%COMP%]   nz-select[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ant-select-arrow{top:48%}.dropdown-footer[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;align-items:center;justify-items:start;padding:4px 14px;color:#1890ff;border-top:1px solid #f0f0f0}.dropdown-footer__total[_ngcontent-%COMP%]{width:100%;grid-column:2/3;display:flex;justify-content:flex-end}.dropdown-footer__spinner[_ngcontent-%COMP%]{display:flex;align-items:center}.dropdown-footer__spinner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:18px}.dropdown-footer[_ngcontent-%COMP%]   nz-spin[_ngcontent-%COMP%]{margin-left:12px}.option[_ngcontent-%COMP%]{display:flex}.option[_ngcontent-%COMP%]   nz-spin[_ngcontent-%COMP%]{margin-left:.9em}.option[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#1890ff;margin-left:1.1em}.searching-option[_ngcontent-%COMP%]{display:flex;align-items:center}.searching-option[_ngcontent-%COMP%]   nz-spin[_ngcontent-%COMP%]{margin-left:.8em}.searching-option__text[_ngcontent-%COMP%]{margin-left:1.2em}"],changeDetection:0}),t})()},o5fV:function(t,e,n){"use strict";n.d(e,"a",function(){return p});var o=n("mrSG"),i=n("sbGu"),s=n("dEAy"),r=n("CvgI"),c=n("tk/3"),a=n("lJxs"),l=n("pLZG"),u=n("fXoL");let d=(()=>{class t{constructor(t){this.modal=t,this.modal.updateConfig({nzWrapClassName:"vertical-center-modal",nzMaskClosable:!0,nzAutofocus:null,nzOkType:"danger",nzOkText:"Delete",nzClosable:!1})}}return t.\u0275fac=function(e){return new(e||t)(u.Ob(s.c))},t.\u0275cmp=u.Ib({type:t,selectors:[["ng-component"]],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),t})();class p{constructor(){const t=i.a.getInjector;this.http=t.get(c.c),this.modalService=t.get(s.d)}getItems(t,e,n){const o=Object(r.a)(t),i=Object.assign({params:o},n);return this.http.get(e,Object.assign({},i)).pipe(Object(a.a)(t=>t))}openModal(t,e=null,n,o=!0,i=600){return this.modalService.create(Object.assign(Object.assign({},o&&{nzWrapClassName:"vertical-center-modal"}),{nzTitle:t,nzWidth:i+"px",nzContent:n,nzComponentParams:Object.assign({},e)})).afterClose.pipe(Object(l.a)(t=>t))}openActionConfirmationModal(t,e){return this.modalService.confirm({nzContent:e,nzTitle:t,nzOnOk:()=>!0}).afterClose.pipe(Object(l.a)(t=>t))}deleteItem(t,e){return this.modalService.confirm({nzContent:d,nzTitle:t,nzOnOk:t=>Object(o.a)(this,void 0,void 0,function*(){return t.modal.config.nzOkLoading=!0,yield this.deleteItemRequest(e)})}).afterClose.pipe(Object(l.a)(t=>t))}deleteItemRequest(t){return Object(o.a)(this,void 0,void 0,function*(){return yield this.http.delete(t).toPromise().then(t=>"success"===t.status)})}}},pfyX:function(t,e,n){"use strict";n.d(e,"a",function(){return d});var o=n("oaey"),i=n("sbGu"),s=n("lhsU"),r=n("3Pt+"),c=n("1G5W"),a=n("nYR2"),l=n("2Vo4"),u=n("bNXi");class d extends o.a{constructor(t){super(),this.modal=t,this.loadOptions$=new l.a(null),this.updateAfterClosing=!1;const e=i.a.getInjector;this.errorService=e.get(s.a),this.notifService=e.get(u.b)}get f(){return this.form.controls}set formInitValue(t){this.formInitialValue=Object.assign({},t)}closeModal(t=this.updateAfterClosing){this.modal.destroy(t)}saveItem(t,e,n=null){this.processing=!0,this.processingClose=t,this.form&&(this.markFormGroupTouched(this.form),this.errorService.form=this.form),e.pipe(Object(c.a)(this.destroyed),Object(a.a)(()=>this.processing=!1)).subscribe(()=>{n&&this.notifService.success(n,""),t?this.closeModal(!0):(this.form&&this.form.reset(this.formInitialValue),this.updateAfterClosing=!0)})}onItemSelected(t,e,n){n.push(t),e.patchValue(null,{emitEvent:!1})}onDeleteItemClick(t,e){this[e]=this[e].filter(e=>e.id!==t)}markFormGroupTouched(t){Object.values(t.controls).forEach(t=>{t.markAsTouched(),t instanceof r.h&&this.markFormGroupTouched(t)})}}},qiEJ:function(t,e,n){"use strict";n.r(e),n.d(e,"GroupListModule",function(){return rt});var o=n("PCNd"),i=n("tyNb"),s=n("Pj3g"),r=n("mCNh"),c=n("1G5W"),a=n("eIep"),l=n("fXoL"),u=n("+K6+"),d=n("dEAy");let p=(()=>{class t{}return t.\u0275mod=l.Mb({type:t}),t.\u0275inj=l.Lb({factory:function(e){return new(e||t)}}),t})();var b=n("o5fV"),h=n("ILvI"),m=n("TwVa"),f=n("vxZU");let g=(()=>{class t extends f.a{constructor(){super()}group(t,e,n){const o=e.map(t=>t.id),i=n.map(t=>t.id);return new m.d(Object.assign(Object.assign({},t),{doctors:o,patients:i}))}edit(t,e,n,o){const i=this.group(e,n,o);return this.editItemRequest(i,"Group updated successfully",Object(h.l)(t))}create(t,e,n){const o=this.group(t,e,n);return this.createItemRequest(o,"Group created successfully",h.k)}getPracticeOptions(t){return this.getOptions(t,h.C)}getDoctorOptions(t){const e=Object.assign(Object.assign({},t),{has_group:!1});return this.getOptions(e,h.i)}getPatientOptions(t){const e=Object.assign(Object.assign({},t),{has_group:!1});return this.getOptions(e,h.y)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=l.Kb({token:t,factory:t.\u0275fac,providedIn:p}),t})();var v=n("pfyX"),z=n("3Pt+"),C=n("Yn1n"),O=n("ocnv"),T=n("HZS1"),y=n("B+r4"),w=n("PTRe"),S=n("5vDB"),P=n("bb81"),U=n("1ReC"),L=n("ofXK"),$=n("VdD3"),A=n("rMZv"),x=n("OzZK"),I=n("C2AL"),k=n("FwiY");function j(t,e){if(1&t){const t=l.Vb();l.Ub(0,"nz-form-item"),l.Ub(1,"nz-form-label",2),l.Hc(2,"Practice"),l.Tb(),l.Ub(3,"nz-form-control",3),l.Ub(4,"app-select",15),l.bc("valueChangedEvt",function(e){return l.vc(t),l.ec().practiceValueChanged(e)}),l.Tb(),l.Tb(),l.Tb()}if(2&t){const t=l.ec(),e=l.uc(23);l.Ab(1),l.mc("nzSpan",3),l.Ab(2),l.mc("nzErrorTip",e),l.Ab(1),l.mc("control",t.f.practice)("url",t.practiceUrl)}}function M(t,e){if(1&t){const t=l.Vb();l.Ub(0,"tr"),l.Ub(1,"td"),l.Hc(2),l.Tb(),l.Ub(3,"td"),l.Hc(4),l.Tb(),l.Ub(5,"td"),l.Hc(6),l.Tb(),l.Ub(7,"td",16),l.Ub(8,"button",17),l.bc("click",function(){l.vc(t);const n=e.$implicit;return l.ec().onDeleteItemClick(n.id,"selectedDoctors")}),l.Pb(9,"i",18),l.Tb(),l.Tb(),l.Tb()}if(2&t){const t=e.$implicit;l.Ab(2),l.Ic(t.npi),l.Ab(2),l.Kc("",t.first_name," ",t.last_name,""),l.Ab(2),l.Ic(t.specialization)}}function _(t,e){if(1&t){const t=l.Vb();l.Ub(0,"tr"),l.Ub(1,"td"),l.Hc(2),l.Tb(),l.Ub(3,"td"),l.Ub(4,"a",19),l.Hc(5),l.Pb(6,"i",20),l.Tb(),l.Tb(),l.Ub(7,"td"),l.Hc(8),l.fc(9,"date"),l.Tb(),l.Ub(10,"td"),l.Hc(11),l.Tb(),l.Ub(12,"td",16),l.Ub(13,"button",17),l.bc("click",function(){l.vc(t);const n=e.$implicit;return l.ec().onDeleteItemClick(n.id,"selectedPatients")}),l.Pb(14,"i",18),l.Tb(),l.Tb(),l.Tb()}if(2&t){const t=e.$implicit;l.Ab(2),l.Jc(" ",t.patient_id," "),l.Ab(2),l.mc("href","/patient-details/"+t.id,l.xc),l.Ab(1),l.Lc(" ",t.first_name," ",t.middle_name," ",t.last_name," "),l.Ab(3),l.Ic(l.hc(9,8,t.birth_date,"yyyy-MM-dd")),l.Ab(3),l.Kc("",null==t.doctor?null:t.doctor.first_name," ",null==t.doctor?null:t.doctor.last_name,"")}}function F(t,e){1&t&&(l.Sb(0),l.Hc(1," This field is required "),l.Rb())}function E(t,e){if(1&t&&(l.Sb(0),l.Hc(1),l.Rb()),2&t){const t=l.ec().$implicit;l.Ab(1),l.Jc(" ",t.errors.validationError," ")}}function D(t,e){if(1&t&&(l.Fc(0,F,2,0,"ng-container",21),l.Fc(1,E,2,1,"ng-container",21)),2&t){const t=e.$implicit;l.mc("ngIf",t.hasError("required")),l.Ab(1),l.mc("ngIf",t.hasError("validationError"))}}const V=function(){return["admin"]},G=function(){return{y:"123px"}},N=function(){return["auto","auto","auto","60px"]},H=function(){return["auto","auto","auto","auto","60px"]};let R=(()=>{class t extends v.a{constructor(t,e,n){super(t),this.crudService=e,this.currentUserService=n,this.practiceUrl=h.C,this.patientsUrl=h.y,this.doctorsUrl=h.i,this.doctorControl=new z.e(null),this.selectedDoctors=new Array,this.doctorsDisplayColumns=[{name:"NPI"},{name:"Name"},{name:"Specialization"},{name:""}],this.patientControl=new z.e(null),this.selectedPatients=new Array,this.patientsDisplayColumns=[{name:"Patient ID"},{name:"Name"},{name:"Birthdate"},{name:"Doctor"},{name:""}],this.transformToDoctorClass=t=>Object.assign(new m.b,t),this.transformToPatientClass=t=>Object.assign(new m.g,t),this.form=new z.h({name:new z.e("",[z.s.required]),practice:new z.e(null,[z.s.required])})}onSaveClick(t){var e;const n=null===(e=this.group)||void 0===e?void 0:e.id;let o;o=n?this.crudService.edit(n,this.form.value,this.selectedDoctors,this.selectedPatients):this.crudService.create(this.form.value,this.selectedDoctors,this.selectedPatients),this.saveItem(t,o)}practiceValueChanged(t){this.loadOptions$.next([{key:"practice",value:t.name}])}ngOnInit(){const t=this.currentUserService.currentUser;if(t.role===C.a.manager&&(this.form.removeControl("practice"),this.loadOptions$.next([{key:"practice",value:t.practice.name}])),this.group){for(const t in this.group)if(Object.prototype.hasOwnProperty.call(this.group,t)){if("doctors"===t){this.selectedDoctors.push(...this.group.doctors);continue}if("patients"===t){this.selectedPatients.push(...this.group.patients);continue}if("object"==typeof this.group[t]&&this.f[t]){this.f[t].patchValue(this.group[t].id);continue}Object.prototype.hasOwnProperty.call(this.f,t)&&this.f[t].patchValue(this.group[t])}this.loadOptions$.next([{key:"practice",value:this.group.practice.name}])}this.formInitValue=this.form.getRawValue()}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(d.c),l.Ob(g),l.Ob(u.a))},t.\u0275cmp=l.Ib({type:t,selectors:[["ng-component"]],features:[l.zb([g]),l.xb],decls:24,vars:45,consts:[["nz-form","",1,"form",3,"formGroup"],[4,"appRolesAccess"],["nzRequired","",3,"nzSpan"],[3,"nzErrorTip"],["nz-input","","formControlName","name","autocomplete",""],["nzPlain","","nzText","Doctors","nzOrientation","left"],["labelKey","label","placeholder","Search and select doctor",3,"control","url","transformFunc","disabled","loadOptions$","canLoad","disabledOptions","valueChangedEvt"],[1,"selected-items"],["nzSize","small",3,"nzTemplateMode","spinner","hasFilters","totalCount","nzScroll","nzWidthConfig","displayColumns"],[4,"ngFor","ngForOf"],["nzPlain","","nzText","Patients","nzOrientation","left"],["labelKey","label","placeholder","Search and select patient",3,"control","url","transformFunc","disabled","loadOptions$","canLoad","disabledOptions","valueChangedEvt"],["nzSize","small",3,"nzTemplateMode","totalCount","hasFilters","spinner","nzScroll","nzWidthConfig","displayColumns"],[3,"processing","processingClose","isEditing","formValid","saveEvent","closeEvent"],["errorTpl",""],["placeholder","Search and select practice",3,"control","url","valueChangedEvt"],[1,"actions"],["nz-button","","nzType","link","nzSize","small","nzDanger","",3,"click"],["nz-icon","","nzType","delete","nzTheme","outline"],["target","_blank",3,"href"],["nz-icon","","nzType","icon:external-link"],[4,"ngIf"]],template:function(t,e){if(1&t&&(l.Ub(0,"form",0),l.Fc(1,j,5,4,"nz-form-item",1),l.Ub(2,"nz-form-item"),l.Ub(3,"nz-form-label",2),l.Hc(4,"Name"),l.Tb(),l.Ub(5,"nz-form-control",3),l.Pb(6,"input",4),l.Tb(),l.Tb(),l.Tb(),l.Pb(7,"nz-divider",5),l.Ub(8,"nz-form-item"),l.Ub(9,"nz-form-control",3),l.Ub(10,"app-select",6),l.bc("valueChangedEvt",function(t){return e.onItemSelected(t,e.doctorControl,e.selectedDoctors)}),l.Tb(),l.Tb(),l.Tb(),l.Ub(11,"div",7),l.Ub(12,"app-table-wrapper",8),l.Fc(13,M,10,4,"tr",9),l.Tb(),l.Tb(),l.Pb(14,"nz-divider",10),l.Ub(15,"nz-form-item"),l.Ub(16,"nz-form-control",3),l.Ub(17,"app-select",11),l.bc("valueChangedEvt",function(t){return e.onItemSelected(t,e.patientControl,e.selectedPatients)}),l.Tb(),l.Tb(),l.Tb(),l.Ub(18,"div",7),l.Ub(19,"app-table-wrapper",12),l.Fc(20,_,15,11,"tr",9),l.Tb(),l.Tb(),l.Ub(21,"app-modal-footer",13),l.bc("saveEvent",function(t){return e.onSaveClick(t)})("closeEvent",function(){return e.closeModal()}),l.Tb(),l.Fc(22,D,2,2,"ng-template",null,14,l.Gc)),2&t){const t=l.uc(23);l.mc("formGroup",e.form),l.Ab(1),l.mc("appRolesAccess",l.oc(40,V)),l.Ab(2),l.mc("nzSpan",3),l.Ab(2),l.mc("nzErrorTip",t),l.Ab(4),l.mc("nzErrorTip",t),l.Ab(1),l.mc("control",e.doctorControl)("url",e.doctorsUrl)("transformFunc",e.transformToDoctorClass)("disabled",!(null!=e.f.practice&&e.f.practice.valid))("loadOptions$",e.loadOptions$.asObservable())("canLoad",!1)("disabledOptions",e.selectedDoctors),l.Ab(2),l.mc("nzTemplateMode",!0)("spinner",!1)("hasFilters",!1)("totalCount",e.selectedDoctors.length)("nzScroll",l.oc(41,G))("nzWidthConfig",l.oc(42,N))("displayColumns",e.doctorsDisplayColumns),l.Ab(1),l.mc("ngForOf",e.selectedDoctors),l.Ab(3),l.mc("nzErrorTip",t),l.Ab(1),l.mc("control",e.patientControl)("url",e.patientsUrl)("transformFunc",e.transformToPatientClass)("disabled",!(null!=e.f.practice&&e.f.practice.valid))("loadOptions$",e.loadOptions$.asObservable())("canLoad",!1)("disabledOptions",e.selectedPatients),l.Ab(2),l.mc("nzTemplateMode",!0)("totalCount",e.selectedPatients.length)("hasFilters",!1)("spinner",!1)("nzScroll",l.oc(43,G))("nzWidthConfig",l.oc(44,H))("displayColumns",e.patientsDisplayColumns),l.Ab(1),l.mc("ngForOf",e.selectedPatients),l.Ab(1),l.mc("processing",e.processing)("processingClose",e.processingClose)("isEditing",!(null==e.group||!e.group.id))("formValid",e.form.valid)}},directives:[z.t,z.o,O.b,z.i,T.a,y.c,O.c,y.a,O.d,O.a,w.b,z.d,z.n,z.g,S.a,P.a,U.a,L.n,$.a,A.i,A.b,x.a,I.a,k.a,L.o],pipes:[L.e],styles:[".selected-items[_ngcontent-%COMP%]{margin-bottom:16px}  .ant-table-expanded-row-fixed{width:455px!important}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]}),t})(),K=(()=>{class t extends b.a{constructor(){super()}getGroupList(t){return this.getItems(t,h.k)}addGroup(){return this.openModal("Add new group",void 0,R)}editGroup(t){return this.openModal("Edit group "+t.name,{group:t},R)}deleteGroup(t){return this.deleteItem(`Are you sure you want to delete group ${t.name}?`,Object(h.l)(t.id))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=l.Kb({token:t,factory:t.\u0275fac,providedIn:p}),t})(),q=(()=>{class t extends K{constructor(){super(),this.displayColumns=[{name:"Name",filterKey:"name",customFilter:"search",filter:!0,visible:!1},{name:"Practice",filterKey:"practice",customFilter:"search",filter:!0,visible:!1},{name:"Number of doctors"},{name:"Number of patients"},{name:""}]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=l.Kb({token:t,factory:t.\u0275fac,providedIn:p}),t})(),X=(()=>{class t extends K{constructor(){super(),this.displayColumns=[{name:"Name",filterKey:"name",customFilter:"search",filter:!0,visible:!1},{name:"Number of doctors"},{name:"Number of patients"},{name:""}]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=l.Kb({token:t,factory:t.\u0275fac,providedIn:p}),t})();const W=new l.q("GroupListService"),B={provide:W,useFactory:t=>{switch(t.currentRole){case"admin":return new q;case"manager":return new X}},deps:[u.a,d.d]};var J=n("jPNr"),Y=n("RwU8"),Z=n("Nqz0"),Q=n("Q8cG");function tt(t,e){if(1&t&&(l.Ub(0,"td"),l.Hc(1),l.Tb()),2&t){const t=l.ec().$implicit;l.Ab(1),l.Ic(null==t.practice?null:t.practice.name)}}const et=function(){return["admin"]};function nt(t,e){if(1&t){const t=l.Vb();l.Ub(0,"tr",5),l.bc("click",function(){l.vc(t);const n=e.$implicit;return l.ec().onEditClick(n)}),l.Ub(1,"td"),l.Hc(2),l.Tb(),l.Fc(3,tt,2,1,"td",6),l.Ub(4,"td"),l.Hc(5),l.Tb(),l.Ub(6,"td"),l.Hc(7),l.Tb(),l.Ub(8,"td",7),l.Ub(9,"div"),l.Ub(10,"button",8),l.bc("click",function(t){return t.stopPropagation()}),l.Pb(11,"i",9),l.Tb(),l.Ub(12,"nz-dropdown-menu",null,10),l.Ub(14,"ul",11),l.Ub(15,"button",12),l.bc("click",function(){l.vc(t);const n=e.$implicit;return l.ec().onEditClick(n)}),l.Ub(16,"div",13),l.Pb(17,"i",14),l.Ub(18,"span"),l.Hc(19,"Edit"),l.Tb(),l.Tb(),l.Tb(),l.Ub(20,"button",12),l.bc("click",function(){l.vc(t);const n=e.$implicit;return l.ec().onDeleteClick(n)}),l.Ub(21,"div",15),l.Pb(22,"i",16),l.Ub(23,"span"),l.Hc(24,"Delete"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()}if(2&t){const t=e.$implicit,n=l.uc(13);l.Ab(2),l.Ic(t.name),l.Ab(1),l.mc("appRolesAccess",l.oc(5,et)),l.Ab(2),l.Ic(t.doctors.length),l.Ab(2),l.Ic(t.patients.length),l.Ab(3),l.mc("nzDropdownMenu",n)}}const ot=[{path:"",component:(()=>{class t extends s.a{constructor(t){super(),this.groupListService=t,this.displayColumns=this.groupListService.displayColumns}getGroups(t=this.params){return this.getItems(this.groupListService.getGroupList(t)).pipe(Object(c.a)(this.destroyed))}get groupsPipe(){return Object(r.a)(Object(a.a)(()=>this.getGroups()))}onAddClick(){this.groupListService.addGroup().pipe(this.groupsPipe).subscribe()}onEditClick(t){this.groupListService.editGroup(t).pipe(this.groupsPipe).subscribe()}onDeleteClick(t){this.groupListService.deleteGroup(t).pipe(Object(a.a)(()=>1===this.items.length?this.goToPrevPage():this.getGroups())).subscribe()}onQueryParamsChange(t){this.params=t,this.getGroups().subscribe()}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(W))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-group-list"]],features:[l.zb([B]),l.xb],decls:7,vars:6,consts:[[1,"panel"],["nzTitle","Group list",1,"page-header"],["nz-button","","nzType","primary",3,"click"],[3,"data","totalCount","isLoading$","pageIndex$","displayColumns","queryParamsChange"],["class","row--clickable",3,"click",4,"ngFor","ngForOf"],[1,"row--clickable",3,"click"],[4,"appRolesAccess"],[1,"table-cell__actions"],["nz-button","","nzType","link","nzTrigger","click","nz-dropdown","",3,"nzDropdownMenu","click"],["nz-icon","","nzType","icon:more","nzTheme","outline"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",1,"btn--menu-item",3,"click"],[1,"ant-btn-sm","ant-btn-link","ant-btn"],["nz-icon","","nzType","edit","nzTheme","outline"],[1,"ant-btn-sm","ant-btn-link","ant-btn","ant-btn-dangerous"],["nz-icon","","nzType","delete","nzTheme","outline"]],template:function(t,e){1&t&&(l.Ub(0,"div",0),l.Ub(1,"nz-page-header",1),l.Ub(2,"nz-page-header-extra"),l.Ub(3,"button",2),l.bc("click",function(){return e.onAddClick()}),l.Hc(4,"Add group"),l.Tb(),l.Tb(),l.Tb(),l.Ub(5,"app-table-wrapper",3),l.bc("queryParamsChange",function(t){return e.onQueryParamsChange(t)}),l.Fc(6,nt,25,6,"tr",4),l.Tb(),l.Tb()),2&t&&(l.Ab(5),l.mc("data",e.items)("totalCount",e.totalCount)("isLoading$",e.isLoading$.asObservable())("pageIndex$",e.pageIndex$)("displayColumns",e.displayColumns),l.Ab(1),l.mc("ngForOf",e.items))},directives:[J.a,J.c,x.a,Y.a,I.a,U.a,L.n,A.i,A.b,T.a,Z.d,Z.b,k.a,Z.e,Q.c,Q.d],styles:[""]}),t})()}];let it=(()=>{class t{}return t.\u0275mod=l.Mb({type:t}),t.\u0275inj=l.Lb({factory:function(e){return new(e||t)},imports:[[i.h.forChild(ot)],i.h]}),t})();var st=n("S9na");let rt=(()=>{class t{}return t.\u0275mod=l.Mb({type:t}),t.\u0275inj=l.Lb({factory:function(e){return new(e||t)},imports:[[o.a,it,p,st.a]]}),t})()}}]);