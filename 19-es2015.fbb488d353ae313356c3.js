(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"5aaP":function(e,t,n){"use strict";n.r(t),n.d(t,"OrderDetailsModule",function(){return F});var i=n("PCNd"),o=n("tyNb"),r=n("3Pt+"),s=n("oaey"),a=n("4U9O"),d=n("Kuuk"),c=n("1G5W"),l=n("UXun"),b=n("pLZG"),p=n("LEIr"),h=n("fXoL"),u=n("jPNr"),m=n("OEtX"),f=n("ofXK"),g=n("5vDB"),v=n("OtHt"),z=n("EGpF"),I=n("nJia"),C=n("xB20"),T=n("bYvm"),O=n("ZyQt"),x=n("OzZK"),_=n("RwU8"),$=n("C2AL"),y=n("pu9d");function D(e,t){if(1&e&&(h.Pb(0,"nz-step",14),h.fc(1,"async"),h.fc(2,"async")),2&e){const e=t.$implicit,n=h.ec();h.mc("nzTitle",e.title)("nzDisabled",!n.demoModeControl.value&&(e.disabled||h.gc(1,2,n.orderIsLoading$)||h.gc(2,4,n.onConfirmation$)))}}function M(e,t){if(1&e&&(h.Ub(0,"nz-descriptions-item",29),h.Hc(1),h.Tb()),2&e){const e=h.ec().$implicit;h.Ab(1),h.Ic(e.device.sim_card_id)}}const P=function(){return{xxl:4,xl:4,lg:5,md:5,sm:2,xs:1}};function w(e,t){if(1&e&&(h.Ub(0,"nz-descriptions",15),h.Ub(1,"nz-descriptions-item",16),h.Hc(2),h.fc(3,"deviceType"),h.Tb(),h.Ub(4,"nz-descriptions-item",17),h.Hc(5),h.Tb(),h.Ub(6,"nz-descriptions-item",18),h.Hc(7),h.Tb(),h.Ub(8,"nz-descriptions-item",19),h.Hc(9),h.Tb(),h.Ub(10,"nz-descriptions-item",20),h.Hc(11),h.Tb(),h.Ub(12,"nz-descriptions-item",21),h.Pb(13,"app-address",22),h.Tb(),h.Ub(14,"nz-descriptions-item",23),h.Hc(15),h.Tb(),h.Ub(16,"nz-descriptions-item",24),h.Hc(17),h.fc(18,"date"),h.Tb(),h.Ub(19,"nz-descriptions-item",25),h.Hc(20),h.Tb(),h.Ub(21,"nz-descriptions-item",26),h.Ub(22,"nz-tag",27),h.Hc(23),h.Tb(),h.Tb(),h.Fc(24,M,2,1,"nz-descriptions-item",28),h.Tb()),2&e){const e=t.$implicit,n=h.ec();h.mc("nzColumn",h.oc(20,P)),h.Ab(2),h.Ic(h.gc(3,15,e.device_type)),h.Ab(3),h.Ic(null==e.practice?null:e.practice.name),h.Ab(2),h.Lc("",e.patient.first_name," ",e.patient.middle_name," ",e.patient.last_name,""),h.Ab(2),h.Ic(e.patient.patient_id),h.Ab(2),h.Ic(null==e.device?null:e.device.device_id),h.Ab(2),h.mc("address",e.address),h.Ab(2),h.Ic(null==e.device?null:e.device.serial_number),h.Ab(2),h.Ic(h.hc(18,17,e.ship_date,"short")),h.Ab(3),h.Ic(e.tracking_number),h.Ab(2),h.mc("nzColor",n.stateColors[e.state]),h.Ab(1),h.Ic(e.state),h.Ab(1),h.mc("ngIf",e.device_type===n.deviceTypeOptions.blood_pressure_monitor)}}function S(e,t){if(1&e){const e=h.Vb();h.Ub(0,"div"),h.Ub(1,"span",30),h.Hc(2),h.fc(3,"async"),h.Tb(),h.Ub(4,"button",31),h.bc("click",function(){return h.vc(e),h.ec().onConfirmClick()}),h.fc(5,"async"),h.fc(6,"async"),h.fc(7,"async"),h.fc(8,"async"),h.Hc(9,"Confirm & Next step"),h.Tb(),h.Tb()}if(2&e){const e=h.ec();h.Ab(2),h.Ic(h.gc(3,3,e.errors$)),h.Ab(2),h.mc("nzLoading",h.gc(5,5,e.onConfirmation$))("disabled",!e.demoModeControl.value&&(e.nextBtnDisabled||h.gc(6,7,e.orderIsLoading$)||h.gc(7,9,e.onConfirmation$)||!h.gc(8,11,e.addressFormIsValid$)))}}const U=function(){return{rows:4}},A=[{path:"",component:(()=>{class e extends s.a{constructor(e,t,n){var i,o,s;super(),this.router=e,this.activatedRoute=t,this.orderDetailsService=n,this.index=0,this.steps=[{title:"Test device and associate it with a patient",route:"./test-and-associate",disabled:!1},{title:"ShipStation",route:"./shipstation",disabled:!0},{title:"Print label",route:"./print-label",disabled:!0}],this.stateColors=d.a,this.deviceTypeOptions=a.a,this.demoModeControl=new r.e(!1);const c=null===(s=null===(o=null===(i=this.router.getCurrentNavigation())||void 0===i?void 0:i.extras)||void 0===o?void 0:o.state)||void 0===s?void 0:s.order;c?this.orderDetailsService.orderInfo=c:this.getOrderInfo(this.activatedRoute.snapshot.params.orderId),this.onIndexChange(+this.activatedRoute.snapshot.children[0].data.stepIndex)}get nextBtnDisabled(){var e;switch(this.index){case 0:return!(null===(e=this.order$.value)||void 0===e?void 0:e.device)&&!this.orderDetailsService.deviceIsFound$.value;case 1:break;case 2:return!0}}getOrderInfo(e){this.orderDetailsService.getOrderInfo(e).pipe(Object(c.a)(this.destroyed)).subscribe()}onIndexChange(e){this.index=e,this.steps[e].disabled=!1,this.router.navigate([this.steps[e].route],{relativeTo:this.activatedRoute})}onBackClick(){this.router.navigate(["order-list"],{state:null})}onConfirmClick(){this.demoModeControl.value?this.onIndexChange(this.index+1):this.orderDetailsService.confirmEvt.emit()}ngOnInit(){this.demoModeControl.valueChanges.pipe(Object(c.a)(this.destroyed)).subscribe(e=>this.orderDetailsService.demoMode$.next(e)),this.orderDetailsService.changeStepEvt.pipe(Object(c.a)(this.destroyed)).subscribe(e=>this.onIndexChange(this.index+e)),this.orderIsLoading$=this.orderDetailsService.orderIsLoading$.pipe(Object(l.a)(1)),this.onConfirmation$=this.orderDetailsService.onConfirmation$.pipe(Object(l.a)(1)),this.addressFormIsValid$=this.orderDetailsService.addressFormIsValid$.asObservable(),this.order$=this.orderDetailsService.orderInfo$,this.errors$=this.orderDetailsService.errors$,this.order$.pipe(Object(b.a)(e=>!!e),Object(c.a)(this.destroyed)).subscribe(e=>{this.enrouteState="enroute"===e.state,this.hasDevice=!!e.device})}}return e.\u0275fac=function(t){return new(t||e)(h.Ob(o.e),h.Ob(o.a),h.Ob(p.a))},e.\u0275cmp=h.Ib({type:e,selectors:[["app-order-details"]],features:[h.zb([p.a]),h.xb],decls:21,vars:15,consts:[[1,"panel"],["nzTitle","Order details","nzBackIcon","",1,"page-header",3,"nzBack"],[1,"wizard"],["nzType","navigation",3,"nzCurrent","nzIndexChange"],[3,"nzTitle","nzDisabled",4,"ngFor","ngForOf"],["nzText","Order information","nzOrientation","left",1,"large"],[3,"nzActive","nzParagraph","nzTitle","nzLoading"],["nzBordered","","nzSize","small",3,"nzColumn",4,"ngIf"],[1,"panel__footer"],[1,"panel__actions"],[1,"demo"],[3,"formControl","nzDisabled"],["nz-tooltip","","nzTooltipTitle","When in demo mode, ShipStation shipment order will not be created, order status will not be changed"],[4,"ngIf"],[3,"nzTitle","nzDisabled"],["nzBordered","","nzSize","small",3,"nzColumn"],["nzTitle","Device type"],["nzTitle","Practice"],["nzTitle","Patient name"],["nzTitle","Patient ID"],["nzTitle","Device ID"],["nzTitle","Address"],[3,"address"],["nzTitle","Device serial number"],["nzTitle","Ship date"],["nzTitle","Tracking number"],["nzTitle","State"],[3,"nzColor"],["nzTitle","Device SIM card ID",4,"ngIf"],["nzTitle","Device SIM card ID"],[1,"error"],["nz-button","","nzType","primary","nzSize","large",1,"panel__actions__btn",3,"nzLoading","disabled","click"]],template:function(e,t){1&e&&(h.Ub(0,"div",0),h.Ub(1,"section"),h.Ub(2,"nz-page-header",1),h.bc("nzBack",function(){return t.onBackClick()}),h.Tb(),h.Ub(3,"div",2),h.Ub(4,"nz-steps",3),h.bc("nzIndexChange",function(e){return t.onIndexChange(e)}),h.Fc(5,D,3,6,"nz-step",4),h.Tb(),h.Tb(),h.Pb(6,"nz-divider",5),h.Ub(7,"nz-skeleton",6),h.fc(8,"async"),h.Fc(9,w,25,21,"nz-descriptions",7),h.fc(10,"async"),h.Tb(),h.Pb(11,"router-outlet"),h.Tb(),h.Ub(12,"div",8),h.Pb(13,"nz-divider"),h.Ub(14,"div",9),h.Ub(15,"div"),h.Ub(16,"div",10),h.Pb(17,"nz-switch",11),h.Ub(18,"span",12),h.Hc(19,"Demo mode"),h.Tb(),h.Tb(),h.Fc(20,S,10,13,"div",13),h.Tb(),h.Tb(),h.Tb(),h.Tb()),2&e&&(h.Ab(4),h.mc("nzCurrent",t.index),h.Ab(1),h.mc("ngForOf",t.steps),h.Ab(2),h.mc("nzActive",!0)("nzParagraph",h.oc(14,U))("nzTitle",!1)("nzLoading",h.gc(8,10,t.orderIsLoading$)),h.Ab(2),h.mc("ngIf",h.gc(10,12,t.order$)),h.Ab(8),h.mc("formControl",t.demoModeControl)("nzDisabled",t.demoModeControl.value),h.Ab(3),h.mc("ngIf",t.index!==t.steps.length-1))},directives:[u.a,m.b,f.n,g.a,v.a,f.o,o.i,z.a,r.n,r.f,I.d,m.a,C.a,C.b,T.a,O.a,x.a,_.a,$.a],pipes:[f.b,y.a,f.e],styles:["[_nghost-%COMP%]{height:100%}[_nghost-%COMP%]     .ant-steps-navigation{padding:0}[_nghost-%COMP%]     .ant-steps-item{outline:none!important}[_nghost-%COMP%]     .ant-steps-item-disabled{cursor:not-allowed}.wizard[_ngcontent-%COMP%]{margin-bottom:24px}.panel[_ngcontent-%COMP%]{max-height:100%;height:100%}.panel[_ngcontent-%COMP%], .panel__actions[_ngcontent-%COMP%]{display:flex;flex-direction:column}.panel__actions[_ngcontent-%COMP%]{align-items:flex-end}.panel__actions[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{margin-right:1em;font-size:1rem;color:#ff4d4f}.panel[_ngcontent-%COMP%]   .demo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;margin-bottom:1em}.panel[_ngcontent-%COMP%]   .demo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:.5em}"],changeDetection:0}),e})(),children:[{path:"test-and-associate",loadChildren:()=>Promise.all([n.e(1),n.e(0),n.e(20)]).then(n.bind(null,"COhe")).then(e=>e.TestAndAssociateDeviceModule),data:{stepIndex:0}},{path:"shipstation",loadChildren:()=>n.e(31).then(n.bind(null,"MJku")).then(e=>e.ShipstationModule),data:{stepIndex:1}},{path:"print-label",loadChildren:()=>n.e(25).then(n.bind(null,"C7ii")).then(e=>e.PrintLabelModule),data:{stepIndex:2}}]}];let L=(()=>{class e{}return e.\u0275mod=h.Mb({type:e}),e.\u0275inj=h.Lb({factory:function(t){return new(t||e)},imports:[[o.h.forChild(A)],o.h]}),e})();var k=n("D0x3");let F=(()=>{class e{}return e.\u0275mod=h.Mb({type:e}),e.\u0275inj=h.Lb({factory:function(t){return new(t||e)},imports:[[i.a,L,k.a]]}),e})()},D0x3:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("fXoL");let o=(()=>{class e{}return e.\u0275mod=i.Mb({type:e}),e.\u0275inj=i.Lb({factory:function(t){return new(t||e)}}),e})()},LEIr:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n("fXoL"),o=n("ILvI"),r=n("2Vo4"),s=n("nYR2"),a=n("lJxs"),d=n("D0x3"),c=n("tk/3");let l=(()=>{class e{constructor(e){this.http=e,this.demoMode$=new r.a(!1),this.errors$=new r.a(null),this.deviceIsFound$=new r.a(null),this.orderIsLoading$=new r.a(null),this.changeStepEvt=new i.n,this.confirmEvt=new i.n,this.onConfirmation$=new r.a(null),this.orderInfo$=new r.a(null),this.addressFormIsValid$=new r.a(!1)}get orderInfo(){return this.orderInfo$.value}set orderInfo(e){this.orderInfo$.next(e)}set addressFormIsValid(e){this.addressFormIsValid$.next(e)}goToNextStep(){this.changeStepEvt.emit(1)}goToPrevStep(){this.changeStepEvt.emit(-1)}getOrderInfo(e){return this.orderIsLoading$.next(!0),this.http.get(Object(o.u)(e)).pipe(Object(s.a)(()=>this.orderIsLoading$.next(!1)),Object(a.a)(e=>this.orderInfo=e))}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(c.c))},e.\u0275prov=i.Kb({token:e,factory:e.\u0275fac,providedIn:d.a}),e})()}}]);