!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return e(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return e(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=u(t);if(e){var o=u(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{Pj3g:function(t,e,i){"use strict";i.d(e,"a",function(){return b});var a=i("fXoL"),s=i("oaey"),u=i("nYR2"),l=i("1G5W"),f=i("lJxs"),p=i("2Vo4"),d=i("EY2u"),b=function(t){r(i,t);var e=c(i);function i(){var t;return n(this,i),(t=e.call(this)).isLoading$=new p.a(!0),t.pageIndex$=new a.n,t.params=null,t}return o(i,[{key:"stopLoading",value:function(){return this.isLoading$.next(!1),d.a}},{key:"goToPrevPage",value:function(){return this.pageIndex$.emit(),d.a}},{key:"getItems",value:function(t){var e=this;return this.isLoading$.next(!0),t.pipe(Object(u.a)(function(){return e.isLoading$.next(!1)}),Object(l.a)(this.destroyed),Object(f.a)(function(t){return e.items=t.items,e.totalCount=t.total_count,t}))}}]),i}(s.a)},TwVa:function(t,e,i){"use strict";i.d(e,"a",function(){return a}),i.d(e,"g",function(){return s}),i.d(e,"b",function(){return u}),i.d(e,"f",function(){return f}),i.d(e,"c",function(){return p}),i.d(e,"e",function(){return d}),i.d(e,"d",function(){return b}),i.d(e,"h",function(){return m});var a=function(){function t(){n(this,t)}return o(t,[{key:"label",get:function(){return this.device_id}}]),t}(),s=function(){function t(){n(this,t)}return o(t,[{key:"label",get:function(){return"".concat(this.first_name," ").concat(this.middle_name||""," ").concat(this.last_name," - ").concat(this.patient_id)}}]),t}(),u=function(t){r(i,t);var e=c(i);function i(){return n(this,i),e.apply(this,arguments)}return o(i,[{key:"label",get:function(){return"".concat(this.first_name," ").concat(this.last_name," - ").concat(this.npi)}}]),i}(function(){return function t(){n(this,t)}}()),l=i("2Vo4"),f=function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n(this,t),this.totalCount=0,this.items$=new l.a(new Array),this.searchChange$=new l.a(null),this.getRequestFuncName=e,this.type=i},p=function t(){n(this,t)},d=function(){function t(){n(this,t)}return o(t,[{key:"label",get:function(){return this.name}}]),t}(),b=function t(e){n(this,t),Object.assign(this,e)},m=function(){function t(){n(this,t)}return o(t,[{key:"label",get:function(){return this.name}}]),t}()},VdD3:function(t,e,i){"use strict";i.d(e,"a",function(){return b});var r=i("fXoL"),a=i("dEAy"),c=i("OzZK"),s=i("RwU8"),u=i("C2AL"),l=i("ofXK");function f(t,e){if(1&t){var n=r.Vb();r.Ub(0,"button",5),r.bc("click",function(){return r.vc(n),r.ec(2).onSaveClick(!1)}),r.Hc(1,"Save & Add another"),r.Tb()}if(2&t){var i=r.ec(2);r.mc("disabled",!i.formValid)("nzLoading",i.processing&&!i.processingClose)}}function p(t,e){1&t&&(r.Ub(0,"span"),r.Hc(1,"\xa0& Close"),r.Tb())}function d(t,e){if(1&t){var n=r.Vb();r.Sb(0),r.Ub(1,"button",1),r.bc("click",function(){return r.vc(n),r.ec().closeModal()}),r.Hc(2,"Cancel"),r.Tb(),r.Fc(3,f,2,2,"button",2),r.Ub(4,"button",3),r.bc("click",function(){return r.vc(n),r.ec().onSaveClick(!0)}),r.Hc(5,"Save"),r.Fc(6,p,2,0,"span",4),r.Tb(),r.Rb()}if(2&t){var i=r.ec();r.Ab(3),r.mc("ngIf",!i.isEditing),r.Ab(1),r.mc("disabled",!i.formValid)("nzLoading",i.processing&&i.processingClose),r.Ab(2),r.mc("ngIf",!i.isEditing)}}var b=function(){var t=function(){function t(){n(this,t),this.saveEvent=new r.n,this.closeEvent=new r.n,this.formValid=!0}return o(t,[{key:"closeModal",value:function(){this.closeEvent.emit()}},{key:"onSaveClick",value:function(t){this.saveEvent.emit(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Ib({type:t,selectors:[["app-modal-footer"]],inputs:{processing:"processing",processingClose:"processingClose",formValid:"formValid",isEditing:"isEditing"},outputs:{saveEvent:"saveEvent",closeEvent:"closeEvent"},decls:1,vars:0,consts:[[4,"nzModalFooter"],["nz-button","",3,"click"],["nz-button","","nzType","default",3,"disabled","nzLoading","click",4,"ngIf"],["nz-button","","nzType","primary",3,"disabled","nzLoading","click"],[4,"ngIf"],["nz-button","","nzType","default",3,"disabled","nzLoading","click"]],template:function(t,e){1&t&&r.Fc(0,d,7,4,"ng-container",0)},directives:[a.a,c.a,s.a,u.a,l.o],encapsulation:2}),t}()},bb81:function(e,i,a){"use strict";a.d(i,"a",function(){return G});var s,u=a("fXoL"),l=a("EY2u"),f=a("HDdC"),p=a("2Vo4"),d=a("1G5W"),b=a("vkgz"),m=a("/uUt"),h=a("Kj3r"),g=a("eIep"),v=a("nYR2"),y=a("JIr8"),z=a("pLZG"),O=a("oaey"),C=a("CvgI"),k=a("UXun"),T=a("lJxs"),w=a("ovFC"),S=a("tk/3"),P=((s=function(){function e(t){n(this,e),this.http=t,this.options$=new p.a([]),this.totalCount$=new p.a(0),this.isLoadingMore$=new p.a(!1),this.isLoading$=new p.a(!0),this.filters={}}return o(e,[{key:"loadMoreOptions",value:function(e,n){var i=this;return this.options.length<this.totalCount?(this.isLoadingMore=!0,this.getOptionsRequest(e).pipe(Object(T.a)(function(e){i.totalCount=e.total_count;var o=n?e.items.map(function(t){return n(t)}):e.items;i.options=[].concat(t(i.options),t(o))}),Object(v.a)(function(){return i.isLoadingMore=!1}))):l.a}},{key:"getOptions",value:function(t,e){var n=this;return this.getOptionsRequest(t).pipe(Object(T.a)(function(t){n.totalCount=t.total_count,n.options=e?t.items.map(function(t){return e(t)}):t.items}),Object(v.a)(function(){return n.isLoading=!1}))}},{key:"getOptionsRequest",value:function(t){var e=Object(C.a)(Object.assign({limit:15,offset:this.options.length},this.filters));return this.http.get(t,{params:e})}},{key:"optionsAsObservable$",get:function(){return this.options$.asObservable()}},{key:"options",get:function(){return this.options$.value},set:function(e){this.options$.next(t(e))}},{key:"totalCount",get:function(){return this.totalCount$.value},set:function(t){this.totalCount$.next(t)}},{key:"isLoadingMore",get:function(){return this.isLoadingMore$.value},set:function(t){this.isLoadingMore$.next(t)}},{key:"isLoadingMoreAsObservable$",get:function(){return this.isLoadingMore$.pipe(Object(k.a)(1))}},{key:"isLoadingAsObservable$",get:function(){return this.isLoading$.pipe(Object(k.a)(1))}},{key:"isLoading",get:function(){return this.isLoading$.value},set:function(t){this.isLoading$.next(t)}}]),e}()).\u0275fac=function(t){return new(t||s)(u.Yb(S.c))},s.\u0275prov=u.Kb({token:s,factory:s.\u0275fac,providedIn:w.a}),s),A=a("zAKX"),U=a("3Pt+"),j=a("vxfF"),L=a("ofXK"),I=a("qAZ0"),$=a("QlLE");function x(t,e){if(1&t&&u.Pb(0,"nz-option",7),2&t){var n=e.$implicit,i=u.ec();u.mc("nzValue",n.id)("nzLabel",n[i.labelKey])("nzDisabled",i.optionDisabled(n.id))}}function _(t,e){1&t&&(u.Ub(0,"nz-option",8),u.Ub(1,"div",9),u.Pb(2,"nz-spin"),u.Ub(3,"span",10),u.Hc(4,"Searching..."),u.Tb(),u.Tb(),u.Tb())}function M(t,e){1&t&&(u.Ub(0,"div",14),u.Pb(1,"nz-spin"),u.Ub(2,"span"),u.Hc(3,"Loading data..."),u.Tb(),u.Tb())}function E(t,e){if(1&t&&(u.Ub(0,"div",12),u.Fc(1,M,4,0,"div",13),u.fc(2,"async"),u.Tb()),2&t){var n=u.ec(2),i=u.uc(10);u.Ab(1),u.mc("ngIf",u.gc(2,2,n.isLoadingMore$))("ngIfElse",i)}}function F(t,e){if(1&t&&u.Fc(0,E,3,4,"div",11),2&t){var n=u.ec();u.mc("ngIf",!n.isSearching&&n.totalCount>15&&"tags"!==n.mode)}}function D(t,e){if(1&t&&(u.Ub(0,"div",15),u.Hc(1),u.Tb()),2&t){var n=u.ec();u.Ab(1),u.Kc("",n.options.length," of ",n.totalCount,"")}}function V(t,e){if(1&t&&u.Pb(0,"nz-empty",16),2&t){var n=u.ec();u.mc("nzNotFoundContent",n.noDataText)}}var R,G=((R=function(t){r(i,t);var e=c(i);function i(t){var o;return n(this,i),(o=e.call(this)).selectService=t,o.labelKey="name",o.size="default",o.mode="default",o.filterName="name",o.canLoad=!0,o.loadOptions$=new f.a,o.valueChangedEvt=new u.n,o.searchChange$=new p.a(null),o}return o(i,[{key:"onScrollToBottom",value:function(){this.selectService.loadMoreOptions(this.url,this.transformFunc).pipe(Object(d.a)(this.destroyed)).subscribe()}},{key:"onSearch",value:function(t){(t||this.selectService.filters[this.filterName])&&(this.isSearching=!0,this.searchChange$.next(t))}},{key:"onOpenChange",value:function(t){!t&&this.selectService.filters[this.filterName]&&(this.selectService.filters[this.filterName]=null,this.selectService.options=[],this.getOptions())}},{key:"selectionValueChanged",value:function(t){t&&this.valueChangedEvt.emit(this.selectService.options.find(function(e){return e.id===t}))}},{key:"searchOptions",value:function(){var t=this;return this.searchChange$.asObservable().pipe(Object(b.a)(function(e){t.selectService.options=[],t.selectService.filters[t.filterName]=e}),Object(m.a)(),Object(h.a)(500),Object(g.a)(function(){return t.selectService.getOptions(t.url,t.transformFunc).pipe(Object(v.a)(function(){t.isSearching=!1,t.disabled=!1}),Object(y.a)(function(){return l.a}))}),Object(d.a)(this.destroyed))}},{key:"getOptions",value:function(){this.selectService.getOptions(this.url,this.transformFunc).pipe(Object(d.a)(this.destroyed)).subscribe()}},{key:"optionDisabled",value:function(t){return!(!this.disabledOptions||!this.disabledOptions.length)&&this.disabledOptions.map(function(t){return t.id}).includes(t)}},{key:"ngOnInit",value:function(){var t=this,e=this.control.value;e&&(this.selectService.filters.include=e),this.isLoading$=this.selectService.isLoadingAsObservable$,this.isLoadingMore$=this.selectService.isLoadingMoreAsObservable$,this.options$=this.selectService.optionsAsObservable$,this.canLoad&&this.searchOptions().subscribe(),this.loadOptions$.pipe(Object(b.a)(function(){t.disabled=!0,t.selectService.isLoading=!0}),Object(d.a)(this.destroyed),Object(z.a)(function(t){return!!t}),Object(g.a)(function(e){return e.forEach(function(e){return t.selectService.filters[e.key]=e.value}),t.canLoad=!0,t.searchOptions()})).subscribe()}},{key:"totalCount",get:function(){return this.selectService.totalCount}},{key:"options",get:function(){return this.selectService.options}}]),i}(O.a)).\u0275fac=function(t){return new(t||R)(u.Ob(P))},R.\u0275cmp=u.Ib({type:R,selectors:[["app-select"]],inputs:{control:"control",url:"url",labelKey:"labelKey",size:"size",disabled:"disabled",placeholder:"placeholder",mode:"mode",maxTagCount:"maxTagCount",filterName:"filterName",canLoad:"canLoad",disabledOptions:"disabledOptions",noDataText:"noDataText",transformFunc:"transformFunc",loadOptions$:"loadOptions$"},outputs:{valueChangedEvt:"valueChangedEvt"},features:[u.zb([P]),u.xb],decls:13,vars:20,consts:[["nzAllowClear","","nzServerSearch","","nzShowSearch","",3,"nzSize","nzPlaceHolder","formControl","nzLoading","nzDisabled","nzMode","nzMaxTagCount","nzDropdownRender","nzShowArrow","nzNotFoundContent","nzOnSearch","nzOpenChange","ngModelChange","nzScrollToBottom"],[3,"itemSize","maxBufferPx"],[3,"nzValue","nzLabel","nzDisabled",4,"ngFor","ngForOf"],["nzDisabled","","nzCustomContent","",4,"ngIf"],["loadingMoreOptionsTpl",""],["totalCountTpl",""],["noDataTpl",""],[3,"nzValue","nzLabel","nzDisabled"],["nzDisabled","","nzCustomContent",""],[1,"searching-option"],[1,"searching-option__text"],["class","dropdown-footer",4,"ngIf"],[1,"dropdown-footer"],["class","dropdown-footer__spinner",4,"ngIf","ngIfElse"],[1,"dropdown-footer__spinner"],[1,"dropdown-footer__total"],["nzNotFoundImage","simple",3,"nzNotFoundContent"]],template:function(t,e){if(1&t&&(u.Ub(0,"nz-select",0),u.bc("nzOnSearch",function(t){return e.onSearch(t)})("nzOpenChange",function(t){return e.onOpenChange(t)})("ngModelChange",function(t){return e.selectionValueChanged(t)})("nzScrollToBottom",function(){return e.onScrollToBottom()}),u.fc(1,"async"),u.fc(2,"async"),u.Ub(3,"cdk-virtual-scroll-viewport",1),u.Fc(4,x,1,3,"nz-option",2),u.fc(5,"async"),u.Tb(),u.Fc(6,_,5,0,"nz-option",3),u.Fc(7,F,1,1,"ng-template",null,4,u.Gc),u.Tb(),u.Fc(9,D,2,2,"ng-template",null,5,u.Gc),u.Fc(11,V,1,1,"ng-template",null,6,u.Gc)),2&t){var n=u.uc(8),i=u.uc(12);u.mc("nzSize",e.size)("nzPlaceHolder",e.placeholder)("formControl",e.control)("nzLoading",e.canLoad&&u.gc(1,14,e.isLoading$))("nzDisabled",e.disabled||u.gc(2,16,e.isLoading$))("nzMode",e.mode)("nzMaxTagCount",e.maxTagCount)("nzDropdownRender",n)("nzShowArrow",!0)("nzNotFoundContent",i),u.Ab(3),u.mc("itemSize",32)("maxBufferPx",160),u.Ab(1),u.mc("ngForOf",u.gc(5,18,e.options$)),u.Ab(2),u.mc("ngIf",e.isSearching)}},directives:[A.d,U.n,U.f,j.b,j.a,L.n,L.o,A.a,I.a,$.b],pipes:[L.b],styles:["[_nghost-%COMP%], [_nghost-%COMP%]   nz-select[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ant-select-arrow{top:48%}.dropdown-footer[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;align-items:center;justify-items:start;padding:4px 14px;color:#1890ff;border-top:1px solid #f0f0f0}.dropdown-footer__total[_ngcontent-%COMP%]{width:100%;grid-column:2/3;display:flex;justify-content:flex-end}.dropdown-footer__spinner[_ngcontent-%COMP%]{display:flex;align-items:center}.dropdown-footer__spinner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:18px}.dropdown-footer[_ngcontent-%COMP%]   nz-spin[_ngcontent-%COMP%]{margin-left:12px}.option[_ngcontent-%COMP%]{display:flex}.option[_ngcontent-%COMP%]   nz-spin[_ngcontent-%COMP%]{margin-left:.9em}.option[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#1890ff;margin-left:1.1em}.searching-option[_ngcontent-%COMP%]{display:flex;align-items:center}.searching-option[_ngcontent-%COMP%]   nz-spin[_ngcontent-%COMP%]{margin-left:.8em}.searching-option__text[_ngcontent-%COMP%]{margin-left:1.2em}"],changeDetection:0}),R)},o5fV:function(t,e,i){"use strict";i.d(e,"a",function(){return m});var r,a=i("mrSG"),c=i("sbGu"),s=i("dEAy"),u=i("CvgI"),l=i("tk/3"),f=i("lJxs"),p=i("pLZG"),d=i("fXoL"),b=((r=function t(e){n(this,t),this.modal=e,this.modal.updateConfig({nzWrapClassName:"vertical-center-modal",nzMaskClosable:!0,nzAutofocus:null,nzOkType:"danger",nzOkText:"Delete",nzClosable:!1})}).\u0275fac=function(t){return new(t||r)(d.Ob(s.c))},r.\u0275cmp=d.Ib({type:r,selectors:[["ng-component"]],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),r),m=function(){function t(){n(this,t);var e=c.a.getInjector;this.http=e.get(l.c),this.modalService=e.get(s.d)}return o(t,[{key:"getItems",value:function(t,e,n){var i=Object(u.a)(t),o=Object.assign({params:i},n);return this.http.get(e,Object.assign({},o)).pipe(Object(f.a)(function(t){return t}))}},{key:"openModal",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;return this.modalService.create(Object.assign(Object.assign({},i&&{nzWrapClassName:"vertical-center-modal"}),{nzTitle:t,nzWidth:o+"px",nzContent:n,nzComponentParams:Object.assign({},e)})).afterClose.pipe(Object(p.a)(function(t){return t}))}},{key:"openActionConfirmationModal",value:function(t,e){return this.modalService.confirm({nzContent:e,nzTitle:t,nzOnOk:function(){return!0}}).afterClose.pipe(Object(p.a)(function(t){return t}))}},{key:"deleteItem",value:function(t,e){var n=this;return this.modalService.confirm({nzContent:b,nzTitle:t,nzOnOk:function(t){return Object(a.a)(n,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.modal.config.nzOkLoading=!0,n.next=3,this.deleteItemRequest(e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}},n,this)}))}}).afterClose.pipe(Object(p.a)(function(t){return t}))}},{key:"deleteItemRequest",value:function(t){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.delete(t).toPromise().then(function(t){return"success"===t.status});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}))}}]),t}()},pfyX:function(t,e,i){"use strict";i.d(e,"a",function(){return m});var a=i("oaey"),s=i("sbGu"),u=i("lhsU"),l=i("3Pt+"),f=i("1G5W"),p=i("nYR2"),d=i("2Vo4"),b=i("bNXi"),m=function(t){r(i,t);var e=c(i);function i(t){var o;n(this,i),(o=e.call(this)).modal=t,o.loadOptions$=new d.a(null),o.updateAfterClosing=!1;var r=s.a.getInjector;return o.errorService=r.get(u.a),o.notifService=r.get(b.b),o}return o(i,[{key:"closeModal",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.updateAfterClosing;this.modal.destroy(t)}},{key:"saveItem",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.processing=!0,this.processingClose=t,this.form&&(this.markFormGroupTouched(this.form),this.errorService.form=this.form),e.pipe(Object(f.a)(this.destroyed),Object(p.a)(function(){return n.processing=!1})).subscribe(function(){i&&n.notifService.success(i,""),t?n.closeModal(!0):(n.form&&n.form.reset(n.formInitialValue),n.updateAfterClosing=!0)})}},{key:"onItemSelected",value:function(t,e,n){n.push(t),e.patchValue(null,{emitEvent:!1})}},{key:"onDeleteItemClick",value:function(t,e){this[e]=this[e].filter(function(e){return e.id!==t})}},{key:"markFormGroupTouched",value:function(t){var e=this;Object.values(t.controls).forEach(function(t){t.markAsTouched(),t instanceof l.h&&e.markFormGroupTouched(t)})}},{key:"f",get:function(){return this.form.controls}},{key:"formInitValue",set:function(t){this.formInitialValue=Object.assign({},t)}}]),i}(a.a)},qiEJ:function(e,i,a){"use strict";a.r(i),a.d(i,"GroupListModule",function(){return zt});var s,u,l=a("PCNd"),f=a("tyNb"),p=a("Pj3g"),d=a("mCNh"),b=a("1G5W"),m=a("eIep"),h=a("fXoL"),g=a("+K6+"),v=a("dEAy"),y=((s=function t(){n(this,t)}).\u0275mod=h.Mb({type:s}),s.\u0275inj=h.Lb({factory:function(t){return new(t||s)}}),s),z=a("o5fV"),O=a("ILvI"),C=a("TwVa"),k=a("vxZU"),T=((u=function(t){r(i,t);var e=c(i);function i(){return n(this,i),e.call(this)}return o(i,[{key:"group",value:function(t,e,n){var i=e.map(function(t){return t.id}),o=n.map(function(t){return t.id});return new C.d(Object.assign(Object.assign({},t),{doctors:i,patients:o}))}},{key:"edit",value:function(t,e,n,i){var o=this.group(e,n,i);return this.editItemRequest(o,"Group updated successfully",Object(O.l)(t))}},{key:"create",value:function(t,e,n){var i=this.group(t,e,n);return this.createItemRequest(i,"Group created successfully",O.k)}},{key:"getPracticeOptions",value:function(t){return this.getOptions(t,O.C)}},{key:"getDoctorOptions",value:function(t){var e=Object.assign(Object.assign({},t),{has_group:!1});return this.getOptions(e,O.i)}},{key:"getPatientOptions",value:function(t){var e=Object.assign(Object.assign({},t),{has_group:!1});return this.getOptions(e,O.y)}}]),i}(k.a)).\u0275fac=function(t){return new(t||u)},u.\u0275prov=h.Kb({token:u,factory:u.\u0275fac,providedIn:y}),u),w=a("pfyX"),S=a("3Pt+"),P=a("Yn1n"),A=a("ocnv"),U=a("HZS1"),j=a("B+r4"),L=a("PTRe"),I=a("5vDB"),$=a("bb81"),x=a("1ReC"),_=a("ofXK"),M=a("VdD3"),E=a("rMZv"),F=a("OzZK"),D=a("C2AL"),V=a("FwiY");function R(t,e){if(1&t){var n=h.Vb();h.Ub(0,"nz-form-item"),h.Ub(1,"nz-form-label",2),h.Hc(2,"Practice"),h.Tb(),h.Ub(3,"nz-form-control",3),h.Ub(4,"app-select",15),h.bc("valueChangedEvt",function(t){return h.vc(n),h.ec().practiceValueChanged(t)}),h.Tb(),h.Tb(),h.Tb()}if(2&t){var i=h.ec(),o=h.uc(23);h.Ab(1),h.mc("nzSpan",3),h.Ab(2),h.mc("nzErrorTip",o),h.Ab(1),h.mc("control",i.f.practice)("url",i.practiceUrl)}}function G(t,e){if(1&t){var n=h.Vb();h.Ub(0,"tr"),h.Ub(1,"td"),h.Hc(2),h.Tb(),h.Ub(3,"td"),h.Hc(4),h.Tb(),h.Ub(5,"td"),h.Hc(6),h.Tb(),h.Ub(7,"td",16),h.Ub(8,"button",17),h.bc("click",function(){h.vc(n);var t=e.$implicit;return h.ec().onDeleteItemClick(t.id,"selectedDoctors")}),h.Pb(9,"i",18),h.Tb(),h.Tb(),h.Tb()}if(2&t){var i=e.$implicit;h.Ab(2),h.Ic(i.npi),h.Ab(2),h.Kc("",i.first_name," ",i.last_name,""),h.Ab(2),h.Ic(i.specialization)}}function N(t,e){if(1&t){var n=h.Vb();h.Ub(0,"tr"),h.Ub(1,"td"),h.Hc(2),h.Tb(),h.Ub(3,"td"),h.Ub(4,"a",19),h.Hc(5),h.Pb(6,"i",20),h.Tb(),h.Tb(),h.Ub(7,"td"),h.Hc(8),h.fc(9,"date"),h.Tb(),h.Ub(10,"td"),h.Hc(11),h.Tb(),h.Ub(12,"td",16),h.Ub(13,"button",17),h.bc("click",function(){h.vc(n);var t=e.$implicit;return h.ec().onDeleteItemClick(t.id,"selectedPatients")}),h.Pb(14,"i",18),h.Tb(),h.Tb(),h.Tb()}if(2&t){var i=e.$implicit;h.Ab(2),h.Jc(" ",i.patient_id," "),h.Ab(2),h.mc("href","/patient-details/"+i.id,h.xc),h.Ab(1),h.Lc(" ",i.first_name," ",i.middle_name," ",i.last_name," "),h.Ab(3),h.Ic(h.hc(9,8,i.birth_date,"yyyy-MM-dd")),h.Ab(3),h.Kc("",null==i.doctor?null:i.doctor.first_name," ",null==i.doctor?null:i.doctor.last_name,"")}}function H(t,e){1&t&&(h.Sb(0),h.Hc(1," This field is required "),h.Rb())}function K(t,e){if(1&t&&(h.Sb(0),h.Hc(1),h.Rb()),2&t){var n=h.ec().$implicit;h.Ab(1),h.Jc(" ",n.errors.validationError," ")}}function q(t,e){if(1&t&&(h.Fc(0,H,2,0,"ng-container",21),h.Fc(1,K,2,1,"ng-container",21)),2&t){var n=e.$implicit;h.mc("ngIf",n.hasError("required")),h.Ab(1),h.mc("ngIf",n.hasError("validationError"))}}var X,W,B,J,Y=function(){return["admin"]},Z=function(){return{y:"123px"}},Q=function(){return["auto","auto","auto","60px"]},tt=function(){return["auto","auto","auto","auto","60px"]},et=((J=function(e){r(a,e);var i=c(a);function a(t,e,o){var r;return n(this,a),(r=i.call(this,t)).crudService=e,r.currentUserService=o,r.practiceUrl=O.C,r.patientsUrl=O.y,r.doctorsUrl=O.i,r.doctorControl=new S.e(null),r.selectedDoctors=new Array,r.doctorsDisplayColumns=[{name:"NPI"},{name:"Name"},{name:"Specialization"},{name:""}],r.patientControl=new S.e(null),r.selectedPatients=new Array,r.patientsDisplayColumns=[{name:"Patient ID"},{name:"Name"},{name:"Birthdate"},{name:"Doctor"},{name:""}],r.transformToDoctorClass=function(t){return Object.assign(new C.b,t)},r.transformToPatientClass=function(t){return Object.assign(new C.g,t)},r.form=new S.h({name:new S.e("",[S.s.required]),practice:new S.e(null,[S.s.required])}),r}return o(a,[{key:"onSaveClick",value:function(t){var e,n,i=null===(e=this.group)||void 0===e?void 0:e.id;n=i?this.crudService.edit(i,this.form.value,this.selectedDoctors,this.selectedPatients):this.crudService.create(this.form.value,this.selectedDoctors,this.selectedPatients),this.saveItem(t,n)}},{key:"practiceValueChanged",value:function(t){this.loadOptions$.next([{key:"practice",value:t.name}])}},{key:"ngOnInit",value:function(){var e=this.currentUserService.currentUser;if(e.role===P.a.manager&&(this.form.removeControl("practice"),this.loadOptions$.next([{key:"practice",value:e.practice.name}])),this.group){for(var n in this.group)if(Object.prototype.hasOwnProperty.call(this.group,n)){if("doctors"===n){var i;(i=this.selectedDoctors).push.apply(i,t(this.group.doctors));continue}if("patients"===n){var o;(o=this.selectedPatients).push.apply(o,t(this.group.patients));continue}if("object"==typeof this.group[n]&&this.f[n]){this.f[n].patchValue(this.group[n].id);continue}Object.prototype.hasOwnProperty.call(this.f,n)&&this.f[n].patchValue(this.group[n])}this.loadOptions$.next([{key:"practice",value:this.group.practice.name}])}this.formInitValue=this.form.getRawValue()}}]),a}(w.a)).\u0275fac=function(t){return new(t||J)(h.Ob(v.c),h.Ob(T),h.Ob(g.a))},J.\u0275cmp=h.Ib({type:J,selectors:[["ng-component"]],features:[h.zb([T]),h.xb],decls:24,vars:45,consts:[["nz-form","",1,"form",3,"formGroup"],[4,"appRolesAccess"],["nzRequired","",3,"nzSpan"],[3,"nzErrorTip"],["nz-input","","formControlName","name","autocomplete",""],["nzPlain","","nzText","Doctors","nzOrientation","left"],["labelKey","label","placeholder","Search and select doctor",3,"control","url","transformFunc","disabled","loadOptions$","canLoad","disabledOptions","valueChangedEvt"],[1,"selected-items"],["nzSize","small",3,"nzTemplateMode","spinner","hasFilters","totalCount","nzScroll","nzWidthConfig","displayColumns"],[4,"ngFor","ngForOf"],["nzPlain","","nzText","Patients","nzOrientation","left"],["labelKey","label","placeholder","Search and select patient",3,"control","url","transformFunc","disabled","loadOptions$","canLoad","disabledOptions","valueChangedEvt"],["nzSize","small",3,"nzTemplateMode","totalCount","hasFilters","spinner","nzScroll","nzWidthConfig","displayColumns"],[3,"processing","processingClose","isEditing","formValid","saveEvent","closeEvent"],["errorTpl",""],["placeholder","Search and select practice",3,"control","url","valueChangedEvt"],[1,"actions"],["nz-button","","nzType","link","nzSize","small","nzDanger","",3,"click"],["nz-icon","","nzType","delete","nzTheme","outline"],["target","_blank",3,"href"],["nz-icon","","nzType","icon:external-link"],[4,"ngIf"]],template:function(t,e){if(1&t&&(h.Ub(0,"form",0),h.Fc(1,R,5,4,"nz-form-item",1),h.Ub(2,"nz-form-item"),h.Ub(3,"nz-form-label",2),h.Hc(4,"Name"),h.Tb(),h.Ub(5,"nz-form-control",3),h.Pb(6,"input",4),h.Tb(),h.Tb(),h.Tb(),h.Pb(7,"nz-divider",5),h.Ub(8,"nz-form-item"),h.Ub(9,"nz-form-control",3),h.Ub(10,"app-select",6),h.bc("valueChangedEvt",function(t){return e.onItemSelected(t,e.doctorControl,e.selectedDoctors)}),h.Tb(),h.Tb(),h.Tb(),h.Ub(11,"div",7),h.Ub(12,"app-table-wrapper",8),h.Fc(13,G,10,4,"tr",9),h.Tb(),h.Tb(),h.Pb(14,"nz-divider",10),h.Ub(15,"nz-form-item"),h.Ub(16,"nz-form-control",3),h.Ub(17,"app-select",11),h.bc("valueChangedEvt",function(t){return e.onItemSelected(t,e.patientControl,e.selectedPatients)}),h.Tb(),h.Tb(),h.Tb(),h.Ub(18,"div",7),h.Ub(19,"app-table-wrapper",12),h.Fc(20,N,15,11,"tr",9),h.Tb(),h.Tb(),h.Ub(21,"app-modal-footer",13),h.bc("saveEvent",function(t){return e.onSaveClick(t)})("closeEvent",function(){return e.closeModal()}),h.Tb(),h.Fc(22,q,2,2,"ng-template",null,14,h.Gc)),2&t){var n=h.uc(23);h.mc("formGroup",e.form),h.Ab(1),h.mc("appRolesAccess",h.oc(40,Y)),h.Ab(2),h.mc("nzSpan",3),h.Ab(2),h.mc("nzErrorTip",n),h.Ab(4),h.mc("nzErrorTip",n),h.Ab(1),h.mc("control",e.doctorControl)("url",e.doctorsUrl)("transformFunc",e.transformToDoctorClass)("disabled",!(null!=e.f.practice&&e.f.practice.valid))("loadOptions$",e.loadOptions$.asObservable())("canLoad",!1)("disabledOptions",e.selectedDoctors),h.Ab(2),h.mc("nzTemplateMode",!0)("spinner",!1)("hasFilters",!1)("totalCount",e.selectedDoctors.length)("nzScroll",h.oc(41,Z))("nzWidthConfig",h.oc(42,Q))("displayColumns",e.doctorsDisplayColumns),h.Ab(1),h.mc("ngForOf",e.selectedDoctors),h.Ab(3),h.mc("nzErrorTip",n),h.Ab(1),h.mc("control",e.patientControl)("url",e.patientsUrl)("transformFunc",e.transformToPatientClass)("disabled",!(null!=e.f.practice&&e.f.practice.valid))("loadOptions$",e.loadOptions$.asObservable())("canLoad",!1)("disabledOptions",e.selectedPatients),h.Ab(2),h.mc("nzTemplateMode",!0)("totalCount",e.selectedPatients.length)("hasFilters",!1)("spinner",!1)("nzScroll",h.oc(43,Z))("nzWidthConfig",h.oc(44,tt))("displayColumns",e.patientsDisplayColumns),h.Ab(1),h.mc("ngForOf",e.selectedPatients),h.Ab(1),h.mc("processing",e.processing)("processingClose",e.processingClose)("isEditing",!(null==e.group||!e.group.id))("formValid",e.form.valid)}},directives:[S.t,S.o,A.b,S.i,U.a,j.c,A.c,j.a,A.d,A.a,L.b,S.d,S.n,S.g,I.a,$.a,x.a,_.n,M.a,E.i,E.b,F.a,D.a,V.a,_.o],pipes:[_.e],styles:[".selected-items[_ngcontent-%COMP%]{margin-bottom:16px}  .ant-table-expanded-row-fixed{width:455px!important}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]}),J),nt=((B=function(t){r(i,t);var e=c(i);function i(){return n(this,i),e.call(this)}return o(i,[{key:"getGroupList",value:function(t){return this.getItems(t,O.k)}},{key:"addGroup",value:function(){return this.openModal("Add new group",void 0,et)}},{key:"editGroup",value:function(t){return this.openModal("Edit group "+t.name,{group:t},et)}},{key:"deleteGroup",value:function(t){return this.deleteItem("Are you sure you want to delete group ".concat(t.name,"?"),Object(O.l)(t.id))}}]),i}(z.a)).\u0275fac=function(t){return new(t||B)},B.\u0275prov=h.Kb({token:B,factory:B.\u0275fac,providedIn:y}),B),it=((W=function(t){r(i,t);var e=c(i);function i(){var t;return n(this,i),(t=e.call(this)).displayColumns=[{name:"Name",filterKey:"name",customFilter:"search",filter:!0,visible:!1},{name:"Practice",filterKey:"practice",customFilter:"search",filter:!0,visible:!1},{name:"Number of doctors"},{name:"Number of patients"},{name:""}],t}return i}(nt)).\u0275fac=function(t){return new(t||W)},W.\u0275prov=h.Kb({token:W,factory:W.\u0275fac,providedIn:y}),W),ot=((X=function(t){r(i,t);var e=c(i);function i(){var t;return n(this,i),(t=e.call(this)).displayColumns=[{name:"Name",filterKey:"name",customFilter:"search",filter:!0,visible:!1},{name:"Number of doctors"},{name:"Number of patients"},{name:""}],t}return i}(nt)).\u0275fac=function(t){return new(t||X)},X.\u0275prov=h.Kb({token:X,factory:X.\u0275fac,providedIn:y}),X),rt=new h.q("GroupListService"),at={provide:rt,useFactory:function(t){switch(t.currentRole){case"admin":return new it;case"manager":return new ot}},deps:[g.a,v.d]},ct=a("jPNr"),st=a("RwU8"),ut=a("Nqz0"),lt=a("Q8cG");function ft(t,e){if(1&t&&(h.Ub(0,"td"),h.Hc(1),h.Tb()),2&t){var n=h.ec().$implicit;h.Ab(1),h.Ic(null==n.practice?null:n.practice.name)}}var pt=function(){return["admin"]};function dt(t,e){if(1&t){var n=h.Vb();h.Ub(0,"tr",5),h.bc("click",function(){h.vc(n);var t=e.$implicit;return h.ec().onEditClick(t)}),h.Ub(1,"td"),h.Hc(2),h.Tb(),h.Fc(3,ft,2,1,"td",6),h.Ub(4,"td"),h.Hc(5),h.Tb(),h.Ub(6,"td"),h.Hc(7),h.Tb(),h.Ub(8,"td",7),h.Ub(9,"div"),h.Ub(10,"button",8),h.bc("click",function(t){return t.stopPropagation()}),h.Pb(11,"i",9),h.Tb(),h.Ub(12,"nz-dropdown-menu",null,10),h.Ub(14,"ul",11),h.Ub(15,"button",12),h.bc("click",function(){h.vc(n);var t=e.$implicit;return h.ec().onEditClick(t)}),h.Ub(16,"div",13),h.Pb(17,"i",14),h.Ub(18,"span"),h.Hc(19,"Edit"),h.Tb(),h.Tb(),h.Tb(),h.Ub(20,"button",12),h.bc("click",function(){h.vc(n);var t=e.$implicit;return h.ec().onDeleteClick(t)}),h.Ub(21,"div",15),h.Pb(22,"i",16),h.Ub(23,"span"),h.Hc(24,"Delete"),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Tb()}if(2&t){var i=e.$implicit,o=h.uc(13);h.Ab(2),h.Ic(i.name),h.Ab(1),h.mc("appRolesAccess",h.oc(5,pt)),h.Ab(2),h.Ic(i.doctors.length),h.Ab(2),h.Ic(i.patients.length),h.Ab(3),h.mc("nzDropdownMenu",o)}}var bt,mt,ht,gt=[{path:"",component:(bt=function(t){r(i,t);var e=c(i);function i(t){var o;return n(this,i),(o=e.call(this)).groupListService=t,o.displayColumns=o.groupListService.displayColumns,o}return o(i,[{key:"getGroups",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params;return this.getItems(this.groupListService.getGroupList(t)).pipe(Object(b.a)(this.destroyed))}},{key:"onAddClick",value:function(){this.groupListService.addGroup().pipe(this.groupsPipe).subscribe()}},{key:"onEditClick",value:function(t){this.groupListService.editGroup(t).pipe(this.groupsPipe).subscribe()}},{key:"onDeleteClick",value:function(t){var e=this;this.groupListService.deleteGroup(t).pipe(Object(m.a)(function(){return 1===e.items.length?e.goToPrevPage():e.getGroups()})).subscribe()}},{key:"onQueryParamsChange",value:function(t){this.params=t,this.getGroups().subscribe()}},{key:"groupsPipe",get:function(){var t=this;return Object(d.a)(Object(m.a)(function(){return t.getGroups()}))}}]),i}(p.a),bt.\u0275fac=function(t){return new(t||bt)(h.Ob(rt))},bt.\u0275cmp=h.Ib({type:bt,selectors:[["app-group-list"]],features:[h.zb([at]),h.xb],decls:7,vars:6,consts:[[1,"panel"],["nzTitle","Group list",1,"page-header"],["nz-button","","nzType","primary",3,"click"],[3,"data","totalCount","isLoading$","pageIndex$","displayColumns","queryParamsChange"],["class","row--clickable",3,"click",4,"ngFor","ngForOf"],[1,"row--clickable",3,"click"],[4,"appRolesAccess"],[1,"table-cell__actions"],["nz-button","","nzType","link","nzTrigger","click","nz-dropdown","",3,"nzDropdownMenu","click"],["nz-icon","","nzType","icon:more","nzTheme","outline"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",1,"btn--menu-item",3,"click"],[1,"ant-btn-sm","ant-btn-link","ant-btn"],["nz-icon","","nzType","edit","nzTheme","outline"],[1,"ant-btn-sm","ant-btn-link","ant-btn","ant-btn-dangerous"],["nz-icon","","nzType","delete","nzTheme","outline"]],template:function(t,e){1&t&&(h.Ub(0,"div",0),h.Ub(1,"nz-page-header",1),h.Ub(2,"nz-page-header-extra"),h.Ub(3,"button",2),h.bc("click",function(){return e.onAddClick()}),h.Hc(4,"Add group"),h.Tb(),h.Tb(),h.Tb(),h.Ub(5,"app-table-wrapper",3),h.bc("queryParamsChange",function(t){return e.onQueryParamsChange(t)}),h.Fc(6,dt,25,6,"tr",4),h.Tb(),h.Tb()),2&t&&(h.Ab(5),h.mc("data",e.items)("totalCount",e.totalCount)("isLoading$",e.isLoading$.asObservable())("pageIndex$",e.pageIndex$)("displayColumns",e.displayColumns),h.Ab(1),h.mc("ngForOf",e.items))},directives:[ct.a,ct.c,F.a,st.a,D.a,x.a,_.n,E.i,E.b,U.a,ut.d,ut.b,V.a,ut.e,lt.c,lt.d],styles:[""]}),bt)}],vt=((mt=function t(){n(this,t)}).\u0275mod=h.Mb({type:mt}),mt.\u0275inj=h.Lb({factory:function(t){return new(t||mt)},imports:[[f.h.forChild(gt)],f.h]}),mt),yt=a("S9na"),zt=((ht=function t(){n(this,t)}).\u0275mod=h.Mb({type:ht}),ht.\u0275inj=h.Lb({factory:function(t){return new(t||ht)},imports:[[l.a,vt,y,yt.a]]}),ht)}}])}();