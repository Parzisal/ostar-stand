(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{TtQc:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(e){return e.greenHighNormal="rgb(56, 142, 60)",e.greenNormal="rgb(67, 160, 71)",e.greenLowNormal="rgb(76, 175, 80)",e.greenLow="rgb(102, 187, 106)",e.redSevere="rgb(246, 71, 71)",e.redModerate="rgb(226, 106, 106)",e.redMild="rgb(224, 130, 131)",e.yellow="rgb(253, 191, 80)",e}({})},bAuu:function(e,t,n){"use strict";n.r(t),n.d(t,"MeasurementDetailsModule",function(){return me});var i=n("PCNd"),s=n("tyNb"),a=n("oaey"),r=n("lJxs"),o=n("eIep"),c=n("nYR2"),l=n("1G5W"),m=n("xlym");const u="font-family: 'Noto Sans', -apple-system, BlinkMacSystemFont, 'Open sans', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'",p={fontFamily:u,fontWeight:500,fontSize:"18px"},d={fontSize:"14px",fontFamily:u,fontWeight:400},b={series:[],chart:{height:600,type:"line",zoom:{enabled:!0,autoScaleYaxis:!0,type:"y"},redrawOnParentResize:!0,redrawOnWindowResize:!0},dataLabels:{enabled:!1},stroke:{curve:"straight",width:2},grid:{xaxis:{lines:{show:!0}},yaxis:{lines:{show:!0}},row:{colors:["#f3f3f3","transparent"],opacity:.5}},tooltip:{marker:{show:!1}}},g={title:{text:"Blood pressure wave",align:"center",style:p},xaxis:{type:"numeric",tickAmount:12,max:12,decimalsInFloat:0,title:{text:"Time in seconds",style:d},labels:{formatter:(e,t,n)=>e}},yaxis:{title:{text:"Pulse index",style:d}}},f={title:{text:"Constant pressure wave",align:"center",style:p},xaxis:{type:"numeric",tickAmount:12,max:12,decimalsInFloat:0,title:{text:"Time in seconds",style:d},labels:{formatter:(e,t,n)=>e}},yaxis:{title:{text:"Pulse index",style:d}}},h={title:{text:"Heart spectrum wave",align:"center",style:p},xaxis:{type:"numeric",decimalsInFloat:0,title:{text:"Frequency (pulse / minute)",style:d},labels:{formatter:(e,t,n)=>Number(e).toFixed()}},yaxis:{decimalsInFloat:0,title:{text:"Heart energy index (HEI)",style:d}},colors:["#545454"]},x={title:{text:"Heart spectrum + constant pressure wave results",align:"center",style:p},xaxis:{type:"numeric",decimalsInFloat:0,title:{text:"Frequency (pulse / minute)",style:d},labels:{formatter:(e,t,n)=>Number(e).toFixed()}},yaxis:{decimalsInFloat:0,title:{text:"Heart energy index (HEI)",style:d}},colors:["#545454"]};var z=n("fXoL");let y=(()=>{class e{}return e.\u0275mod=z.Mb({type:e}),e.\u0275inj=z.Lb({factory:function(t){return new(t||e)}}),e})();var _=n("ILvI"),v=n("CvgI"),I=n("/h9T"),T=n("pl0G"),O=n("jIYg");function w(e,t){Object(O.a)(2,arguments);var n=Object(I.a)(t);return Object(T.a)(e,1e3*n)}function A(e,t){Object(O.a)(2,arguments);var n=Object(I.a)(t);return w(e,-n)}var C=n("tk/3");let P=(()=>{class e{constructor(e){this.http=e}getMeasurementDetails(e){return this.http.get(Object(_.r)(e))}getAlerts(e,t){const n=Object(v.a)({measurement_date_until:w(new Date(e),1).toISOString(),measurement_date_from:A(new Date(e),1).toISOString(),device_id:t});return this.http.get(_.b,{params:n}).pipe(Object(r.a)(e=>e.items[0]))}}return e.\u0275fac=function(t){return new(t||e)(z.Yb(C.c))},e.\u0275prov=z.Kb({token:e,factory:e.\u0275fac,providedIn:y}),e})();var F=n("yW9e"),M=n("5vDB"),H=n("ofXK"),L=n("OtHt"),S=n("xB20"),U=n("0wOC"),k=n("QlLE"),j=n("CV0D"),N=n("qAZ0");const D=["charts"],q=["apxChart"],E=function(){return{rows:3}};function R(e,t){if(1&e&&z.Pb(0,"nz-skeleton",10),2&e){const e=z.ec();z.mc("nzActive",!0)("nzLoading",e.measurementIsLoading&&!e.measurement)("nzParagraph",z.oc(4,E))("nzTitle",!1)}}const B=function(){return{xxl:4,xl:4,lg:5,md:5,sm:2,xs:1}},$=function(e){return{systolic:e}},W=function(e){return{diastolic:e}},G=function(e,t){return[e,t]},Y=function(e,t,n){return[e,t,n]};function J(e,t){if(1&e&&(z.Ub(0,"nz-descriptions",11),z.Ub(1,"nz-descriptions-item",12),z.Hc(2),z.Tb(),z.Ub(3,"nz-descriptions-item",13),z.Pb(4,"app-tags",14),z.Tb(),z.Ub(5,"nz-descriptions-item",15),z.Hc(6),z.Tb(),z.Ub(7,"nz-descriptions-item",16),z.Hc(8),z.Tb(),z.Ub(9,"nz-descriptions-item",17),z.Hc(10),z.fc(11,"date"),z.Tb(),z.Ub(12,"nz-descriptions-item",18),z.Hc(13),z.Tb(),z.Ub(14,"nz-descriptions-item",19),z.Hc(15),z.Tb(),z.Ub(16,"nz-descriptions-item",20),z.Pb(17,"app-tags",21),z.Tb(),z.Tb()),2&e){const e=z.ec();z.mc("nzColumn",z.oc(14,B)),z.Ab(2),z.Ic(e.measurementType),z.Ab(2),z.mc("data",z.qc(19,G,z.pc(15,$,e.measurement.systolic),z.pc(17,W,e.measurement.diastolic))),z.Ab(2),z.Ic(e.measurement.systolic),z.Ab(2),z.Ic(e.measurement.diastolic),z.Ab(2),z.Ic(z.hc(11,11,e.measurement.measurement_date,"short")),z.Ab(3),z.Ic(e.measurement.pulse),z.Ab(2),z.Lc("",e.measurement.heartbeat_zone_frequency,", ",e.measurement.valve_zone_frequency,", ",e.measurement.cardiovascular_zone_frequency,""),z.Ab(2),z.mc("data",z.rc(22,Y,null==e.measurement?null:e.measurement.heartbeat_zone_frequency,null==e.measurement?null:e.measurement.valve_zone_frequency,null==e.measurement?null:e.measurement.cardiovascular_zone_frequency))}}const Q=function(){return{rows:2}};function V(e,t){1&e&&z.Pb(0,"nz-skeleton",22),2&e&&z.mc("nzActive",!0)("nzParagraph",z.oc(3,Q))("nzTitle",!1)}function K(e,t){if(1&e&&(z.Ub(0,"nz-descriptions-item",28),z.Hc(1),z.Tb()),2&e){const e=z.ec(2);z.Ab(1),z.Ic(e.alerts.bp_alert)}}function X(e,t){if(1&e&&(z.Ub(0,"nz-descriptions-item",29),z.Hc(1),z.Tb()),2&e){const e=z.ec(2);z.Ab(1),z.Ic(e.alerts.hr_alert)}}function Z(e,t){if(1&e&&(z.Ub(0,"nz-descriptions-item",30),z.Hc(1),z.Tb()),2&e){const e=z.ec(2);z.Ab(1),z.Ic(e.alerts.arrhythmia_alert)}}function ee(e,t){if(1&e&&(z.Ub(0,"nz-descriptions-item",31),z.Hc(1),z.Tb()),2&e){const e=z.ec(2);z.Ab(1),z.Ic(e.alerts.alerts)}}function te(e,t){if(1&e&&(z.Sb(0),z.Ub(1,"nz-descriptions",23),z.Fc(2,K,2,1,"nz-descriptions-item",24),z.Fc(3,X,2,1,"nz-descriptions-item",25),z.Fc(4,Z,2,1,"nz-descriptions-item",26),z.Fc(5,ee,2,1,"nz-descriptions-item",27),z.Tb(),z.Rb()),2&e){const e=z.ec();z.Ab(2),z.mc("ngIf",e.alerts.bp_alert),z.Ab(1),z.mc("ngIf",e.alerts.hr_alert),z.Ab(1),z.mc("ngIf",e.alerts.arrhythmia_alert),z.Ab(1),z.mc("ngIf",e.alerts.alerts)}}function ne(e,t){1&e&&z.Pb(0,"nz-empty",32)}function ie(e,t){if(1&e&&(z.Ub(0,"p"),z.Hc(1),z.Tb()),2&e){const e=t.$implicit;z.Ab(1),z.Ic(e.title)}}function se(e,t){if(1&e&&(z.Sb(0),z.Ub(1,"div",37),z.Ub(2,"div",38),z.Pb(3,"apx-chart",39,40),z.Tb(),z.Ub(5,"div",41),z.Fc(6,ie,2,1,"p",42),z.Tb(),z.Tb(),z.Rb()),2&e){const e=t.ngIf,n=z.ec().$implicit,i=z.ec(2);z.Ab(3),z.mc("series",e.series)("xaxis",e.xaxis)("yaxis",e.yaxis)("title",e.title)("colors",e.colors)("chart",i.chartOptions.chart)("tooltip",i.chartOptions.tooltip)("dataLabels",i.chartOptions.dataLabels)("stroke",i.chartOptions.stroke)("grid",i.chartOptions.grid)("id",n.key),z.Ab(3),z.mc("ngForOf",e.aside)}}function ae(e,t){if(1&e&&(z.Ub(0,"div",36),z.Fc(1,se,7,12,"ng-container",5),z.Tb()),2&e){const e=t.$implicit;z.Cb(e.value.pageBreakAfter?"page-break-before":""),z.Ab(1),z.mc("ngIf",e.value)}}function re(e,t){if(1&e&&(z.Ub(0,"div",33,34),z.Fc(2,ae,2,3,"div",35),z.fc(3,"keyvalue"),z.Tb()),2&e){const e=z.ec();z.Ab(2),z.mc("ngForOf",z.hc(3,1,e.chartConfigs,e.originalOrder))}}function oe(e,t){1&e&&(z.Ub(0,"div",43),z.Pb(1,"nz-spin",44),z.Tb())}const ce=[{path:"",component:(()=>{class e extends a.a{constructor(e,t,n){var i,s,a,r;super(),this.measurementDetailsService=e,this.router=t,this.activatedRoute=n,this.chartOptions=b,this.chartConfigs={bp_wave_form:{aside:[],series:[],title:g.title,xaxis:g.xaxis,yaxis:g.yaxis},bp_spectrum:{aside:[],series:[],title:h.title,xaxis:h.xaxis,yaxis:h.yaxis,colors:h.colors},fp_wave_form:{aside:[],series:[],title:f.title,xaxis:f.xaxis,yaxis:f.yaxis},fp_spectrum:{aside:[],series:[],title:x.title,xaxis:x.xaxis,yaxis:x.yaxis,colors:x.colors}},this.measurementType=m.a.blood_pressure_metrics,this.alertsIsLoading=!0,this.originalOrder=(e,t)=>0,this.measurement=null===(a=null===(s=null===(i=this.router.getCurrentNavigation())||void 0===i?void 0:i.extras)||void 0===s?void 0:s.state)||void 0===a?void 0:a.measurement;const o=(null===(r=this.measurement)||void 0===r?void 0:r.id)||this.activatedRoute.snapshot.params.measurementId;this.getMeasurementDetails(o),window.onbeforeprint=()=>{for(const e of this.apxChart)e.dataURI().then(e=>{const t=document.createElement("div");t.classList.add("print-image-container");const n=new Image;n.src=e.imgURI,n.classList.add("print-image"),t.appendChild(n),this.chartsRef.nativeElement.appendChild(t)})},window.onafterprint=()=>this.removePrintContainers()}removePrintContainers(){document.querySelectorAll(".print-image-container").forEach(e=>e.remove())}getAlerts(e,t){return this.measurementDetailsService.getAlerts(e,t)}setValuesToChartAside(){const e=this.measurement.systolic,t=this.measurement.diastolic,n=this.measurement.bp_wave_form,i=e-t,s=Math.round(e/3+2*t/3),a=this.measurement.pulse;this.chartConfigs.bp_wave_form.aside=[{title:`Sys. ${e} mmHg`},{title:`Dia. ${t} mmHg`},{title:`Mean ${s} mmHg`},{title:`PP ${i} mmHG`},{title:"Pulse "+a},{title:`Meas. time ${n[n.length-1][0]-n[0][0]} sec.`}];const r=this.measurement.heartbeat_zone_frequency,o=this.measurement.valve_zone_frequency,c=this.measurement.cardiovascular_zone_frequency,l=r+o+c;this.chartConfigs.bp_spectrum.aside=[{title:"I_1 = "+r},{title:"I_2 = "+o},{title:"I_3 = "+c},{title:"Total noise = "+l}],this.chartConfigs.fp_wave_form.aside=[{title:`Mean ${s} mmHg`},{title:`PP ${i} mmHg`},{title:"Pulse "+a}];const m=this.measurement.fp_spectrum.map(e=>e[1]);this.chartConfigs.fp_spectrum.aside=[{title:"I_1 = "+r},{title:"I_2 = "+o},{title:"I_3 = "+c},{title:"Total noise = "+l},{title:"Peak of HEI = "+Math.max(...m)}]}getMeasurementDetails(e){this.measurementIsLoading=!0,this.measurementDetailsService.getMeasurementDetails(e).pipe(Object(r.a)(e=>{this.measurement=e,this.setValuesToChartAside(),this.measurementIsLoading=!1,Object.keys(this.chartConfigs).forEach(t=>this.chartConfigs[t].series.push({name:"",data:e[t]}))}),Object(o.a)(()=>this.getAlerts(this.measurement.measurement_date,this.measurement.device_id).pipe(Object(c.a)(()=>this.alertsIsLoading=!1),Object(r.a)(e=>this.alerts=e))),Object(l.a)(this.destroyed)).subscribe()}ngOnDestroy(){super.ngOnDestroy(),this.removePrintContainers()}}return e.\u0275fac=function(t){return new(t||e)(z.Ob(P),z.Ob(s.e),z.Ob(s.a))},e.\u0275cmp=z.Ib({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&(z.Mc(D,!0),z.Mc(q,!0)),2&e){let e;z.tc(e=z.cc())&&(t.chartsRef=e.first),z.tc(e=z.cc())&&(t.apxChart=e)}},features:[z.xb],decls:12,vars:7,consts:[["nzText","Measurement information","nzOrientation","left",1,"large"],[3,"nzActive","nzLoading","nzParagraph","nzTitle",4,"ngIf"],["nzBordered","","nzSize","small",3,"nzColumn",4,"ngIf"],["nzText","Alerts","nzOrientation","left",1,"large"],[3,"nzActive","nzParagraph","nzTitle",4,"ngIf"],[4,"ngIf"],["nzNotFoundImage","simple","nzNotFoundContent","No alerts",4,"ngIf"],["nzText","Measurement charts","nzOrientation","left",1,"large"],["class","charts",4,"ngIf","ngIfElse"],["spinnerTpl",""],[3,"nzActive","nzLoading","nzParagraph","nzTitle"],["nzBordered","","nzSize","small",3,"nzColumn"],["nzTitle","Type"],["nzTitle","BP color"],["type","bloodPressure",3,"data"],["nzTitle","Systolic"],["nzTitle","Diastolic"],["nzTitle","Date"],["nzTitle","Pulse"],["nzTitle","I_1-3"],["nzTitle","Heart spectrum"],["type","heartSpectrum",3,"data"],[3,"nzActive","nzParagraph","nzTitle"],["nzBordered","","nzSize","small"],["nzTitle","Blood pressure",4,"ngIf"],["nzTitle","Heart rate",4,"ngIf"],["nzTitle","Arrhythmia",4,"ngIf"],["nzTitle","Other",4,"ngIf"],["nzTitle","Blood pressure"],["nzTitle","Heart rate"],["nzTitle","Arrhythmia"],["nzTitle","Other"],["nzNotFoundImage","simple","nzNotFoundContent","No alerts"],[1,"charts"],["charts",""],["class","chart__wrapper",3,"class",4,"ngFor","ngForOf"],[1,"chart__wrapper"],[1,"chart__container"],[1,"chart__body"],[3,"series","xaxis","yaxis","title","colors","chart","tooltip","dataLabels","stroke","grid","id"],["apxChart",""],[1,"chart__aside"],[4,"ngFor","ngForOf"],[1,"spinner"],["nzSimple","","nzTip","Loading measurements..."]],template:function(e,t){if(1&e&&(z.Ub(0,"nz-content"),z.Pb(1,"nz-divider",0),z.Fc(2,R,1,5,"nz-skeleton",1),z.Fc(3,J,18,26,"nz-descriptions",2),z.Pb(4,"nz-divider",3),z.Fc(5,V,1,4,"nz-skeleton",4),z.Fc(6,te,6,4,"ng-container",5),z.Fc(7,ne,1,0,"nz-empty",6),z.Pb(8,"nz-divider",7),z.Fc(9,re,4,4,"div",8),z.Tb(),z.Fc(10,oe,2,0,"ng-template",null,9,z.Gc)),2&e){const e=z.uc(11);z.Ab(2),z.mc("ngIf",t.measurementIsLoading),z.Ab(1),z.mc("ngIf",!t.measurementIsLoading||t.measurement),z.Ab(2),z.mc("ngIf",t.alertsIsLoading),z.Ab(1),z.mc("ngIf",t.alerts),z.Ab(1),z.mc("ngIf",!t.alerts&&!t.alertsIsLoading),z.Ab(2),z.mc("ngIf",!t.measurementIsLoading)("ngIfElse",e)}},directives:[F.a,M.a,H.o,L.a,S.a,S.b,U.a,k.b,H.n,j.a,N.a],pipes:[H.e,H.i],styles:["[_nghost-%COMP%]     .apexcharts-canvas, [_nghost-%COMP%]     svg{width:100%!important}[_nghost-%COMP%]     .apexcharts-tooltip-text-goals-value, [_nghost-%COMP%]     .apexcharts-tooltip-text-y-value, [_nghost-%COMP%]     .apexcharts-tooltip-text-z-value{margin-left:0!important}[_nghost-%COMP%]     .ant-empty-image{height:30px;margin:0}.charts[_ngcontent-%COMP%]{display:grid;gap:16px}.chart[_ngcontent-%COMP%]{-moz-column-break-after:page;break-after:page;-moz-column-break-before:page;break-before:page}.chart__wrapper[_ngcontent-%COMP%]{border-radius:4px;border:1px solid #d2d2d2;padding:16px}@media print{.chart__wrapper[_ngcontent-%COMP%]{display:none}}.chart__title[_ngcontent-%COMP%]{text-align:center}.chart__aside[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;white-space:nowrap;margin-left:16px}.chart__container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.chart__body[_ngcontent-%COMP%]{width:100%}.spinner[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),e})()}];let le=(()=>{class e{}return e.\u0275mod=z.Mb({type:e}),e.\u0275inj=z.Lb({factory:function(t){return new(t||e)},imports:[[s.h.forChild(ce)],s.h]}),e})(),me=(()=>{class e{}return e.\u0275mod=z.Mb({type:e}),e.\u0275inj=z.Lb({factory:function(t){return new(t||e)},imports:[[i.a,le,y]]}),e})()}}]);