!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function i(e,n){return(i=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function r(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var t,i=a(e);if(n){var r=a(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return o(this,t)}}function o(e,n){return!n||"object"!=typeof n&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"5aaP":function(n,o,a){"use strict";a.r(o),a.d(o,"OrderDetailsModule",function(){return N});var c=a("PCNd"),s=a("tyNb"),d=a("3Pt+"),l=a("oaey"),u=a("4U9O"),f=a("Kuuk"),b=a("1G5W"),p=a("UXun"),h=a("pLZG"),v=a("LEIr"),m=a("fXoL"),g=a("jPNr"),z=a("OEtX"),I=a("ofXK"),y=a("5vDB"),C=a("OtHt"),T=a("EGpF"),O=a("nJia"),_=a("xB20"),x=a("bYvm"),P=a("ZyQt"),w=a("OzZK"),D=a("RwU8"),$=a("C2AL"),M=a("pu9d");function k(e,n){if(1&e&&(m.Pb(0,"nz-step",14),m.fc(1,"async"),m.fc(2,"async")),2&e){var t=n.$implicit,i=m.ec();m.mc("nzTitle",t.title)("nzDisabled",!i.demoModeControl.value&&(t.disabled||m.gc(1,2,i.orderIsLoading$)||m.gc(2,4,i.onConfirmation$)))}}function S(e,n){if(1&e&&(m.Ub(0,"nz-descriptions-item",29),m.Hc(1),m.Tb()),2&e){var t=m.ec().$implicit;m.Ab(1),m.Ic(t.device.sim_card_id)}}var U=function(){return{xxl:4,xl:4,lg:5,md:5,sm:2,xs:1}};function A(e,n){if(1&e&&(m.Ub(0,"nz-descriptions",15),m.Ub(1,"nz-descriptions-item",16),m.Hc(2),m.fc(3,"deviceType"),m.Tb(),m.Ub(4,"nz-descriptions-item",17),m.Hc(5),m.Tb(),m.Ub(6,"nz-descriptions-item",18),m.Hc(7),m.Tb(),m.Ub(8,"nz-descriptions-item",19),m.Hc(9),m.Tb(),m.Ub(10,"nz-descriptions-item",20),m.Hc(11),m.Tb(),m.Ub(12,"nz-descriptions-item",21),m.Pb(13,"app-address",22),m.Tb(),m.Ub(14,"nz-descriptions-item",23),m.Hc(15),m.Tb(),m.Ub(16,"nz-descriptions-item",24),m.Hc(17),m.fc(18,"date"),m.Tb(),m.Ub(19,"nz-descriptions-item",25),m.Hc(20),m.Tb(),m.Ub(21,"nz-descriptions-item",26),m.Ub(22,"nz-tag",27),m.Hc(23),m.Tb(),m.Tb(),m.Fc(24,S,2,1,"nz-descriptions-item",28),m.Tb()),2&e){var t=n.$implicit,i=m.ec();m.mc("nzColumn",m.oc(20,U)),m.Ab(2),m.Ic(m.gc(3,15,t.device_type)),m.Ab(3),m.Ic(null==t.practice?null:t.practice.name),m.Ab(2),m.Lc("",t.patient.first_name," ",t.patient.middle_name," ",t.patient.last_name,""),m.Ab(2),m.Ic(t.patient.patient_id),m.Ab(2),m.Ic(null==t.device?null:t.device.device_id),m.Ab(2),m.mc("address",t.address),m.Ab(2),m.Ic(null==t.device?null:t.device.serial_number),m.Ab(2),m.Ic(m.hc(18,17,t.ship_date,"short")),m.Ab(3),m.Ic(t.tracking_number),m.Ab(2),m.mc("nzColor",i.stateColors[t.state]),m.Ab(1),m.Ic(t.state),m.Ab(1),m.mc("ngIf",t.device_type===i.deviceTypeOptions.blood_pressure_monitor)}}function L(e,n){if(1&e){var t=m.Vb();m.Ub(0,"div"),m.Ub(1,"span",30),m.Hc(2),m.fc(3,"async"),m.Tb(),m.Ub(4,"button",31),m.bc("click",function(){return m.vc(t),m.ec().onConfirmClick()}),m.fc(5,"async"),m.fc(6,"async"),m.fc(7,"async"),m.fc(8,"async"),m.Hc(9,"Confirm & Next step"),m.Tb(),m.Tb()}if(2&e){var i=m.ec();m.Ab(2),m.Ic(m.gc(3,3,i.errors$)),m.Ab(2),m.mc("nzLoading",m.gc(5,5,i.onConfirmation$))("disabled",!i.demoModeControl.value&&(i.nextBtnDisabled||m.gc(6,7,i.orderIsLoading$)||m.gc(7,9,i.onConfirmation$)||!m.gc(8,11,i.addressFormIsValid$)))}}var j,F,H,E=function(){return{rows:4}},R=[{path:"",component:(j=function(n){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&i(e,n)}(a,n);var o=r(a);function a(n,t,i){var r,c,s,l;e(this,a),(r=o.call(this)).router=n,r.activatedRoute=t,r.orderDetailsService=i,r.index=0,r.steps=[{title:"Test device and associate it with a patient",route:"./test-and-associate",disabled:!1},{title:"ShipStation",route:"./shipstation",disabled:!0},{title:"Print label",route:"./print-label",disabled:!0}],r.stateColors=f.a,r.deviceTypeOptions=u.a,r.demoModeControl=new d.e(!1);var b=null===(l=null===(s=null===(c=r.router.getCurrentNavigation())||void 0===c?void 0:c.extras)||void 0===s?void 0:s.state)||void 0===l?void 0:l.order;return b?r.orderDetailsService.orderInfo=b:r.getOrderInfo(r.activatedRoute.snapshot.params.orderId),r.onIndexChange(+r.activatedRoute.snapshot.children[0].data.stepIndex),r}return t(a,[{key:"getOrderInfo",value:function(e){this.orderDetailsService.getOrderInfo(e).pipe(Object(b.a)(this.destroyed)).subscribe()}},{key:"onIndexChange",value:function(e){this.index=e,this.steps[e].disabled=!1,this.router.navigate([this.steps[e].route],{relativeTo:this.activatedRoute})}},{key:"onBackClick",value:function(){this.router.navigate(["order-list"],{state:null})}},{key:"onConfirmClick",value:function(){this.demoModeControl.value?this.onIndexChange(this.index+1):this.orderDetailsService.confirmEvt.emit()}},{key:"ngOnInit",value:function(){var e=this;this.demoModeControl.valueChanges.pipe(Object(b.a)(this.destroyed)).subscribe(function(n){return e.orderDetailsService.demoMode$.next(n)}),this.orderDetailsService.changeStepEvt.pipe(Object(b.a)(this.destroyed)).subscribe(function(n){return e.onIndexChange(e.index+n)}),this.orderIsLoading$=this.orderDetailsService.orderIsLoading$.pipe(Object(p.a)(1)),this.onConfirmation$=this.orderDetailsService.onConfirmation$.pipe(Object(p.a)(1)),this.addressFormIsValid$=this.orderDetailsService.addressFormIsValid$.asObservable(),this.order$=this.orderDetailsService.orderInfo$,this.errors$=this.orderDetailsService.errors$,this.order$.pipe(Object(h.a)(function(e){return!!e}),Object(b.a)(this.destroyed)).subscribe(function(n){e.enrouteState="enroute"===n.state,e.hasDevice=!!n.device})}},{key:"nextBtnDisabled",get:function(){var e;switch(this.index){case 0:return!(null===(e=this.order$.value)||void 0===e?void 0:e.device)&&!this.orderDetailsService.deviceIsFound$.value;case 1:break;case 2:return!0}}}]),a}(l.a),j.\u0275fac=function(e){return new(e||j)(m.Ob(s.e),m.Ob(s.a),m.Ob(v.a))},j.\u0275cmp=m.Ib({type:j,selectors:[["app-order-details"]],features:[m.zb([v.a]),m.xb],decls:21,vars:15,consts:[[1,"panel"],["nzTitle","Order details","nzBackIcon","",1,"page-header",3,"nzBack"],[1,"wizard"],["nzType","navigation",3,"nzCurrent","nzIndexChange"],[3,"nzTitle","nzDisabled",4,"ngFor","ngForOf"],["nzText","Order information","nzOrientation","left",1,"large"],[3,"nzActive","nzParagraph","nzTitle","nzLoading"],["nzBordered","","nzSize","small",3,"nzColumn",4,"ngIf"],[1,"panel__footer"],[1,"panel__actions"],[1,"demo"],[3,"formControl","nzDisabled"],["nz-tooltip","","nzTooltipTitle","When in demo mode, ShipStation shipment order will not be created, order status will not be changed"],[4,"ngIf"],[3,"nzTitle","nzDisabled"],["nzBordered","","nzSize","small",3,"nzColumn"],["nzTitle","Device type"],["nzTitle","Practice"],["nzTitle","Patient name"],["nzTitle","Patient ID"],["nzTitle","Device ID"],["nzTitle","Address"],[3,"address"],["nzTitle","Device serial number"],["nzTitle","Ship date"],["nzTitle","Tracking number"],["nzTitle","State"],[3,"nzColor"],["nzTitle","Device SIM card ID",4,"ngIf"],["nzTitle","Device SIM card ID"],[1,"error"],["nz-button","","nzType","primary","nzSize","large",1,"panel__actions__btn",3,"nzLoading","disabled","click"]],template:function(e,n){1&e&&(m.Ub(0,"div",0),m.Ub(1,"section"),m.Ub(2,"nz-page-header",1),m.bc("nzBack",function(){return n.onBackClick()}),m.Tb(),m.Ub(3,"div",2),m.Ub(4,"nz-steps",3),m.bc("nzIndexChange",function(e){return n.onIndexChange(e)}),m.Fc(5,k,3,6,"nz-step",4),m.Tb(),m.Tb(),m.Pb(6,"nz-divider",5),m.Ub(7,"nz-skeleton",6),m.fc(8,"async"),m.Fc(9,A,25,21,"nz-descriptions",7),m.fc(10,"async"),m.Tb(),m.Pb(11,"router-outlet"),m.Tb(),m.Ub(12,"div",8),m.Pb(13,"nz-divider"),m.Ub(14,"div",9),m.Ub(15,"div"),m.Ub(16,"div",10),m.Pb(17,"nz-switch",11),m.Ub(18,"span",12),m.Hc(19,"Demo mode"),m.Tb(),m.Tb(),m.Fc(20,L,10,13,"div",13),m.Tb(),m.Tb(),m.Tb(),m.Tb()),2&e&&(m.Ab(4),m.mc("nzCurrent",n.index),m.Ab(1),m.mc("ngForOf",n.steps),m.Ab(2),m.mc("nzActive",!0)("nzParagraph",m.oc(14,E))("nzTitle",!1)("nzLoading",m.gc(8,10,n.orderIsLoading$)),m.Ab(2),m.mc("ngIf",m.gc(10,12,n.order$)),m.Ab(8),m.mc("formControl",n.demoModeControl)("nzDisabled",n.demoModeControl.value),m.Ab(3),m.mc("ngIf",n.index!==n.steps.length-1))},directives:[g.a,z.b,I.n,y.a,C.a,I.o,s.i,T.a,d.n,d.f,O.d,z.a,_.a,_.b,x.a,P.a,w.a,D.a,$.a],pipes:[I.b,M.a,I.e],styles:["[_nghost-%COMP%]{height:100%}[_nghost-%COMP%]     .ant-steps-navigation{padding:0}[_nghost-%COMP%]     .ant-steps-item{outline:none!important}[_nghost-%COMP%]     .ant-steps-item-disabled{cursor:not-allowed}.wizard[_ngcontent-%COMP%]{margin-bottom:24px}.panel[_ngcontent-%COMP%]{max-height:100%;height:100%}.panel[_ngcontent-%COMP%], .panel__actions[_ngcontent-%COMP%]{display:flex;flex-direction:column}.panel__actions[_ngcontent-%COMP%]{align-items:flex-end}.panel__actions[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{margin-right:1em;font-size:1rem;color:#ff4d4f}.panel[_ngcontent-%COMP%]   .demo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;margin-bottom:1em}.panel[_ngcontent-%COMP%]   .demo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:.5em}"],changeDetection:0}),j),children:[{path:"test-and-associate",loadChildren:function(){return Promise.all([a.e(1),a.e(0),a.e(20)]).then(a.bind(null,"COhe")).then(function(e){return e.TestAndAssociateDeviceModule})},data:{stepIndex:0}},{path:"shipstation",loadChildren:function(){return a.e(31).then(a.bind(null,"MJku")).then(function(e){return e.ShipstationModule})},data:{stepIndex:1}},{path:"print-label",loadChildren:function(){return a.e(25).then(a.bind(null,"C7ii")).then(function(e){return e.PrintLabelModule})},data:{stepIndex:2}}]}],B=((F=function n(){e(this,n)}).\u0275mod=m.Mb({type:F}),F.\u0275inj=m.Lb({factory:function(e){return new(e||F)},imports:[[s.h.forChild(R)],s.h]}),F),V=a("D0x3"),N=((H=function n(){e(this,n)}).\u0275mod=m.Mb({type:H}),H.\u0275inj=m.Lb({factory:function(e){return new(e||H)},imports:[[c.a,B,V.a]]}),H)},D0x3:function(n,t,i){"use strict";i.d(t,"a",function(){return o});var r=i("fXoL"),o=function(){var n=function n(){e(this,n)};return n.\u0275mod=r.Mb({type:n}),n.\u0275inj=r.Lb({factory:function(e){return new(e||n)}}),n}()},LEIr:function(n,i,r){"use strict";r.d(i,"a",function(){return f});var o=r("fXoL"),a=r("ILvI"),c=r("2Vo4"),s=r("nYR2"),d=r("lJxs"),l=r("D0x3"),u=r("tk/3"),f=function(){var n=function(){function n(t){e(this,n),this.http=t,this.demoMode$=new c.a(!1),this.errors$=new c.a(null),this.deviceIsFound$=new c.a(null),this.orderIsLoading$=new c.a(null),this.changeStepEvt=new o.n,this.confirmEvt=new o.n,this.onConfirmation$=new c.a(null),this.orderInfo$=new c.a(null),this.addressFormIsValid$=new c.a(!1)}return t(n,[{key:"goToNextStep",value:function(){this.changeStepEvt.emit(1)}},{key:"goToPrevStep",value:function(){this.changeStepEvt.emit(-1)}},{key:"getOrderInfo",value:function(e){var n=this;return this.orderIsLoading$.next(!0),this.http.get(Object(a.u)(e)).pipe(Object(s.a)(function(){return n.orderIsLoading$.next(!1)}),Object(d.a)(function(e){return n.orderInfo=e}))}},{key:"orderInfo",get:function(){return this.orderInfo$.value},set:function(e){this.orderInfo$.next(e)}},{key:"addressFormIsValid",set:function(e){this.addressFormIsValid$.next(e)}}]),n}();return n.\u0275fac=function(e){return new(e||n)(o.Yb(u.c))},n.\u0275prov=o.Kb({token:n,factory:n.\u0275fac,providedIn:l.a}),n}()}}])}();