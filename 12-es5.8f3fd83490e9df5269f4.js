!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{Pj3g:function(e,t,i){"use strict";i.d(t,"a",function(){return b});var c=i("fXoL"),s=i("oaey"),u=i("nYR2"),l=i("1G5W"),f=i("lJxs"),d=i("2Vo4"),p=i("EY2u"),b=function(e){r(i,e);var t=a(i);function i(){var e;return n(this,i),(e=t.call(this)).isLoading$=new d.a(!0),e.pageIndex$=new c.n,e.params=null,e}return o(i,[{key:"stopLoading",value:function(){return this.isLoading$.next(!1),p.a}},{key:"goToPrevPage",value:function(){return this.pageIndex$.emit(),p.a}},{key:"getItems",value:function(e){var t=this;return this.isLoading$.next(!0),e.pipe(Object(u.a)(function(){return t.isLoading$.next(!1)}),Object(l.a)(this.destroyed),Object(f.a)(function(e){return t.items=e.items,t.totalCount=e.total_count,e}))}}]),i}(s.a)},TwVa:function(e,t,i){"use strict";i.d(t,"a",function(){return c}),i.d(t,"g",function(){return s}),i.d(t,"b",function(){return u}),i.d(t,"f",function(){return f}),i.d(t,"c",function(){return d}),i.d(t,"e",function(){return p}),i.d(t,"d",function(){return b}),i.d(t,"h",function(){return v});var c=function(){function e(){n(this,e)}return o(e,[{key:"label",get:function(){return this.device_id}}]),e}(),s=function(){function e(){n(this,e)}return o(e,[{key:"label",get:function(){return"".concat(this.first_name," ").concat(this.middle_name||""," ").concat(this.last_name," - ").concat(this.patient_id)}}]),e}(),u=function(e){r(i,e);var t=a(i);function i(){return n(this,i),t.apply(this,arguments)}return o(i,[{key:"label",get:function(){return"".concat(this.first_name," ").concat(this.last_name," - ").concat(this.npi)}}]),i}(function(){return function e(){n(this,e)}}()),l=i("2Vo4"),f=function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n(this,e),this.totalCount=0,this.items$=new l.a(new Array),this.searchChange$=new l.a(null),this.getRequestFuncName=t,this.type=i},d=function e(){n(this,e)},p=function(){function e(){n(this,e)}return o(e,[{key:"label",get:function(){return this.name}}]),e}(),b=function e(t){n(this,e),Object.assign(this,t)},v=function(){function e(){n(this,e)}return o(e,[{key:"label",get:function(){return this.name}}]),e}()},VdD3:function(e,t,i){"use strict";i.d(t,"a",function(){return b});var r=i("fXoL"),c=i("dEAy"),a=i("OzZK"),s=i("RwU8"),u=i("C2AL"),l=i("ofXK");function f(e,t){if(1&e){var n=r.Vb();r.Ub(0,"button",5),r.bc("click",function(){return r.vc(n),r.ec(2).onSaveClick(!1)}),r.Hc(1,"Save & Add another"),r.Tb()}if(2&e){var i=r.ec(2);r.mc("disabled",!i.formValid)("nzLoading",i.processing&&!i.processingClose)}}function d(e,t){1&e&&(r.Ub(0,"span"),r.Hc(1,"\xa0& Close"),r.Tb())}function p(e,t){if(1&e){var n=r.Vb();r.Sb(0),r.Ub(1,"button",1),r.bc("click",function(){return r.vc(n),r.ec().closeModal()}),r.Hc(2,"Cancel"),r.Tb(),r.Fc(3,f,2,2,"button",2),r.Ub(4,"button",3),r.bc("click",function(){return r.vc(n),r.ec().onSaveClick(!0)}),r.Hc(5,"Save"),r.Fc(6,d,2,0,"span",4),r.Tb(),r.Rb()}if(2&e){var i=r.ec();r.Ab(3),r.mc("ngIf",!i.isEditing),r.Ab(1),r.mc("disabled",!i.formValid)("nzLoading",i.processing&&i.processingClose),r.Ab(2),r.mc("ngIf",!i.isEditing)}}var b=function(){var e=function(){function e(){n(this,e),this.saveEvent=new r.n,this.closeEvent=new r.n,this.formValid=!0}return o(e,[{key:"closeModal",value:function(){this.closeEvent.emit()}},{key:"onSaveClick",value:function(e){this.saveEvent.emit(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Ib({type:e,selectors:[["app-modal-footer"]],inputs:{processing:"processing",processingClose:"processingClose",formValid:"formValid",isEditing:"isEditing"},outputs:{saveEvent:"saveEvent",closeEvent:"closeEvent"},decls:1,vars:0,consts:[[4,"nzModalFooter"],["nz-button","",3,"click"],["nz-button","","nzType","default",3,"disabled","nzLoading","click",4,"ngIf"],["nz-button","","nzType","primary",3,"disabled","nzLoading","click"],[4,"ngIf"],["nz-button","","nzType","default",3,"disabled","nzLoading","click"]],template:function(e,t){1&e&&r.Fc(0,p,7,4,"ng-container",0)},directives:[c.a,a.a,s.a,u.a,l.o],encapsulation:2}),e}()},bb81:function(t,i,c){"use strict";c.d(i,"a",function(){return H});var s,u=c("fXoL"),l=c("EY2u"),f=c("HDdC"),d=c("2Vo4"),p=c("1G5W"),b=c("vkgz"),v=c("/uUt"),m=c("Kj3r"),h=c("eIep"),g=c("nYR2"),y=c("JIr8"),z=c("pLZG"),O=c("oaey"),C=c("CvgI"),T=c("UXun"),_=c("lJxs"),k=c("ovFC"),S=c("tk/3"),w=((s=function(){function t(e){n(this,t),this.http=e,this.options$=new d.a([]),this.totalCount$=new d.a(0),this.isLoadingMore$=new d.a(!1),this.isLoading$=new d.a(!0),this.filters={}}return o(t,[{key:"loadMoreOptions",value:function(t,n){var i=this;return this.options.length<this.totalCount?(this.isLoadingMore=!0,this.getOptionsRequest(t).pipe(Object(_.a)(function(t){i.totalCount=t.total_count;var o=n?t.items.map(function(e){return n(e)}):t.items;i.options=[].concat(e(i.options),e(o))}),Object(g.a)(function(){return i.isLoadingMore=!1}))):l.a}},{key:"getOptions",value:function(e,t){var n=this;return this.getOptionsRequest(e).pipe(Object(_.a)(function(e){n.totalCount=e.total_count,n.options=t?e.items.map(function(e){return t(e)}):e.items}),Object(g.a)(function(){return n.isLoading=!1}))}},{key:"getOptionsRequest",value:function(e){var t=Object(C.a)(Object.assign({limit:15,offset:this.options.length},this.filters));return this.http.get(e,{params:t})}},{key:"optionsAsObservable$",get:function(){return this.options$.asObservable()}},{key:"options",get:function(){return this.options$.value},set:function(t){this.options$.next(e(t))}},{key:"totalCount",get:function(){return this.totalCount$.value},set:function(e){this.totalCount$.next(e)}},{key:"isLoadingMore",get:function(){return this.isLoadingMore$.value},set:function(e){this.isLoadingMore$.next(e)}},{key:"isLoadingMoreAsObservable$",get:function(){return this.isLoadingMore$.pipe(Object(T.a)(1))}},{key:"isLoadingAsObservable$",get:function(){return this.isLoading$.pipe(Object(T.a)(1))}},{key:"isLoading",get:function(){return this.isLoading$.value},set:function(e){this.isLoading$.next(e)}}]),t}()).\u0275fac=function(e){return new(e||s)(u.Yb(S.c))},s.\u0275prov=u.Kb({token:s,factory:s.\u0275fac,providedIn:k.a}),s),I=c("zAKX"),A=c("3Pt+"),L=c("vxfF"),U=c("ofXK"),j=c("qAZ0"),P=c("QlLE");function M(e,t){if(1&e&&u.Pb(0,"nz-option",7),2&e){var n=t.$implicit,i=u.ec();u.mc("nzValue",n.id)("nzLabel",n[i.labelKey])("nzDisabled",i.optionDisabled(n.id))}}function F(e,t){1&e&&(u.Ub(0,"nz-option",8),u.Ub(1,"div",9),u.Pb(2,"nz-spin"),u.Ub(3,"span",10),u.Hc(4,"Searching..."),u.Tb(),u.Tb(),u.Tb())}function x(e,t){1&e&&(u.Ub(0,"div",14),u.Pb(1,"nz-spin"),u.Ub(2,"span"),u.Hc(3,"Loading data..."),u.Tb(),u.Tb())}function D(e,t){if(1&e&&(u.Ub(0,"div",12),u.Fc(1,x,4,0,"div",13),u.fc(2,"async"),u.Tb()),2&e){var n=u.ec(2),i=u.uc(10);u.Ab(1),u.mc("ngIf",u.gc(2,2,n.isLoadingMore$))("ngIfElse",i)}}function $(e,t){if(1&e&&u.Fc(0,D,3,4,"div",11),2&e){var n=u.ec();u.mc("ngIf",!n.isSearching&&n.totalCount>15&&"tags"!==n.mode)}}function E(e,t){if(1&e&&(u.Ub(0,"div",15),u.Hc(1),u.Tb()),2&e){var n=u.ec();u.Ab(1),u.Kc("",n.options.length," of ",n.totalCount,"")}}function V(e,t){if(1&e&&u.Pb(0,"nz-empty",16),2&e){var n=u.ec();u.mc("nzNotFoundContent",n.noDataText)}}var R,H=((R=function(e){r(i,e);var t=a(i);function i(e){var o;return n(this,i),(o=t.call(this)).selectService=e,o.labelKey="name",o.size="default",o.mode="default",o.filterName="name",o.canLoad=!0,o.loadOptions$=new f.a,o.valueChangedEvt=new u.n,o.searchChange$=new d.a(null),o}return o(i,[{key:"onScrollToBottom",value:function(){this.selectService.loadMoreOptions(this.url,this.transformFunc).pipe(Object(p.a)(this.destroyed)).subscribe()}},{key:"onSearch",value:function(e){(e||this.selectService.filters[this.filterName])&&(this.isSearching=!0,this.searchChange$.next(e))}},{key:"onOpenChange",value:function(e){!e&&this.selectService.filters[this.filterName]&&(this.selectService.filters[this.filterName]=null,this.selectService.options=[],this.getOptions())}},{key:"selectionValueChanged",value:function(e){e&&this.valueChangedEvt.emit(this.selectService.options.find(function(t){return t.id===e}))}},{key:"searchOptions",value:function(){var e=this;return this.searchChange$.asObservable().pipe(Object(b.a)(function(t){e.selectService.options=[],e.selectService.filters[e.filterName]=t}),Object(v.a)(),Object(m.a)(500),Object(h.a)(function(){return e.selectService.getOptions(e.url,e.transformFunc).pipe(Object(g.a)(function(){e.isSearching=!1,e.disabled=!1}),Object(y.a)(function(){return l.a}))}),Object(p.a)(this.destroyed))}},{key:"getOptions",value:function(){this.selectService.getOptions(this.url,this.transformFunc).pipe(Object(p.a)(this.destroyed)).subscribe()}},{key:"optionDisabled",value:function(e){return!(!this.disabledOptions||!this.disabledOptions.length)&&this.disabledOptions.map(function(e){return e.id}).includes(e)}},{key:"ngOnInit",value:function(){var e=this,t=this.control.value;t&&(this.selectService.filters.include=t),this.isLoading$=this.selectService.isLoadingAsObservable$,this.isLoadingMore$=this.selectService.isLoadingMoreAsObservable$,this.options$=this.selectService.optionsAsObservable$,this.canLoad&&this.searchOptions().subscribe(),this.loadOptions$.pipe(Object(b.a)(function(){e.disabled=!0,e.selectService.isLoading=!0}),Object(p.a)(this.destroyed),Object(z.a)(function(e){return!!e}),Object(h.a)(function(t){return t.forEach(function(t){return e.selectService.filters[t.key]=t.value}),e.canLoad=!0,e.searchOptions()})).subscribe()}},{key:"totalCount",get:function(){return this.selectService.totalCount}},{key:"options",get:function(){return this.selectService.options}}]),i}(O.a)).\u0275fac=function(e){return new(e||R)(u.Ob(w))},R.\u0275cmp=u.Ib({type:R,selectors:[["app-select"]],inputs:{control:"control",url:"url",labelKey:"labelKey",size:"size",disabled:"disabled",placeholder:"placeholder",mode:"mode",maxTagCount:"maxTagCount",filterName:"filterName",canLoad:"canLoad",disabledOptions:"disabledOptions",noDataText:"noDataText",transformFunc:"transformFunc",loadOptions$:"loadOptions$"},outputs:{valueChangedEvt:"valueChangedEvt"},features:[u.zb([w]),u.xb],decls:13,vars:20,consts:[["nzAllowClear","","nzServerSearch","","nzShowSearch","",3,"nzSize","nzPlaceHolder","formControl","nzLoading","nzDisabled","nzMode","nzMaxTagCount","nzDropdownRender","nzShowArrow","nzNotFoundContent","nzOnSearch","nzOpenChange","ngModelChange","nzScrollToBottom"],[3,"itemSize","maxBufferPx"],[3,"nzValue","nzLabel","nzDisabled",4,"ngFor","ngForOf"],["nzDisabled","","nzCustomContent","",4,"ngIf"],["loadingMoreOptionsTpl",""],["totalCountTpl",""],["noDataTpl",""],[3,"nzValue","nzLabel","nzDisabled"],["nzDisabled","","nzCustomContent",""],[1,"searching-option"],[1,"searching-option__text"],["class","dropdown-footer",4,"ngIf"],[1,"dropdown-footer"],["class","dropdown-footer__spinner",4,"ngIf","ngIfElse"],[1,"dropdown-footer__spinner"],[1,"dropdown-footer__total"],["nzNotFoundImage","simple",3,"nzNotFoundContent"]],template:function(e,t){if(1&e&&(u.Ub(0,"nz-select",0),u.bc("nzOnSearch",function(e){return t.onSearch(e)})("nzOpenChange",function(e){return t.onOpenChange(e)})("ngModelChange",function(e){return t.selectionValueChanged(e)})("nzScrollToBottom",function(){return t.onScrollToBottom()}),u.fc(1,"async"),u.fc(2,"async"),u.Ub(3,"cdk-virtual-scroll-viewport",1),u.Fc(4,M,1,3,"nz-option",2),u.fc(5,"async"),u.Tb(),u.Fc(6,F,5,0,"nz-option",3),u.Fc(7,$,1,1,"ng-template",null,4,u.Gc),u.Tb(),u.Fc(9,E,2,2,"ng-template",null,5,u.Gc),u.Fc(11,V,1,1,"ng-template",null,6,u.Gc)),2&e){var n=u.uc(8),i=u.uc(12);u.mc("nzSize",t.size)("nzPlaceHolder",t.placeholder)("formControl",t.control)("nzLoading",t.canLoad&&u.gc(1,14,t.isLoading$))("nzDisabled",t.disabled||u.gc(2,16,t.isLoading$))("nzMode",t.mode)("nzMaxTagCount",t.maxTagCount)("nzDropdownRender",n)("nzShowArrow",!0)("nzNotFoundContent",i),u.Ab(3),u.mc("itemSize",32)("maxBufferPx",160),u.Ab(1),u.mc("ngForOf",u.gc(5,18,t.options$)),u.Ab(2),u.mc("ngIf",t.isSearching)}},directives:[I.d,A.n,A.f,L.b,L.a,U.n,U.o,I.a,j.a,P.b],pipes:[U.b],styles:["[_nghost-%COMP%], [_nghost-%COMP%]   nz-select[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ant-select-arrow{top:48%}.dropdown-footer[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;align-items:center;justify-items:start;padding:4px 14px;color:#1890ff;border-top:1px solid #f0f0f0}.dropdown-footer__total[_ngcontent-%COMP%]{width:100%;grid-column:2/3;display:flex;justify-content:flex-end}.dropdown-footer__spinner[_ngcontent-%COMP%]{display:flex;align-items:center}.dropdown-footer__spinner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:18px}.dropdown-footer[_ngcontent-%COMP%]   nz-spin[_ngcontent-%COMP%]{margin-left:12px}.option[_ngcontent-%COMP%]{display:flex}.option[_ngcontent-%COMP%]   nz-spin[_ngcontent-%COMP%]{margin-left:.9em}.option[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#1890ff;margin-left:1.1em}.searching-option[_ngcontent-%COMP%]{display:flex;align-items:center}.searching-option[_ngcontent-%COMP%]   nz-spin[_ngcontent-%COMP%]{margin-left:.8em}.searching-option__text[_ngcontent-%COMP%]{margin-left:1.2em}"],changeDetection:0}),R)},o5fV:function(e,t,i){"use strict";i.d(t,"a",function(){return v});var r,c=i("mrSG"),a=i("sbGu"),s=i("dEAy"),u=i("CvgI"),l=i("tk/3"),f=i("lJxs"),d=i("pLZG"),p=i("fXoL"),b=((r=function e(t){n(this,e),this.modal=t,this.modal.updateConfig({nzWrapClassName:"vertical-center-modal",nzMaskClosable:!0,nzAutofocus:null,nzOkType:"danger",nzOkText:"Delete",nzClosable:!1})}).\u0275fac=function(e){return new(e||r)(p.Ob(s.c))},r.\u0275cmp=p.Ib({type:r,selectors:[["ng-component"]],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),r),v=function(){function e(){n(this,e);var t=a.a.getInjector;this.http=t.get(l.c),this.modalService=t.get(s.d)}return o(e,[{key:"getItems",value:function(e,t,n){var i=Object(u.a)(e),o=Object.assign({params:i},n);return this.http.get(t,Object.assign({},o)).pipe(Object(f.a)(function(e){return e}))}},{key:"openModal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;return this.modalService.create(Object.assign(Object.assign({},i&&{nzWrapClassName:"vertical-center-modal"}),{nzTitle:e,nzWidth:o+"px",nzContent:n,nzComponentParams:Object.assign({},t)})).afterClose.pipe(Object(d.a)(function(e){return e}))}},{key:"openActionConfirmationModal",value:function(e,t){return this.modalService.confirm({nzContent:t,nzTitle:e,nzOnOk:function(){return!0}}).afterClose.pipe(Object(d.a)(function(e){return e}))}},{key:"deleteItem",value:function(e,t){var n=this;return this.modalService.confirm({nzContent:b,nzTitle:e,nzOnOk:function(e){return Object(c.a)(n,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.modal.config.nzOkLoading=!0,n.next=3,this.deleteItemRequest(t);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}},n,this)}))}}).afterClose.pipe(Object(d.a)(function(e){return e}))}},{key:"deleteItemRequest",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.http.delete(e).toPromise().then(function(e){return"success"===e.status});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}))}}]),e}()},pfyX:function(e,t,i){"use strict";i.d(t,"a",function(){return v});var c=i("oaey"),s=i("sbGu"),u=i("lhsU"),l=i("3Pt+"),f=i("1G5W"),d=i("nYR2"),p=i("2Vo4"),b=i("bNXi"),v=function(e){r(i,e);var t=a(i);function i(e){var o;n(this,i),(o=t.call(this)).modal=e,o.loadOptions$=new p.a(null),o.updateAfterClosing=!1;var r=s.a.getInjector;return o.errorService=r.get(u.a),o.notifService=r.get(b.b),o}return o(i,[{key:"closeModal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.updateAfterClosing;this.modal.destroy(e)}},{key:"saveItem",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.processing=!0,this.processingClose=e,this.form&&(this.markFormGroupTouched(this.form),this.errorService.form=this.form),t.pipe(Object(f.a)(this.destroyed),Object(d.a)(function(){return n.processing=!1})).subscribe(function(){i&&n.notifService.success(i,""),e?n.closeModal(!0):(n.form&&n.form.reset(n.formInitialValue),n.updateAfterClosing=!0)})}},{key:"onItemSelected",value:function(e,t,n){n.push(e),t.patchValue(null,{emitEvent:!1})}},{key:"onDeleteItemClick",value:function(e,t){this[t]=this[t].filter(function(t){return t.id!==e})}},{key:"markFormGroupTouched",value:function(e){var t=this;Object.values(e.controls).forEach(function(e){e.markAsTouched(),e instanceof l.h&&t.markFormGroupTouched(e)})}},{key:"f",get:function(){return this.form.controls}},{key:"formInitValue",set:function(e){this.formInitialValue=Object.assign({},e)}}]),i}(c.a)},uPpU:function(t,i,c){"use strict";c.r(i),c.d(i,"DeviceListModule",function(){return Te});var s,u=c("PCNd"),l=c("tyNb"),f=c("Pj3g"),d=c("fXoL"),p=c("+K6+"),b=c("dEAy"),v=c("4U9O"),m=((s=function e(){n(this,e)}).\u0275mod=d.Mb({type:s}),s.\u0275inj=d.Lb({factory:function(e){return new(e||s)}}),s),h=c("ILvI"),g=c("o5fV"),y=c("TwVa"),z=c("3Pt+"),O=function(e){r(i,e);var t=a(i);function i(){return n(this,i),t.call(this)}return o(i,[{key:"edit",value:function(e,t){return this.editItemRequest(e,"Device updated successfully",Object(h.g)(t))}},{key:"create",value:function(e){return this.createItemRequest(e,"Device created successfully",h.f)}},{key:"getPracticeOptions",value:function(e){return this.getOptions(e,h.C)}}]),i}(c("vxZU").a),C=c("pfyX"),T=c("1G5W"),_=c("ocnv"),k=c("B+r4"),S=c("bb81"),w=c("zAKX"),I=c("ofXK"),A=c("PTRe"),L=c("VdD3"),U=c("5vDB"),j=c("0lU3");function P(e,t){if(1&e&&d.Pb(0,"nz-option",12),2&e){var n=t.$implicit;d.mc("nzValue",n.key)("nzLabel",n.value)}}function M(e,t){if(1&e&&(d.Sb(0),d.Pb(1,"nz-divider"),d.Ub(2,"nz-form-item"),d.Ub(3,"nz-form-label",7),d.Hc(4,"SIM card ID"),d.Tb(),d.Ub(5,"nz-form-control",2),d.Pb(6,"input",13),d.Tb(),d.Tb(),d.Ub(7,"nz-form-item"),d.Ub(8,"nz-form-label",7),d.Hc(9,"SIM activation date"),d.Tb(),d.Ub(10,"nz-form-control",2),d.Pb(11,"nz-date-picker",14),d.Tb(),d.Tb(),d.Rb()),2&e){d.ec();var n=d.uc(26);d.Ab(3),d.mc("nzSpan",6),d.Ab(2),d.mc("nzErrorTip",n),d.Ab(3),d.mc("nzSpan",6),d.Ab(2),d.mc("nzErrorTip",n),d.Ab(1),d.mc("nzShowToday",!1)}}function F(e,t){1&e&&(d.Sb(0),d.Hc(1," This field is required "),d.Rb())}function x(e,t){if(1&e&&(d.Sb(0),d.Hc(1),d.Rb()),2&e){var n=d.ec().$implicit;d.Ab(1),d.Jc(" ",n.errors.validationError," ")}}function D(e,t){if(1&e&&(d.Fc(0,F,2,0,"ng-container",9),d.Fc(1,x,2,1,"ng-container",9)),2&e){var n=t.$implicit;d.mc("ngIf",n.hasError("required")),d.Ab(1),d.mc("ngIf",n.hasError("validationError"))}}var $,E,V,R,H=((R=function(e){r(i,e);var t=a(i);function i(e,o){var r;return n(this,i),(r=t.call(this,e)).crudService=o,r.practiceUrl=h.C,r.practices=new y.f("getPracticeOptions","practices"),r.deviceTypeOptions=v.a,r.bpmOnlyControls=[{controlName:"sim_activation_date",defaultValue:null},{controlName:"sim_card_id",defaultValue:""}],r.form=new z.h({device_type:new z.e("",[z.s.required]),practice:new z.e(null,[z.s.required]),device_id:new z.e("",[z.s.required]),serial_number:new z.e("")}),r}return o(i,[{key:"onSaveClick",value:function(e){var t,n=null===(t=this.device)||void 0===t?void 0:t.id,i=this.form.value,o=n?this.crudService.edit(i,n):this.crudService.create(i);this.saveItem(e,o)}},{key:"practiceValueChanged",value:function(e){this.loadOptions$.next([{key:"practice",value:e.name}])}},{key:"ngOnInit",value:function(){var e=this;if(this.device)for(var t in this.deviceTypeOptions[this.device.device_type]===this.deviceTypeOptions.blood_pressure_monitor&&this.bpmOnlyControls.forEach(function(t){return e.form.addControl(t.controlName,new z.e(t.defaultValue))}),this.device)if(Object.prototype.hasOwnProperty.call(this.f,t)){if(this.device[t]&&"object"==typeof this.device[t]){this.f[t].patchValue(this.device[t].id,{emitEvent:!1});continue}if("sim_activation_date"===t){this.f[t].patchValue(this.device[t]?new Date(this.device[t]):null,{emitEvent:!1});continue}this.f[t].patchValue(this.device[t],{emitEvent:!1})}this.formInitValue=this.form.getRawValue(),this.f.device_type.valueChanges.pipe(Object(T.a)(this.destroyed)).subscribe(function(t){e.bpmOnlyControls.forEach(e.deviceTypeOptions[t]===e.deviceTypeOptions.blood_pressure_monitor||e.deviceTypeOptions[t]===e.deviceTypeOptions.wrist_bp_monitor?function(t){e.form.addControl(t.controlName,new z.e(t.defaultValue))}:function(t){return e.form.removeControl(t.controlName)})})}}]),i}(C.a)).\u0275fac=function(e){return new(e||R)(d.Ob(b.c),d.Ob(O))},R.\u0275cmp=d.Ib({type:R,selectors:[["ng-component"]],features:[d.zb([O]),d.xb],decls:27,vars:19,consts:[["nz-form","",3,"formGroup"],["nzRequired","",3,"nzSpan"],[3,"nzErrorTip"],["placeholder","Search and select practice",3,"control","url","valueChangedEvt"],["formControlName","device_type"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nz-input","","formControlName","device_id","autocomplete",""],[3,"nzSpan"],["nz-input","","formControlName","serial_number","autocomplete",""],[4,"ngIf"],[3,"processing","processingClose","isEditing","formValid","saveEvent","closeEvent"],["errorTpl",""],[3,"nzValue","nzLabel"],["nz-input","","formControlName","sim_card_id","autocomplete",""],["formControlName","sim_activation_date","nzInputReadOnly","","nzFormat","dd/MM/yyyy",3,"nzShowToday"]],template:function(e,t){if(1&e&&(d.Ub(0,"form",0),d.Ub(1,"nz-form-item"),d.Ub(2,"nz-form-label",1),d.Hc(3,"Practice"),d.Tb(),d.Ub(4,"nz-form-control",2),d.Ub(5,"app-select",3),d.bc("valueChangedEvt",function(e){return t.practiceValueChanged(e)}),d.Tb(),d.Tb(),d.Tb(),d.Ub(6,"nz-form-item"),d.Ub(7,"nz-form-label",1),d.Hc(8,"Device type"),d.Tb(),d.Ub(9,"nz-form-control",2),d.Ub(10,"nz-select",4),d.Fc(11,P,1,2,"nz-option",5),d.fc(12,"keyvalue"),d.Tb(),d.Tb(),d.Tb(),d.Ub(13,"nz-form-item"),d.Ub(14,"nz-form-label",1),d.Hc(15,"Device ID"),d.Tb(),d.Ub(16,"nz-form-control",2),d.Pb(17,"input",6),d.Tb(),d.Tb(),d.Ub(18,"nz-form-item"),d.Ub(19,"nz-form-label",7),d.Hc(20,"Serial number"),d.Tb(),d.Ub(21,"nz-form-control",2),d.Pb(22,"input",8),d.Tb(),d.Tb(),d.Fc(23,M,12,5,"ng-container",9),d.Tb(),d.Ub(24,"app-modal-footer",10),d.bc("saveEvent",function(e){return t.onSaveClick(e)})("closeEvent",function(){return t.closeModal()}),d.Tb(),d.Fc(25,D,2,2,"ng-template",null,11,d.Gc)),2&e){var n=d.uc(26);d.mc("formGroup",t.form),d.Ab(2),d.mc("nzSpan",6),d.Ab(2),d.mc("nzErrorTip",n),d.Ab(1),d.mc("control",t.f.practice)("url",t.practiceUrl),d.Ab(2),d.mc("nzSpan",6),d.Ab(2),d.mc("nzErrorTip",n),d.Ab(2),d.mc("ngForOf",d.gc(12,17,t.deviceTypeOptions)),d.Ab(3),d.mc("nzSpan",6),d.Ab(2),d.mc("nzErrorTip",n),d.Ab(3),d.mc("nzSpan",6),d.Ab(2),d.mc("nzErrorTip",n),d.Ab(2),d.mc("ngIf",t.deviceTypeOptions[t.f.device_type.value]===t.deviceTypeOptions.blood_pressure_monitor||t.deviceTypeOptions[t.f.device_type.value]===t.deviceTypeOptions.wrist_bp_monitor),d.Ab(1),d.mc("processing",t.processing)("processingClose",t.processingClose)("isEditing",!(null==t.device||!t.device.id))("formValid",t.form.valid)}},directives:[z.t,z.o,_.b,z.i,k.c,_.c,k.a,_.d,_.a,S.a,w.d,z.n,z.g,I.n,A.b,z.d,I.o,L.a,w.a,U.a,j.b],pipes:[I.i],encapsulation:2}),R),K=((V=function(e){r(i,e);var t=a(i);function i(){return n(this,i),t.call(this)}return o(i,[{key:"getDeviceList",value:function(e){return this.getItems(e,h.f)}},{key:"addDevice",value:function(){return this.openModal("Add new device",void 0,H)}},{key:"editDevice",value:function(e){return this.openModal("Edit device "+e.device_id,{device:e},H)}},{key:"deleteDevice",value:function(e){return this.deleteItem("Are you sure you want to delete device ".concat(e.device_id,"?"),Object(h.g)(e.id))}}]),i}(g.a)).\u0275fac=function(e){return new(e||V)},V.\u0275prov=d.Kb({token:V,factory:V.\u0275fac,providedIn:m}),V),N=((E=function(t){r(o,t);var i=a(o);function o(){var t;return n(this,o),(t=i.call(this)).displayColumns=[{name:"Device type",filterMultiple:!1,filterKey:"device_type",listOfFilter:e(Object.entries(v.a).map(function(e){return{text:e[1],value:e[0]}})),pipe:"deviceType",filter:!0,visible:!1},{name:"Device ID",filterKey:"device_id",customFilter:"search",filter:!0,visible:!1},{name:"Serial number",filterKey:"serial_number",customFilter:"search",filter:!0,visible:!1},{name:"SIM card ID",filterKey:"sim_card_id",customFilter:"search",filter:!0,visible:!1},{name:"SIM activation date"},{name:"Practice",filterKey:"practice",customFilter:"search",filter:!0,visible:!1},{name:"Patient",filterKey:"patient_name",customFilter:"search",filter:!0,visible:!1},{name:"Last measurement date",filterKey:"last_measurement_date",customFilter:"date",sort:!0,sortOrder:null,filter:!0,visible:!1},{name:"State",filterMultiple:!1,filterKey:"active",listOfFilter:[{text:"Active",value:"true"},{text:"Inactive",value:"false"}],filter:!0,visible:!1,pipe:"state"},{name:""}],t}return o}(K)).\u0275fac=function(e){return new(e||E)},E.\u0275prov=d.Kb({token:E,factory:E.\u0275fac,providedIn:m}),E),q=(($=function(t){r(o,t);var i=a(o);function o(){var t;return n(this,o),(t=i.call(this)).displayColumns=[{name:"Device type",filterMultiple:!1,filterKey:"device_type",listOfFilter:e(Object.entries(v.a).map(function(e){return{text:e[1],value:e[0]}})),pipe:"deviceType",filter:!0,visible:!1},{name:"Device ID",filterKey:"device_id",customFilter:"search",filter:!0,visible:!1},{name:"Serial number",filterKey:"serial_number",customFilter:"search",filter:!0,visible:!1},{name:"SIM card ID",filterKey:"sim_card_id",customFilter:"search",filter:!0,visible:!1},{name:"SIM activation date"},{name:"Patient",filterKey:"patient_name",customFilter:"search",filter:!0,visible:!1},{name:"Last measurement date",filterKey:"last_measurement_date",customFilter:"date",sort:!0,sortOrder:null,filter:!0,visible:!1},{name:"State",filterMultiple:!1,filterKey:"active",listOfFilter:[{text:"Active",value:"true"},{text:"Inactive",value:"false"}],filter:!0,visible:!1,pipe:"state"}],t}return o}(K)).\u0275fac=function(e){return new(e||$)},$.\u0275prov=d.Kb({token:$,factory:$.\u0275fac,providedIn:"root"}),$),G=new d.q("DeviceListService"),X={provide:G,useFactory:function(e){switch(e.currentRole){case"admin":return new N;case"manager":return new q}},deps:[p.a,b.d]},Z=c("mCNh"),B=c("eIep"),J=c("jPNr"),W=c("HZS1"),Y=c("1ReC"),Q=c("OzZK"),ee=c("C2AL"),te=c("RwU8"),ne=c("rMZv"),ie=c("FwiY"),oe=c("ZyQt"),re=c("Nqz0"),ce=c("Q8cG"),ae=c("pu9d"),se=function(){return["/import-data/devices"]};function ue(e,t){if(1&e){var n=d.Vb();d.Ub(0,"nz-page-header-extra"),d.Ub(1,"a",5),d.Hc(2,"Import devices"),d.Tb(),d.Ub(3,"button",6),d.bc("click",function(){return d.vc(n),d.ec().onAddClick()}),d.Hc(4,"Add device"),d.Tb(),d.Tb()}2&e&&(d.Ab(1),d.mc("routerLink",d.oc(1,se)))}function le(e,t){if(1&e&&(d.Ub(0,"td"),d.Hc(1),d.Tb()),2&e){var n=d.ec().$implicit;d.Ab(1),d.Ic(null==n.practice?null:n.practice.name)}}function fe(e,t){if(1&e&&(d.Sb(0),d.Ub(1,"a",12),d.Hc(2),d.Pb(3,"i",13),d.Tb(),d.Rb()),2&e){var n=t.ngIf;d.Ab(1),d.mc("href","/patient-details/"+n.id,d.xc),d.Ab(1),d.Lc(" ",n.first_name," ",n.last_name," - ",n.patient_id," ")}}function de(e,t){1&e&&(d.Ub(0,"nz-tag",14),d.Hc(1,"active"),d.Tb())}function pe(e,t){1&e&&(d.Ub(0,"nz-tag",15),d.Hc(1,"inactive"),d.Tb())}function be(e,t){if(1&e){var n=d.Vb();d.Ub(0,"td",16),d.Ub(1,"div"),d.Ub(2,"button",17),d.Pb(3,"i",18),d.Tb(),d.Ub(4,"nz-dropdown-menu",null,19),d.Ub(6,"ul",20),d.Ub(7,"button",21),d.bc("click",function(){d.vc(n);var e=d.ec().$implicit;return d.ec().onEditClick(e)}),d.Ub(8,"div",22),d.Pb(9,"i",23),d.Ub(10,"span"),d.Hc(11,"Edit"),d.Tb(),d.Tb(),d.Tb(),d.Ub(12,"button",21),d.bc("click",function(){d.vc(n);var e=d.ec().$implicit;return d.ec().onDeleteClick(e)}),d.Ub(13,"div",24),d.Pb(14,"i",25),d.Ub(15,"span"),d.Hc(16,"Delete"),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Tb()}if(2&e){var i=d.uc(5);d.Ab(2),d.mc("nzDropdownMenu",i)}}var ve=function(){return["admin"]};function me(e,t){if(1&e&&(d.Ub(0,"tr"),d.Ub(1,"td"),d.Hc(2),d.fc(3,"deviceType"),d.Tb(),d.Ub(4,"td"),d.Hc(5),d.Tb(),d.Ub(6,"td"),d.Hc(7),d.Tb(),d.Ub(8,"td"),d.Hc(9),d.Tb(),d.Ub(10,"td"),d.Hc(11),d.fc(12,"date"),d.Tb(),d.Fc(13,le,2,1,"td",2),d.Ub(14,"td"),d.Fc(15,fe,4,4,"ng-container",7),d.Tb(),d.Ub(16,"td"),d.Hc(17),d.fc(18,"date"),d.Tb(),d.Ub(19,"td",8),d.Fc(20,de,2,0,"nz-tag",9),d.Fc(21,pe,2,0,"nz-tag",10),d.Tb(),d.Fc(22,be,17,1,"td",11),d.Tb()),2&e){var n=t.$implicit;d.Ab(2),d.Ic(d.gc(3,11,n.device_type)),d.Ab(3),d.Ic(n.device_id),d.Ab(2),d.Ic(n.serial_number),d.Ab(2),d.Ic(n.sim_card_id),d.Ab(2),d.Ic(d.hc(12,13,n.sim_activation_date,"short")),d.Ab(2),d.mc("appRolesAccess",d.oc(19,ve)),d.Ab(2),d.mc("ngIf",n.patient),d.Ab(2),d.Ic(d.hc(18,16,n.last_measurement_date,"short")),d.Ab(3),d.mc("ngIf",n.active),d.Ab(1),d.mc("ngIf",!n.active),d.Ab(1),d.mc("appRolesAccess",d.oc(20,ve))}}var he,ge,ye,ze=[{path:"",component:(he=function(e){r(i,e);var t=a(i);function i(e){var o;return n(this,i),(o=t.call(this)).deviceListService=e,o.displayColumns=o.deviceListService.displayColumns,o}return o(i,[{key:"getDevices",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params;return this.getItems(this.deviceListService.getDeviceList(e)).pipe(Object(T.a)(this.destroyed))}},{key:"onAddClick",value:function(){this.deviceListService.addDevice().pipe(this.devicesPipe).subscribe()}},{key:"onEditClick",value:function(e){this.deviceListService.editDevice(e).pipe(this.devicesPipe).subscribe()}},{key:"onDeleteClick",value:function(e){var t=this;this.deviceListService.deleteDevice(e).pipe(Object(B.a)(function(){return 1===t.items.length?t.goToPrevPage():t.getDevices()})).subscribe()}},{key:"onQueryParamsChange",value:function(e){this.params=e,this.getDevices().subscribe()}},{key:"devicesPipe",get:function(){var e=this;return Object(Z.a)(Object(B.a)(function(){return e.getDevices()}))}}]),i}(f.a),he.\u0275fac=function(e){return new(e||he)(d.Ob(G))},he.\u0275cmp=d.Ib({type:he,selectors:[["ng-component"]],features:[d.zb([X]),d.xb],decls:5,vars:8,consts:[[1,"panel"],["nzTitle","Device list",1,"page-header"],[4,"appRolesAccess"],[3,"data","displayColumns","totalCount","pageIndex$","isLoading$","queryParamsChange"],[4,"ngFor","ngForOf"],["nz-button","","nzType","link",3,"routerLink"],["nz-button","","nzType","primary",3,"click"],[4,"ngIf"],[1,"table-cell__state"],["nzColor","green",4,"ngIf"],["nzColor","red",4,"ngIf"],["class","table-cell__actions",4,"appRolesAccess"],["target","_blank",3,"href"],["nz-icon","","nzType","icon:external-link"],["nzColor","green"],["nzColor","red"],[1,"table-cell__actions"],["nz-button","","nzType","link","nzTrigger","click","nz-dropdown","",3,"nzDropdownMenu"],["nz-icon","","nzType","icon:more","nzTheme","outline"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",1,"btn--menu-item",3,"click"],[1,"ant-btn-sm","ant-btn-link","ant-btn"],["nz-icon","","nzType","edit","nzTheme","outline"],[1,"ant-btn-sm","ant-btn-link","ant-btn","ant-btn-dangerous"],["nz-icon","","nzType","delete","nzTheme","outline"]],template:function(e,t){1&e&&(d.Ub(0,"div",0),d.Ub(1,"nz-page-header",1),d.Fc(2,ue,5,2,"nz-page-header-extra",2),d.Tb(),d.Ub(3,"app-table-wrapper",3),d.bc("queryParamsChange",function(e){return t.onQueryParamsChange(e)}),d.Fc(4,me,23,21,"tr",4),d.Tb(),d.Tb()),2&e&&(d.Ab(2),d.mc("appRolesAccess",d.oc(7,ve)),d.Ab(1),d.mc("data",t.items)("displayColumns",t.displayColumns)("totalCount",t.totalCount)("pageIndex$",t.pageIndex$)("isLoading$",t.isLoading$.asObservable()),d.Ab(1),d.mc("ngForOf",t.items))},directives:[J.a,W.a,Y.a,I.n,J.c,Q.a,l.g,ee.a,te.a,ne.i,ne.b,I.o,ie.a,oe.a,re.d,re.b,re.e,ce.c,ce.d],pipes:[ae.a,I.e],styles:[""]}),he)}],Oe=((ge=function e(){n(this,e)}).\u0275mod=d.Mb({type:ge}),ge.\u0275inj=d.Lb({factory:function(e){return new(e||ge)},imports:[[l.h.forChild(ze)],l.h]}),ge),Ce=c("S9na"),Te=((ye=function e(){n(this,e)}).\u0275mod=d.Mb({type:ye}),ye.\u0275inj=d.Lb({factory:function(e){return new(e||ye)},imports:[[u.a,Oe,m,Ce.a]]}),ye)}}])}();